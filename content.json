{"meta":{"title":"George's Blog","subtitle":"è®©æˆ‘æ¥ç»™ä½ è®²è®²ä»–çš„ä¼ å¥‡æ•…äº‹å§","description":"","author":"George Chan","url":"http://cyc0819.top","root":"/"},"pages":[{"title":"å…³äº","date":"2021-12-08T13:25:25.814Z","updated":"2021-12-08T13:25:25.814Z","comments":false,"path":"about/index.html","permalink":"http://cyc0819.top/about/index.html","excerpt":"","text":"flagğŸš©å°†å­¦åˆ°çš„ä¸œè¥¿éƒ½è®°å½•ä¸‹æ¥ğŸ“Œ ä¸ªäººèµ„æ–™ğŸ« ä¸€ä¸ªå¤§4ï¸âƒ£çš„åœ¨æ ¡çš„æš‚æœªç§ƒå¤´ğŸ¤µ(ä»¥åå¯èƒ½ä¹Ÿä¸ç§ƒå¤´)çš„åˆçº§è½¯ä»¶å·¥ç¨‹å¸ˆğŸ’»(é«˜ç«¯)æ¥è‡ªæ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ğŸ«(æ¸…ååˆç§°åŒ—äº¬å°æ¡‚ç”µ) ä¸šä½™çš„javaå¼€å‘,ä¸šä½™çš„ğŸ€è¿åŠ¨å‘˜,èŒä¸šçš„ç¡è§‰ğŸ’¤è¾¾äºº æƒ³å†™å‡ºæ›´å¤šğŸ’¯æ–‡ç« ğŸ“„ è”ç³»ğŸ“æˆ‘ æˆ‘çš„ğŸ“«ï¼š &#99;&#x68;&#101;&#x6e;&#x79;&#105;&#x63;&#x61;&#105;&#48;&#x38;&#x31;&#x39;&#64;&#x66;&#111;&#x78;&#x6d;&#x61;&#x69;&#x6c;&#46;&#x63;&#x6f;&#109; æˆ‘çš„WeChatâ„¹ï¼šGeorge_Chan0819 æˆ‘çš„ğŸ§ğŸ§ï¼š2495842975 æˆ‘çš„æ ‡ç­¾ğŸ”–"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2021-12-08T09:08:13.041Z","updated":"2021-12-08T09:08:13.041Z","comments":false,"path":"categories/index.html","permalink":"http://cyc0819.top/categories/index.html","excerpt":"","text":""},{"title":"å‹é“¾åˆ—è¡¨","date":"2021-12-08T12:57:26.464Z","updated":"2021-12-08T12:57:26.464Z","comments":false,"path":"friends/index.html","permalink":"http://cyc0819.top/friends/index.html","excerpt":"","text":""},{"title":"img","date":"2021-06-21T15:46:17.000Z","updated":"2021-06-21T15:46:17.510Z","comments":true,"path":"img/index.html","permalink":"http://cyc0819.top/img/index.html","excerpt":"","text":""},{"title":"ç•™è¨€ç‰ˆ","date":"2021-10-01T11:16:28.000Z","updated":"2021-10-01T11:17:42.638Z","comments":true,"path":"info/index.html","permalink":"http://cyc0819.top/info/index.html","excerpt":"","text":""},{"title":"","date":"2021-12-08T16:45:52.023Z","updated":"2021-12-08T16:45:52.023Z","comments":false,"path":"photos/index.html","permalink":"http://cyc0819.top/photos/index.html","excerpt":"","text":"2021-12-08 å°è“å’Œä»–çš„å¥½æœ‹å‹ä»¬"},{"title":"","date":"2021-09-30T03:08:15.422Z","updated":"2021-09-30T02:50:19.699Z","comments":true,"path":"photos/photos.json","permalink":"http://cyc0819.top/photos/photos.json","excerpt":"","text":"[{\"name\":\"photos\",\"children\":[\"1600.1600 cc.jpeg\",\"2208.2208 i6_12.jpg\",\"2208.2208 i6_template_0.jpg\",\"1242.813 IMG_20191219_012423.jpg\",\"968.961 IMG_20191219_012434.jpg\",\"971.960 IMG_20191219_012436.jpg\",\"971.960 IMG_20191219_012439.jpg\",\"1000.667 IMG_20191219_012506.jpg\",\"1200.800 IMG_20191219_012701.jpg\",\"1620.1080 mmexport1558356254403.bmp\",\"2560.1440 wall_ko8e24-1.jpg\",\"1080.718 å¾®ä¿¡å›¾ç‰‡_20190822224807 - å‰¯æœ¬ (2).jpg\",\"1920.1080 å¾®ä¿¡å›¾ç‰‡_20190822224812.jpg\",\"1920.1080 å¾®ä¿¡å›¾ç‰‡_20190822224816.jpg\"]}]"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2021-12-08T09:08:46.646Z","updated":"2021-12-08T09:08:46.646Z","comments":false,"path":"tags/index.html","permalink":"http://cyc0819.top/tags/index.html","excerpt":"","text":""},{"title":"","date":"2021-09-30T02:50:19.696Z","updated":"2021-09-30T02:50:19.696Z","comments":true,"path":"photos/photosInfo.json","permalink":"http://cyc0819.top/photos/photosInfo.json","excerpt":"","text":"[{\"dirName\":\"photos\",\"fileName\":\"cc.jpeg\",\"iconID\":\"1600.1600 cc.jpeg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"i6_12.jpg\",\"iconID\":\"2208.2208 i6_12.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"i6_template_0.jpg\",\"iconID\":\"2208.2208 i6_template_0.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012423.jpg\",\"iconID\":\"1242.813 IMG_20191219_012423.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012434.jpg\",\"iconID\":\"968.961 IMG_20191219_012434.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012436.jpg\",\"iconID\":\"971.960 IMG_20191219_012436.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012439.jpg\",\"iconID\":\"971.960 IMG_20191219_012439.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012506.jpg\",\"iconID\":\"1000.667 IMG_20191219_012506.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"IMG_20191219_012701.jpg\",\"iconID\":\"1200.800 IMG_20191219_012701.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"mmexport1558356254403.bmp\",\"iconID\":\"1620.1080 mmexport1558356254403.bmp\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"wall_ko8e24-1.jpg\",\"iconID\":\"2560.1440 wall_ko8e24-1.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"å¾®ä¿¡å›¾ç‰‡_20190822224807 - å‰¯æœ¬ (2).jpg\",\"iconID\":\"1080.718 å¾®ä¿¡å›¾ç‰‡_20190822224807 - å‰¯æœ¬ (2).jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"å¾®ä¿¡å›¾ç‰‡_20190822224812.jpg\",\"iconID\":\"1920.1080 å¾®ä¿¡å›¾ç‰‡_20190822224812.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}},{\"dirName\":\"photos\",\"fileName\":\"å¾®ä¿¡å›¾ç‰‡_20190822224816.jpg\",\"iconID\":\"1920.1080 å¾®ä¿¡å›¾ç‰‡_20190822224816.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}}]"}],"posts":[{"title":"SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯","slug":"2021-12-10-SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯","date":"2021-12-10T04:54:26.000Z","updated":"2021-12-10T04:55:18.938Z","comments":false,"path":"2021/12/10/2021-12-10-SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯/","link":"","permalink":"http://cyc0819.top/2021/12/10/2021-12-10-SpringBoot%E5%8F%91%E9%80%81%E5%BE%AE%E4%BF%A1%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF/","excerpt":"","text":"SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯1ã€ç¯å¢ƒ jdk 1.8.0_271 Maven 3.6.1 MySQL 8.0 2ã€å·¥ä½œè¿™æ®µæ—¶é—´åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç”²æ–¹è¦æ±‚å°†ä¹‹å‰çš„æ˜“ç­æ¶ˆæ¯æ¨é€æ›´æ¢æˆå¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ï¼Œæ‰€ä»¥æœ¬æ–‡å°±æ˜¯è®°å½•ä¸€ä¸‹ä½¿ç”¨æ¨¡æ¿æ¶ˆæ¯çš„è¿‡ç¨‹ï¼Œ å¼€å‘çš„æ—¶å€™æˆ‘ç”¨çš„æ˜¯å¾®ä¿¡çš„æµ‹è¯•å…¬ä¼—è´¦å·ï¼Œä½†æ˜¯å®é™…çš„åŠŸèƒ½å’Œä¼ä¸šçš„è´¦å·æ˜¯ä¸€æ ·çš„ã€‚ 3ã€å‡†å¤‡å·¥ä½œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œæ¨¡æ¿æ¶ˆæ¯æ˜¯ä»€ä¹ˆï¼Ÿä»¥ä¸‹å°±æ˜¯å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœºæ™¯éƒ½ä¼šæ¥è§¦åˆ°å®ƒã€‚ åœ¨è¿›å…¥äº†æµ‹è¯•å·çš„ç®¡ç†åå°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®æˆ‘ä»¬çš„æ¨¡æ¿æ¶ˆæ¯çš„æ¨¡æ¿ é¦–å…ˆæˆ‘ä»¬è¦åœ¨å…¬ä¼—å¹³å°ä¸­è®¾ç½®å¥½æˆ‘ä»¬çš„æ¨¡æ¿ï¼Œç„¶å java ä¸­æ ¹æ®æ¨¡æ¿ä¿¡æ¯æ¥æ·»åŠ ç›¸åº”çš„å†…å®¹ã€‚ 4ã€javaåç«¯ç¼–å†™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºWeChatNotifyçš„å·¥å…·ç±»ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯æ¨¡æ¿æ¶ˆæ¯çš„è®¾ç½®å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Componentpublic class WeChatNotify &#123; @Autowired private IDictService ds; @Autowired private ParseUtil pu; @Autowired private JdrService js; // å‘é€æ¨¡æ¿ä¿¡æ¯ public String push(String openid,String map, Bxd bxd) &#123; //1ï¼Œé…ç½® WxMpInMemoryConfigStorage wxStorage = new WxMpInMemoryConfigStorage(); wxStorage.setAppId(&quot;wxacc93d31c5dbd26f&quot;); wxStorage.setSecret(&quot;f8c9e82b590ac71eb12e96f77cf65740&quot;); WxMpService wxMpService = new WxMpServiceImpl(); wxMpService.setWxMpConfigStorage(wxStorage); //2,æ¨é€æ¶ˆæ¯ WxMpTemplateMessage templateMessage = WxMpTemplateMessage.builder() .toUser(openid)//è¦æ¨é€çš„ç”¨æˆ·openid .templateId(&quot;-1pT4MrVw4asKamh0IQMF6c22Ih74dRjxqN8fwhjoQs&quot;)//æ¨¡ç‰ˆid .url(&quot;https://www.cyc0819.top&quot;)//ç‚¹å‡»æ¨¡ç‰ˆæ¶ˆæ¯è¦è®¿é—®çš„ç½‘å€ .build(); // è·å–ä¿ä¿®ç±»åˆ« String bxlb=pu.paraseBxlb(bxd.getBxlb()); //3,æ­£å¼ç‰ˆå‘é€æ¨¡ç‰ˆæ¶ˆæ¯ï¼Œè¿™é‡Œéœ€è¦é…ç½®ä½ çš„ä¿¡æ¯ï¼Œæ›¿æ¢å¾®ä¿¡å…¬ä¼—å·ä¸Šåˆ›å»ºçš„æ¨¡æ¿å†…å®¹ templateMessage.addData(new WxMpTemplateData(&quot;map&quot;, map, &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;type&quot;,bxlb, &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;text&quot;, bxd.getXxdd()+bxd.getBxnr(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;time&quot;, bxd.getYysj(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;name&quot;, bxd.getSbr(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;phone&quot;, bxd.getSbrsj(), &quot;#173177&quot;)); try &#123; wxMpService.getTemplateMsgService().sendTemplateMsg(templateMessage); return &quot;æ¨é€æˆåŠŸ&quot;; &#125; catch (Exception e) &#123; System.out.println(&quot;æ¨é€å¤±è´¥ï¼š&quot; + e.getMessage()); e.printStackTrace(); return &quot;æ¨é€å¤±è´¥&quot;; &#125; &#125; // æ£€æŸ¥openidæ˜¯å¦å·²ç»ç»‘å®š public String selOpenid(String ybid)&#123; String openid=js.selOpenidForYbid(ybid); if (openid == null)&#123; return null; &#125; return openid; &#125;&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å…¬ä¼—å·çš„appid,appsecretï¼Œä»¥åŠæ¥æ”¶äººçš„openidã€‚ å¦‚ä½•è·å–ç”¨æˆ·çš„ openid å¯ä»¥çœ‹ä»¥ä¸‹è¿™ç¯‡æ–‡ç« ã€‚ SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openidhttp://cyc0819.top/2021/12/09/2021-12-09-SpringBoot+Vue%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7openid/ ç»™è¶³æ‰€éœ€è¦çš„æ¶ˆæ¯ï¼Œç„¶ååœ¨è¦å‘é€æ¶ˆæ¯çš„åœ°æ–¹è°ƒç”¨å³å¯ 1234567public String zdpdWeChat(String eid, String bxlb,Bxd bxd)&#123; String ybid=zdpd(eid,bxlb); String map=es.selxxwz(Integer.parseInt(eid)); //è°ƒç”¨å‘é€æ¨¡æ¿ä¿¡æ¯ wcn.push(&quot;OPENID&quot;,map,bxd); return ybid;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://cyc0819.top/tags/SpringBoot/"}]},{"title":"SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯","slug":"2021-12-20-æ¡‚æ—åŒ»å­¦é™¢æŠ¥ä¿®ç³»ç»Ÿ","date":"2021-12-10T04:54:26.000Z","updated":"2021-12-10T04:55:18.938Z","comments":false,"path":"2021/12/10/2021-12-20-æ¡‚æ—åŒ»å­¦é™¢æŠ¥ä¿®ç³»ç»Ÿ/","link":"","permalink":"http://cyc0819.top/2021/12/10/2021-12-20-%E6%A1%82%E6%9E%97%E5%8C%BB%E5%AD%A6%E9%99%A2%E6%8A%A5%E4%BF%AE%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯1ã€ç¯å¢ƒ jdk 1.8.0_271 Maven 3.6.1 MySQL 8.0 2ã€å·¥ä½œè¿™æ®µæ—¶é—´åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç”²æ–¹è¦æ±‚å°†ä¹‹å‰çš„æ˜“ç­æ¶ˆæ¯æ¨é€æ›´æ¢æˆå¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€ï¼Œæ‰€ä»¥æœ¬æ–‡å°±æ˜¯è®°å½•ä¸€ä¸‹ä½¿ç”¨æ¨¡æ¿æ¶ˆæ¯çš„è¿‡ç¨‹ï¼Œ å¼€å‘çš„æ—¶å€™æˆ‘ç”¨çš„æ˜¯å¾®ä¿¡çš„æµ‹è¯•å…¬ä¼—è´¦å·ï¼Œä½†æ˜¯å®é™…çš„åŠŸèƒ½å’Œä¼ä¸šçš„è´¦å·æ˜¯ä¸€æ ·çš„ã€‚ 3ã€å‡†å¤‡å·¥ä½œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œæ¨¡æ¿æ¶ˆæ¯æ˜¯ä»€ä¹ˆï¼Ÿä»¥ä¸‹å°±æ˜¯å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœºæ™¯éƒ½ä¼šæ¥è§¦åˆ°å®ƒã€‚ åœ¨è¿›å…¥äº†æµ‹è¯•å·çš„ç®¡ç†åå°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®æˆ‘ä»¬çš„æ¨¡æ¿æ¶ˆæ¯çš„æ¨¡æ¿ é¦–å…ˆæˆ‘ä»¬è¦åœ¨å…¬ä¼—å¹³å°ä¸­è®¾ç½®å¥½æˆ‘ä»¬çš„æ¨¡æ¿ï¼Œç„¶å java ä¸­æ ¹æ®æ¨¡æ¿ä¿¡æ¯æ¥æ·»åŠ ç›¸åº”çš„å†…å®¹ã€‚ 4ã€javaåç«¯ç¼–å†™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºWeChatNotifyçš„å·¥å…·ç±»ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯æ¨¡æ¿æ¶ˆæ¯çš„è®¾ç½®å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Componentpublic class WeChatNotify &#123; @Autowired private IDictService ds; @Autowired private ParseUtil pu; @Autowired private JdrService js; // å‘é€æ¨¡æ¿ä¿¡æ¯ public String push(String openid,String map, Bxd bxd) &#123; //1ï¼Œé…ç½® WxMpInMemoryConfigStorage wxStorage = new WxMpInMemoryConfigStorage(); wxStorage.setAppId(&quot;wxacc93d31c5dbd26f&quot;); wxStorage.setSecret(&quot;f8c9e82b590ac71eb12e96f77cf65740&quot;); WxMpService wxMpService = new WxMpServiceImpl(); wxMpService.setWxMpConfigStorage(wxStorage); //2,æ¨é€æ¶ˆæ¯ WxMpTemplateMessage templateMessage = WxMpTemplateMessage.builder() .toUser(openid)//è¦æ¨é€çš„ç”¨æˆ·openid .templateId(&quot;-1pT4MrVw4asKamh0IQMF6c22Ih74dRjxqN8fwhjoQs&quot;)//æ¨¡ç‰ˆid .url(&quot;https://www.cyc0819.top&quot;)//ç‚¹å‡»æ¨¡ç‰ˆæ¶ˆæ¯è¦è®¿é—®çš„ç½‘å€ .build(); // è·å–ä¿ä¿®ç±»åˆ« String bxlb=pu.paraseBxlb(bxd.getBxlb()); //3,æ­£å¼ç‰ˆå‘é€æ¨¡ç‰ˆæ¶ˆæ¯ï¼Œè¿™é‡Œéœ€è¦é…ç½®ä½ çš„ä¿¡æ¯ï¼Œæ›¿æ¢å¾®ä¿¡å…¬ä¼—å·ä¸Šåˆ›å»ºçš„æ¨¡æ¿å†…å®¹ templateMessage.addData(new WxMpTemplateData(&quot;map&quot;, map, &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;type&quot;,bxlb, &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;text&quot;, bxd.getXxdd()+bxd.getBxnr(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;time&quot;, bxd.getYysj(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;name&quot;, bxd.getSbr(), &quot;#173177&quot;)); templateMessage.addData(new WxMpTemplateData(&quot;phone&quot;, bxd.getSbrsj(), &quot;#173177&quot;)); try &#123; wxMpService.getTemplateMsgService().sendTemplateMsg(templateMessage); return &quot;æ¨é€æˆåŠŸ&quot;; &#125; catch (Exception e) &#123; System.out.println(&quot;æ¨é€å¤±è´¥ï¼š&quot; + e.getMessage()); e.printStackTrace(); return &quot;æ¨é€å¤±è´¥&quot;; &#125; &#125; // æ£€æŸ¥openidæ˜¯å¦å·²ç»ç»‘å®š public String selOpenid(String ybid)&#123; String openid=js.selOpenidForYbid(ybid); if (openid == null)&#123; return null; &#125; return openid; &#125;&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å…¬ä¼—å·çš„appid,appsecretï¼Œä»¥åŠæ¥æ”¶äººçš„openidã€‚ å¦‚ä½•è·å–ç”¨æˆ·çš„ openid å¯ä»¥çœ‹ä»¥ä¸‹è¿™ç¯‡æ–‡ç« ã€‚ SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openidhttp://cyc0819.top/2021/12/09/2021-12-09-SpringBoot+Vue%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7openid/ ç»™è¶³æ‰€éœ€è¦çš„æ¶ˆæ¯ï¼Œç„¶ååœ¨è¦å‘é€æ¶ˆæ¯çš„åœ°æ–¹è°ƒç”¨å³å¯ 1234567public String zdpdWeChat(String eid, String bxlb,Bxd bxd)&#123; String ybid=zdpd(eid,bxlb); String map=es.selxxwz(Integer.parseInt(eid)); //è°ƒç”¨å‘é€æ¨¡æ¿ä¿¡æ¯ wcn.push(&quot;OPENID&quot;,map,bxd); return ybid;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://cyc0819.top/tags/SpringBoot/"}]},{"title":"SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openid","slug":"2021-12-09-SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openid","date":"2021-12-08T16:16:46.000Z","updated":"2021-12-10T05:01:27.875Z","comments":false,"path":"2021/12/09/2021-12-09-SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openid/","link":"","permalink":"http://cyc0819.top/2021/12/09/2021-12-09-SpringBoot+Vue%E5%BE%AE%E4%BF%A1%E6%8E%88%E6%9D%83%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7openid/","excerpt":"","text":"SpringBoot+Vueå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·openid1ã€ç¯å¢ƒ jdk 1.8.0_271 Maven 3.6.1 MySQL 8.0 Vue 3.0 2ã€éœ€æ±‚è¿™å‡ å¤©åœ¨åšæ¡‚æ—åŒ»å­¦é™¢çš„é¡¹ç›®çš„æ—¶å€™ï¼Œç”²æ–¹æå‡ºäº†éœ€æ±‚è¯´èƒ½ä¸èƒ½å°†æ¶ˆæ¯é€šçŸ¥æ”¹æˆå¾®ä¿¡å…¬ä¼—å·é€šçŸ¥ï¼Œå› ä¸ºå…¬ä¼—å·çš„æ•ˆç‡æ¯”è¾ƒé«˜ï¼ŒåŒæ—¶å—ä¼—ä¹Ÿæ˜¯æ¯”è¾ƒå¤šï¼ˆåŸæœ¬ç”¨çš„æ˜¯æ˜“ç­çš„ apiï¼Œæ–‡æ¡£åŠå…¶ä¸å‹å¥½ï¼Œbug å®˜æ–¹ä¹Ÿä¸è§£å†³ï¼ŒæŒ‰ç…§ä¸Šä¸€å±Šå­¦é•¿çš„è¯´æ³•ï¼Œä¹‹å‰å‘é€æ¶ˆæ¯æ¥æ”¶äººå¾—ç­‰ä¸¤å¤©ä¹‹åæ‰èƒ½æ”¶åˆ°ï¼‰ã€‚ è€Œå¦‚æœç”¨åˆ°å¾®ä¿¡çš„å…¬ä¼—å·ï¼Œå¿…é¡»å°±å¾—æ¥æ”¶äººä¸»åŠ¨ç»‘å®šè‡ªå·±çš„å¾®ä¿¡å·ï¼Œæˆ‘ä»¬æ‰èƒ½è·å–ä»–çš„ openid ï¼Œæ‰èƒ½å¯¹å…¶å‘é€æ¨¡æ¿æ¶ˆæ¯ã€‚ 3ã€å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯å¼€å‘çš„æ—¶å€™æˆ‘ç”¨çš„æ˜¯å¾®ä¿¡çš„æµ‹è¯•å…¬ä¼—è´¦å·ï¼Œä½†æ˜¯å®é™…çš„åŠŸèƒ½å’Œä¼ä¸šçš„è´¦å·æ˜¯ä¸€æ ·çš„ã€‚ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œæ¨¡æ¿æ¶ˆæ¯æ˜¯ä»€ä¹ˆï¼Ÿä»¥ä¸‹å°±æ˜¯å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœºæ™¯éƒ½ä¼šæ¥è§¦åˆ°å®ƒã€‚ åœ¨è¿›å…¥äº†æµ‹è¯•å·çš„ç®¡ç†åå°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®æˆ‘ä»¬çš„æ¨¡æ¿æ¶ˆæ¯çš„æ¨¡æ¿ å½“ç„¶ï¼Œæœ¬æ–‡çš„ä¸»é¢˜å¹¶ä¸æ˜¯æ¨¡æ¿æ¶ˆæ¯çš„å‘é€ï¼Œè€Œæ˜¯ä½¿ç”¨æ¨¡æ¿æ¶ˆæ¯çš„æ—¶å€™å¼•å‘çš„å…¶ä»–é—®é¢˜ï¼Œå…·ä½“çš„æ¨¡æ¿æ¶ˆæ¯å¯ä»¥ç§»æ­¥æˆ‘çš„ï¼š SpringBootå‘é€å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯http://cyc0819.top/2021/12/10/2021-12-10-SpringBoot%E5%8F%91%E9%80%81%E5%BE%AE%E4%BF%A1%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF/ 4ã€SpringBootè·å–openidopenid æ˜¯å¾®ä¿¡ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼Œå°±è·Ÿäººçš„èº«ä»½è¯ä¸€æ ·ï¼Œæ¯ä¸ªå¾®ä¿¡å·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ openid ï¼Œç”¨äºè¯†åˆ«æ¯ä¸ªå¾®ä¿¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•çœ‹åˆ°ï¼Œæ›´æ— æ³•ä¿®æ”¹æˆ‘ä»¬çš„ openidï¼Œæ­¤æ—¶å¦‚æœéœ€è¦è·å–ï¼Œå°±éœ€è¦å¾®ä¿¡å®˜æ–¹ç»™æˆ‘ä»¬æä¾›çš„æ¥å£ï¼š æˆ‘ä»¬ç‚¹å¼€ä¸‹å›¾ä¸­çš„è“è‰²å­—ä½“,å¯ä»¥è¿›å…¥åˆ°ç½‘é¡µæˆæƒçš„ç•Œé¢ï¼š é‡Œé¢è¯¦ç»†ä»‹ç»äº†è·å–openidï¼Œç”šè‡³æ˜¯ç”¨æˆ·ä¿¡æ¯çš„è¿‡ç¨‹ï¼š ä»¥ä¸‹æ˜¯æˆ‘é€šè¿‡ java å®ç°çš„ä¸€äº›è¿‡ç¨‹ï¼Œå¯ä¾›å‚è€ƒã€‚ 4.1ã€ç”¨æˆ·åŒæ„æˆæƒï¼Œè·å–codeæ ¹æ®å®˜æ–¹çš„è¯´æ³•ï¼Œæˆ‘ä»¬éœ€è¦è¯·æ±‚ä¸€ä¸ªé“¾æ¥æ¥è·å–åˆ°ç”¨æˆ·çš„ CODEé“¾æ¥å¦‚ä¸‹ï¼šhttps://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&amp;redirect_uri=REDIRECT_URI&amp;response_type=code&amp;scope=SCOPE&amp;state=STATE#wechat_redirect è¿™é‡Œæœ‰å‡ ä¸ªå‚æ•°ï¼Œå®˜æ–¹æ–‡æ¡£éƒ½æœ‰è¯´æ˜ï¼Œè¿™é‡Œé‡ç‚¹æ˜¯æŠŠè¦å»ä¸Šä¸€æ­¥ä¸­ï¼š æœ€åé¢çš„ä¿®æ”¹é‚£é‡Œï¼Œå°†åŸŸåæ”¹æˆä¸ REDIRECT_URI ä¸€è‡´ è€Œæ­¤æ—¶æˆ‘ä»¬é€‰æ‹©çš„scopeæ˜¯éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é€šè¿‡æˆæƒçš„snsapi_userinfo ç„¶åæˆ‘ä»¬å°±æœ‰äº†æˆ‘ä»¬çš„é“¾æ¥ï¼Œæ­¤æ—¶å°±è¦å»ä»£ç ä¸­å¯¹å…¶è¿›è¡Œè¯·æ±‚äº†ã€‚ ä»¥ä¸‹å°±æ˜¯javaä»£ç é¦–å…ˆæˆ‘ä»¬åœ¨ SpringBootæ¨¡å—ä¸­å»ºä¸€ä¸ª WechatOAuth æ§åˆ¶å™¨ï¼Œç”¨æ¥æ¥å—å‰ç«¯å‘æ¥çš„è¯·æ±‚ 1234567891011121314151617181920212223242526@RestController@RequestMapping(&quot;wechat&quot;)public class WechatOAuth &#123; @Autowired private AuthUtil authUtil; @Resource private UserService userService; // ç”¨æˆ·åŒæ„æˆæƒï¼Œè·å–code @RequestMapping(&quot;/oauth&quot;) public void oauth(HttpServletResponse response, String id) throws IOException &#123; // System.out.println(&quot;å¼€å§‹è¯¢é—®ç”¨æˆ·æ˜¯å¦åŒç»Ÿä¸€æˆæƒ&quot;); String appid = &quot;wxac**********d26f&quot;; String path = &quot;http://10.33.73.62:8089/wechat/invoke&quot;; path = URLEncoder.encode(path, &quot;UTF-8&quot;); String url = &quot;https://open.weixin.qq.com/connect/oauth2/authorize?appid=&quot; + appid + &quot;&amp;response_type=code&amp;scope=snsapi_userinfo&amp;redirect_uri=&quot; + path + &quot;&amp;state=&quot; + id + &quot;&amp;connect_redirect=1#wechat_redirect&quot;; //è¯·æ±‚è½¬å‘é“¾æ¥ response.sendRedirect(url); &#125;&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¯·æ±‚é“¾æ¥è·å¾— code ï¼Œç„¶åè¿”å›æˆ‘ä»¬è®¾ç½®å¥½çš„å›è°ƒåœ°å€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ pathï¼Œï¼ˆæ³¨æ„ï¼Œæ­¤å¤„çš„åœ°å€è¦å’Œå‰é¢æˆ‘ä»¬è®¾ç½®çš„ä¸€è‡´ï¼Œåé¢çš„ç«¯å£å¯ä»¥æ”¹å˜ï¼‰ 4.2ã€é€šè¿‡codeæ¢å–ç½‘é¡µæˆæƒopenidç„¶åæˆ‘ä»¬å†å†™ä¸€ä¸ªè½¬å‘ä¹‹åçš„æ§åˆ¶å™¨ã€‚ä¹Ÿå°±æ˜¯ä¸Šä¸€æ­¥ä¸­String path = &quot;http://10.33.73.62:8089/wechat/invoke&quot;; 12345678910111213141516171819202122232425262728293031323334// ç”¨æˆ·åŒæ„æˆæƒ @RequestMapping(&quot;/invoke&quot;) public String oauthInvoke(HttpServletRequest request, HttpServletResponse response) &#123; // è·å¾—code System.out.println(&quot;ç”¨æˆ·åŒæ„æˆæƒï¼Œå¼€å§‹è·å–openid&quot;); String code = request.getParameter(&quot;code&quot;); String state = request.getParameter(&quot;state&quot;); System.out.println(code); System.out.println(state); // åˆ¤æ–­æ˜¯å¦ç»‘å®šè¿‡openid String isOpenid=userService.selUser(state).getOpenid(); if (isOpenid!=null)&#123; return &quot;æ‚¨å·²ç»ç»‘å®šè¿‡å¾®ä¿¡äº†,å¦‚éœ€ä¿®æ”¹è¯·è”ç³»ç®¡ç†å‘˜&quot;; &#125; // é€šè¿‡tokenè·å–access_token String appid = &quot;wxacc93d31c5dbd26f&quot;; String secret = &quot;f8c9e82b590ac71eb12e96f77cf65740&quot;; String url = &quot;https://api.weixin.qq.com/sns/oauth2/access_token?appid=&quot; + appid + &quot;&amp;secret=&quot; + secret + &quot;&amp;code=&quot; + code + &quot;&amp;grant_type=authorization_code&quot;; try &#123; JSONObject jsonObject = authUtil.doGetJson(url); String openid= (String) jsonObject.get(&quot;openid&quot;); System.out.println(openid); // å°†openidæ’å…¥åˆ°userè¡¨ä¸­ userService.addOpenid(state,openid); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return &quot;æˆæƒæˆåŠŸ,ç»‘å®šå¾®ä¿¡æˆåŠŸ&quot;; &#125; æ­¤å¤„åŒæ ·æ˜¯è¯·æ±‚é“¾æ¥ï¼Œå°±å¯ä»¥è¿”å›ä¸€ä¸ª json æ•°æ®ï¼Œé‡Œé¢å°±æœ‰æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ï¼Œå¦‚æœè¿˜éœ€è¦ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®ï¼Œå¯ä»¥ç»§ç»­è·Ÿç€å®˜æ–¹çš„æ­¥éª¤ç»§ç»­å¾€ä¸‹åšï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œåªéœ€è¦ä¸€ä¸ª openidï¼Œæ‰€ä»¥å°±åˆ°è¿™ä¸€æ­¥ã€‚ åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚è¯¥é“¾æ¥ï¼Œç„¶åç”¨authUtilå·¥å…·é‡Œæ¥è§£æï¼Œå°†å…¶è¿”å›çš„æ•°æ®è½¬æ¢ä¸º json æ•°æ®ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬çš„æå–ä½¿ç”¨ï¼Œè½¬æ¢ä¸º json æ•°æ®ä¹‹åï¼Œåªè¦ä»ä¸­é€šè¿‡ key å–å‡ºæ¥å³å¯ã€‚ æ­¤å¤„é¦–å…ˆä¼šåˆ¤æ–­ç”¨æˆ·çš„ openid æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±å¼¹å‡ºæç¤ºï¼Œä¸æ‰§è¡Œä»¥ä¸‹çš„æ“ä½œï¼Œå¦åˆ™åœ¨æŸ¥å‡ºç”¨æˆ·çš„openid ä¹‹åï¼Œå³å¯ç»‘å®šåˆ°æ•°æ®åº“ï¼Œå¼¹å‡ºæç¤ºä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯æ­¤å¤„ç”¨åˆ°çš„ authUtil å·¥å…·ç±» 1234567891011121314151617181920212223242526@Componentpublic class AuthUtil &#123; public static final String APPID = &quot;wx45c1428e5584fcdb&quot;; public static final String APPSECRET = &quot;98174450eb706ada330f37e646be85d5&quot;; public JSONObject doGetJson(String url) throws ClientProtocolException, IOException &#123; JSONObject jsonObject = null; //é¦–å…ˆåˆå§‹åŒ–HttpClientå¯¹è±¡ DefaultHttpClient client = new DefaultHttpClient(); //é€šè¿‡getæ–¹å¼è¿›è¡Œæäº¤ HttpGet httpGet = new HttpGet(url); //é€šè¿‡HTTPclientçš„executeæ–¹æ³•è¿›è¡Œå‘é€è¯·æ±‚ HttpResponse response = client.execute(httpGet); //ä»responseé‡Œé¢æ‹¿è‡ªå·±æƒ³è¦çš„ç»“æœ HttpEntity entity = response.getEntity(); if(entity != null)&#123; String result = EntityUtils.toString(entity,&quot;UTF-8&quot;); // jsonObject = JSONObject.fromObject(result); jsonObject= JSON.parseObject(result); &#125; //æŠŠé“¾æ¥é‡Šæ”¾æ‰ httpGet.releaseConnection(); return jsonObject; &#125;&#125; 5ã€å‰ç«¯è¯·æ±‚åç«¯æ¥å£æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½çœ‹å¾—è¿‡å»ï¼Œèƒ½è®©ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç çš„å‰ç«¯ç•Œé¢ï¼Œæ‰€ä»¥ä»¥ä¸‹æ˜¯æˆ‘ä»¬ vue çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;template&gt; &lt;div class=&quot;login&quot;&gt; &lt;div class=&quot;form-login&quot;&gt; &lt;el-form ref=&quot;form&quot; :model=&quot;data.form&quot; &gt; &lt;el-form-item label=&quot;è´¦æˆ·&quot;&gt; &lt;el-input v-model=&quot;data.form.name&quot; class=&quot;input-login&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item label=&quot;å¯†ç &quot;&gt; &lt;el-input v-model=&quot;data.form.pass&quot; type=&quot;password&quot; class=&quot;input-login&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;Wechatlogin&quot;&gt;å¾®ä¿¡æˆæƒ&lt;/el-button&gt; &lt;/el-form&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123;getCurrentInstance, reactive&#125; from &quot;vue&quot;;import qs from &quot;qs&quot;;import router from &quot;../../router&quot;;import &#123; ElLoading &#125; from &#x27;element-plus&#x27;export default &#123; name: &quot;Wechar&quot;, setup()&#123; const &#123;proxy&#125;=getCurrentInstance(); const qs=require(&#x27;qs&#x27;); const data=reactive(&#123; form: &#123; name: &#x27;&#x27;, pass: &#x27;&#x27;, &#125;, &#125;) const Wechatlogin = () =&gt; &#123; const loading = ElLoading.service(&#123; lock: true, text: &#x27;Loading&#x27;, background: &#x27;rgba(0, 0, 0, 0.7)&#x27;, &#125;) proxy.$axios.post(&#x27;user/login&#x27;,qs.stringify(&#123; &quot;userId&quot;:data.form.name,&quot;userPass&quot;:data.form.pass &#125;)).then(res=&gt;&#123; if (&quot;å…è®¸ç™»å½•&quot;==res.data)&#123; window.location.href=&quot;http://10.33.73.62:8089/wechat/oauth?id=&quot;+data.form.name loading.close() &#125;else&#123; loading.close() alert(res.data); &#125; &#125;); &#125; return&#123; data,Wechatlogin, &#125; &#125;&#125;&lt;/script&gt; è¿™é‡Œç‚¹å‡»æˆæƒçš„æŒ‰é’®ä¹‹åï¼Œé¦–å…ˆä¼šåˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨ä»¥åŠå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œç„¶åå°±å»è°ƒç”¨åç«¯çš„æ¥å£ã€‚ æ³¨æ„æ­¤å¤„æœ‰ä¸€ä¸ªå‘ï¼š å¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡Œwindow.location.href=http://10.33.73.62:8089/wechat/oauth?id=+data.form.nameä½¿ç”¨çš„æ˜¯window.location.hrefè¯·æ±‚åç«¯æ¥å£ã€‚ è¿™é‡Œæ˜¯ä¸èƒ½ç”¨axiosè¿›è¡Œè¯·æ±‚çš„ï¼Œä¼šå‡ºç°è·¨åŸŸå¼‚å¸¸ï¼ˆè·¨åŸŸåˆ°å¾®ä¿¡çš„æœåŠ¡å™¨ï¼‰ã€‚ ç®—æ˜¯ä¸€ä¸ªé€¼å‘æŒ‡å—ã€‚ 6ã€å®Œæ•´æµç¨‹","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"å‰ç«¯/Vue","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/Vue/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBootï¼ŒVue","slug":"SpringBootï¼ŒVue","permalink":"http://cyc0819.top/tags/SpringBoot%EF%BC%8CVue/"}]},{"title":"jsonâ€”libä¾èµ–æ— æ³•ä¸‹è½½é—®é¢˜","slug":"2021-12-08-jsonâ€”libä¾èµ–æ— æ³•ä¸‹è½½é—®é¢˜","date":"2021-12-08T05:53:12.000Z","updated":"2021-12-08T09:32:01.537Z","comments":false,"path":"2021/12/08/2021-12-08-jsonâ€”libä¾èµ–æ— æ³•ä¸‹è½½é—®é¢˜/","link":"","permalink":"http://cyc0819.top/2021/12/08/2021-12-08-json%E2%80%94lib%E4%BE%9D%E8%B5%96%E6%97%A0%E6%B3%95%E4%B8%8B%E8%BD%BD%E9%97%AE%E9%A2%98/","excerpt":"","text":"json-libä¾èµ–æ— æ³•ä¸‹è½½é—®é¢˜1ã€ç¯å¢ƒ jdk 1.8.0_271 Maven 3.6.1 Mavenæºï¼šé˜¿é‡Œäº‘ 2ã€é—®é¢˜æ˜¨å¤©åœ¨ç ”ç©¶å¾®ä¿¡éªŒè¯æ—¶ï¼Œéœ€è¦ç”¨åˆ° JSONObject.fromObject(result); è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ json-lib çš„ä¾èµ–ï¼Œå¼•å…¥ä¾èµ–å¾ˆç®€å•ï¼Œæœ¬ä»¥ä¸ºå¤åˆ¶é»è´´å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆé˜¿é‡Œäº‘çš„ maven ä»“åº“å´æ­»æ´»æ— æ³•æ‰¾åˆ°è¿™ä¸ªä¾èµ–çš„åŒ…ã€‚åé¢é€šè¿‡æ‰‹åŠ¨å¼•å…¥çš„æ–¹å¼è§£å†³ã€‚ 3ã€è§£å†³3.1ã€å¼•å…¥çš„ä¾èµ–123456&lt;!-- https://mvnrepository.com/artifact/net.sf.json-lib/json-lib --&gt;&lt;dependency&gt; &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt; &lt;artifactId&gt;json-lib&lt;/artifactId&gt; &lt;version&gt;2.4&lt;/version&gt;&lt;/dependency&gt; 3.2ã€æŠ¥é”™æ­¤æ—¶ç›´æ¥è¿›è¡Œä¸‹è½½ä¼šæç¤ºæ‰¾ä¸åˆ°ä¾èµ–çš„ç›¸å…³å†…å®¹ 3.3ã€è§£å†³æ–¹æ³•ä¸€ç¿»é˜…äº†ç½‘ä¸Šçš„è¯´æ³•ï¼Œè¯´æ˜¯åœ¨ä¾èµ–åé¢åŠ ä¸Šä¸€å¥ï¼š&lt;classifier&gt;jdk15&lt;/classifier&gt; ï¼Œå› ä¸ºè¿œç¨‹æä¾›äº†ä¸¤ä¸ªåŒ…ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹åœ¨æˆ‘è¿™é‡Œå¹¶ä¸ç®¡ç”¨ã€‚æ‰€ä»¥ï¼Œæ­¤æ–¹æ³•åŸºæœ¬æ”¾å¼ƒã€‚ 3.4ã€è§£å†³æ–¹æ³•äºŒå¦ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯å»MAVENå­˜å‚¨åº“ç›´æ¥ä¸‹è½½jaråŒ…ï¼Œä½†æ˜¯åœ¨æˆ‘æ‰“å¼€ç½‘ç«™çš„æ—¶å€™ï¼Œç‚¹å‡» jar åŒ…è¿›è¡Œä¸‹è½½ï¼Œå´å‘ç°ï¼Œè¿™é‡Œçš„ä¹Ÿæ— æ³•ä¸‹è½½äº† æ‰€ä»¥åŸºæœ¬ä¸Šå¯ä»¥åˆ¤æ–­ä¸æ˜¯æˆ‘ä»¬è‡ªå·±çš„é—®é¢˜äº†ã€‚ å¶ç„¶ä¹‹é—´ï¼Œæˆ‘å‘ç°è¿™ä¸ªä¾èµ–ç«Ÿç„¶æœ‰ä¸€ä¸ªå®˜ç½‘ï¼šJSON-lib è¿›å»çœ‹çœ‹å®˜ç½‘é‡Œåº”è¯¥æœ‰ jar åŒ…çš„ä¸‹è½½é“¾æ¥æœç„¶ï¼Œç‚¹å‡»ä¸‹é¢è¿™ä¸ªæŒ‰é’®å°±å¯ä»¥æ­£å¸¸ä¸‹è½½äº† ä¸‹è½½å®Œæˆä¹‹åå°±å¯ä»¥è¿›è¡Œæ‰‹åŠ¨çš„å¯¼å…¥äº†æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯å°†æˆ‘ä»¬æ‰‹åŠ¨ä¸‹è½½çš„ jar åŒ…ï¼Œæ”¾åœ¨ maven æœ¬åœ°ä»“åº“çš„ç›¸åº”ä½ç½®é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†åé¢çš„ jdk15 å»æ‰ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¾èµ–é‡Œæ˜¯æ²¡æœ‰çš„ã€‚ ç„¶åæ ¹æ®è‡ªå·±çš„æœ¬åœ°ä»“åº“ä½ç½®ï¼Œæ‰¾åˆ° json-libçš„æœ¬åœ°ä»“åº“ç‚¹å‡»è¿›å…¥ 2.4 æ–‡ä»¶å¤¹,å°†æˆ‘ä»¬æ›´åä¹‹åçš„ jar åŒ…æ”¾åˆ°å…¶ä¸­æœ€åè®°å¾—æŠŠå¸¦æœ‰ last çš„æ–‡ä»¶åˆ æ‰ æœ€ååˆ° java é¡¹ç›®ä¸­é‡æ–°è½½å…¥ä¸€ä¸‹ maven å°±å¯ä»¥äº†ã€‚ 4ã€ç»“æŸjson-lib ç›¸å½“äº jackson,fastjsonè¿™æ ·çš„ jar æ¥è¯´ï¼Œæ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨åè€…ã€‚ json-libä¸­çš„ JSONObject.fromObject(result) æ–¹æ³•å¯ç”¨fastjsonä¸­çš„JSON.parseObject(result);è¿›è¡Œæ›¿ä»£","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"maven","slug":"java/maven","permalink":"http://cyc0819.top/categories/java/maven/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"maven","slug":"maven","permalink":"http://cyc0819.top/tags/maven/"}]},{"title":"å›é¡¾SSMæ¡†æ¶æ•´åˆ","slug":"2021-11-30-å›é¡¾SSMæ¡†æ¶æ•´åˆ","date":"2021-11-30T05:13:21.000Z","updated":"2021-12-08T09:31:52.507Z","comments":false,"path":"2021/11/30/2021-11-30-å›é¡¾SSMæ¡†æ¶æ•´åˆ/","link":"","permalink":"http://cyc0819.top/2021/11/30/2021-11-30-%E5%9B%9E%E9%A1%BESSM%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/","excerpt":"","text":"å›é¡¾SSMæ¡†æ¶æ•´åˆ1ã€ç¯å¢ƒ jdk 1.8.0_271 Maven 3.6.1 mySQL 8.0 Tomcat 9.0.27 2ã€åˆ›å»ºæ•°æ®åº“é¦–å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„æ•°æ®åº“ booksï¼š 12345678create table books( bid int not null primary key, sname varchar(255) null, bname varchar(255) null, bauthor varchar(255) null, bhome varchar(255) null); 3ã€åˆ›å»ºé¡¹ç›®ç°åœ¨åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ Maven é¡¹ç›®ï¼Œå¹¶å¼•å…¥æ‰€éœ€è¦çš„ä¾èµ– 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101&lt;properties&gt; &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt; &lt;spring.version&gt;5.2.3.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.9.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.9.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;1.7.25&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.zaxxer&lt;/groupId&gt; &lt;artifactId&gt;HikariCP&lt;/artifactId&gt; &lt;version&gt;3.4.5&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.11&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.mchange&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.5.2&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 4ã€è®¾ç½®èµ„æºè¿‡æ»¤åœ¨ pom.xm ä¸­æ’å…¥èµ„æºè¿‡æ»¤çš„ä»£ç  123456789101112131415161718192021&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; 5ã€æ·»åŠ  web æ¡†æ¶æ”¯æŒç»™æˆ‘ä»¬åˆ›å»ºçš„æ™®é€šé¡¹ç›®æ·»åŠ ä¸Šæ¡†æ¶æ”¯æŒï¼Œåœ¨é¡¹ç›®åä¸Šå³é”®ï¼Œå³å¯æ·»åŠ æ¡†æ¶æ”¯æŒã€‚ 5ã€åˆ›å»º spring é…ç½®æ–‡ä»¶åœ¨åˆšåˆšé¡¹ç›®çš„ resources ä¸‹é¢åˆ›å»ºé…ç½®æ–‡ä»¶ db.properties ï¼Œå…¶ä¸­å†™çš„æ˜¯æ•°æ®åº“çš„ç›¸å…³é…ç½® 1234jdbc.driver=com.mysql.cj.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF8&amp;userSSL=true&amp;serverTimezone=GMTjdbc.username=chenyicaijdbc.password=cyc1234 ä»¥åŠåˆ›å»º applicationContext.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt; &lt;!-- ä½¿ç”¨è¿æ¥æ± ï¼Œå¼€æºçš„è¿æ¥æ± --&gt; &lt;!-- é˜¿é‡Œï¼šdruid--&gt; &lt;!-- c3p0--&gt; &lt;!-- hirakiï¼šspringbooté»˜è®¤ä½¿ç”¨çš„è¿æ¥æ± --&gt; &lt;!-- ä¸€ä¸ªåº”ç”¨æœ€å¤§å¹¶å‘å¦‚æœæœ‰500ä¸ªï¼Œé‚£ä¹ˆä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œé¢„å…ˆåˆ›å»º500ä¸ªè¿æ¥ï¼Œå¹¶ä¸”æŠŠ500ä¸ªè¿æ¥æ”¾å…¥è¿æ¥æ± ï¼ˆå®¹å™¨ï¼‰--&gt; &lt;!-- æ§åˆ¶å™¨ç±»çš„åˆ›å»ºäº¤ç»™SpringMVCï¼Œä¸èƒ½é…ç½®åœ¨beanå®¹å™¨ä¸­ --&gt; &lt;context:component-scan base-package=&quot;com.chen&quot;&gt;&lt;/context:component-scan&gt; &lt;context:property-placeholder location=&quot;classpath:db.properties&quot;&gt;&lt;/context:property-placeholder&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt; &lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;!-- åˆå§‹åŒ–è¿æ¥æ± ä¸­çš„è¿æ¥æ•°ï¼Œå–å€¼åº”åœ¨minPoolSizeä¸maxPoolSizeä¹‹é—´ï¼Œé»˜è®¤ä¸º3 --&gt; &lt;property name=&quot;initialPoolSize&quot; value=&quot;15&quot;&gt;&lt;/property&gt; &lt;!--æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œ60ç§’å†…æœªä½¿ç”¨åˆ™è¿æ¥è¢«ä¸¢å¼ƒã€‚è‹¥ä¸º0åˆ™æ°¸ä¸ä¸¢å¼ƒã€‚é»˜è®¤å€¼: 0 --&gt; &lt;property name=&quot;maxIdleTime&quot; value=&quot;0&quot;&gt;&lt;/property&gt; &lt;!--è¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å¤§è¿æ¥æ•°ã€‚é»˜è®¤å€¼: 15 --&gt; &lt;property name=&quot;maxPoolSize&quot; value=&quot;100&quot;&gt;&lt;/property&gt; &lt;!-- è¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å°è¿æ¥æ•°ï¼Œé»˜è®¤ä¸ºï¼š3 --&gt; &lt;property name=&quot;minPoolSize&quot; value=&quot;10&quot;&gt;&lt;/property&gt; &lt;!--c3p0å…¨å±€çš„PreparedStatementsç¼“å­˜çš„å¤§å°ã€‚å¦‚æœmaxStatementsä¸maxStatementsPerConnectionå‡ä¸º0ï¼Œåˆ™ç¼“å­˜ä¸ç”Ÿæ•ˆï¼Œåªè¦æœ‰ä¸€ä¸ªä¸ä¸º0ï¼Œåˆ™è¯­å¥çš„ç¼“å­˜å°±èƒ½ç”Ÿæ•ˆã€‚å¦‚æœé»˜è®¤å€¼: 0 --&gt; &lt;property name=&quot;maxStatements&quot; value=&quot;200&quot;&gt;&lt;/property&gt; &lt;!-- å½“è¿æ¥æ± è¿æ¥è€—å°½æ—¶ï¼Œå®¢æˆ·ç«¯è°ƒç”¨getConnection()åç­‰å¾…è·å–æ–°è¿æ¥çš„æ—¶é—´ï¼Œè¶…æ—¶åå°†æŠ›å‡ºSQLExceptionï¼Œå¦‚è®¾ä¸º0åˆ™æ— é™æœŸç­‰å¾…ã€‚å•ä½æ¯«ç§’ã€‚é»˜è®¤: 0 --&gt; &lt;property name=&quot;checkoutTimeout&quot; value=&quot;3000&quot; /&gt; &lt;!--å½“è¿æ¥æ± ä¸­çš„è¿æ¥è€—å°½çš„æ—¶å€™c3p0ä¸€æ¬¡åŒæ—¶è·å–çš„è¿æ¥æ•°ã€‚é»˜è®¤å€¼: 3 --&gt; &lt;property name=&quot;acquireIncrement&quot; value=&quot;2&quot; /&gt; &lt;!--å®šä¹‰åœ¨ä»æ•°æ®åº“è·å–æ–°è¿æ¥å¤±è´¥åé‡å¤å°è¯•çš„æ¬¡æ•°ã€‚é»˜è®¤å€¼: 30 ï¼›å°äºç­‰äº0è¡¨ç¤ºæ— é™æ¬¡ --&gt; &lt;property name=&quot;acquireRetryAttempts&quot; value=&quot;0&quot; /&gt; &lt;!--é‡æ–°å°è¯•çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸ºï¼š1000æ¯«ç§’ --&gt; &lt;property name=&quot;acquireRetryDelay&quot; value=&quot;5000&quot; /&gt; &lt;!--å…³é—­è¿æ¥æ—¶ï¼Œæ˜¯å¦æäº¤æœªæäº¤çš„äº‹åŠ¡ï¼Œé»˜è®¤ä¸ºfalseï¼Œå³å…³é—­è¿æ¥ï¼Œå›æ»šæœªæäº¤çš„äº‹åŠ¡ --&gt; &lt;property name=&quot;autoCommitOnClose&quot; value=&quot;false&quot;&gt;&lt;/property&gt; &lt;!--c3p0å°†å»ºä¸€å¼ åä¸ºTestçš„ç©ºè¡¨ï¼Œå¹¶ä½¿ç”¨å…¶è‡ªå¸¦çš„æŸ¥è¯¢è¯­å¥è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœå®šä¹‰äº†è¿™ä¸ªå‚æ•°é‚£ä¹ˆå±æ€§preferredTestQueryå°†è¢«å¿½ç•¥ã€‚ä½ ä¸èƒ½åœ¨è¿™å¼ Testè¡¨ä¸Šè¿›è¡Œä»»ä½•æ“ä½œï¼Œå®ƒå°†åªä¾›c3p0æµ‹è¯•ä½¿ç”¨ã€‚é»˜è®¤å€¼: null --&gt; &lt;property name=&quot;automaticTestTable&quot; value=&quot;Test&quot;&gt;&lt;/property&gt; &lt;!--å¦‚æœä¸ºfalseï¼Œåˆ™è·å–è¿æ¥å¤±è´¥å°†ä¼šå¼•èµ·æ‰€æœ‰ç­‰å¾…è¿æ¥æ± æ¥è·å–è¿æ¥çš„çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯æ•°æ®æºä»æœ‰æ•ˆä¿ç•™ï¼Œå¹¶åœ¨ä¸‹æ¬¡è°ƒç”¨getConnection()çš„æ—¶å€™ç»§ç»­å°è¯•è·å–è¿æ¥ã€‚å¦‚æœè®¾ä¸ºtrueï¼Œé‚£ä¹ˆåœ¨å°è¯•è·å–è¿æ¥å¤±è´¥åè¯¥æ•°æ®æºå°†ç”³æ˜å·²æ–­å¼€å¹¶æ°¸ä¹…å…³é—­ã€‚é»˜è®¤: false --&gt; &lt;property name=&quot;breakAfterAcquireFailure&quot; value=&quot;false&quot;&gt;&lt;/property&gt; &lt;!--æ¯60ç§’æ£€æŸ¥æ‰€æœ‰è¿æ¥æ± ä¸­çš„ç©ºé—²è¿æ¥ã€‚é»˜è®¤å€¼: 0ï¼Œä¸æ£€æŸ¥ --&gt; &lt;property name=&quot;idleConnectionTestPeriod&quot; value=&quot;0&quot;&gt;&lt;/property&gt; &lt;!--maxStatementsPerConnectionå®šä¹‰äº†è¿æ¥æ± å†…å•ä¸ªè¿æ¥æ‰€æ‹¥æœ‰çš„æœ€å¤§ç¼“å­˜statementsæ•°ã€‚é»˜è®¤å€¼: 0 --&gt; &lt;property name=&quot;maxStatementsPerConnection&quot; value=&quot;10&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.chen.entity&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; 6ã€ç¼–å†™ä»£ç ä¸»ä½“ç°åœ¨æ¥ç¼–å†™ä»£ç ä¸­ entityï¼Œcontrollerï¼Œserviceï¼Œmapper å±‚çš„ä»£ç entityï¼šbooks 1234567891011121314public class Books implements Serializable &#123; private Integer bid; private String sname; private String bname; private String bauthor; private String bhome; private static final long serialVersionUID = 1L; &#125; mapperï¼ˆæ­¤å¤„æ¼”ç¤ºçš„æ˜¯ä¼ ç»Ÿçš„ DAO çš„æ–¹å¼ï¼‰:booksDaoï¼š 12345678910111213public interface BooksDao &#123; int deleteByPrimaryKey(Integer bid); int insert(Books record); int insertSelective(Books record); Books selectByPrimaryKey(Integer bid); int updateByPrimaryKeySelective(Books record); int updateByPrimaryKey(Books record);&#125; booksDaoImplï¼š 12345678910111213141516171819202122232425262728293031323334353637@Repositorypublic class BooksDaoImpl implements BooksDao &#123; private SqlSessionFactory sqlSessionFactory; public void setSqlSessionFactory(SqlSessionFactory sqlSessionFactory) &#123; this.sqlSessionFactory = sqlSessionFactory; &#125; @Override public int deleteByPrimaryKey(Integer bid) &#123; SqlSession sqlSession=sqlSessionFactory.openSession(); int out=sqlSession.delete(&quot;deleteByPrimaryKey&quot;,bid); return out; &#125; @Override public int insert(Books record) &#123; SqlSession sqlSession=sqlSessionFactory.openSession(); int out=sqlSession.insert(&quot;insert&quot;,record); return out; &#125; @Override public Books selectByPrimaryKey(Integer bid) &#123; SqlSession sqlSession=sqlSessionFactory.openSession(); Books books=sqlSession.selectOne(&quot;selectByPrimaryKey&quot;,bid); return books; &#125; @Override public int updateByPrimaryKey(Books record) &#123; SqlSession sqlSession=sqlSessionFactory.openSession(); int out = sqlSession.update(&quot;updateByPrimaryKey&quot;,record); return out; &#125;&#125; ç„¶åæ˜¯ xml æ–‡ä»¶ï¼Œå…¶ä¸­æ˜¯æ‰§è¡Œçš„ sqlï¼š 12345678910111213141516171819202122232425262728293031&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org/DTD Mapper 3.0&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;user&quot;&gt; &lt;select id=&quot;selectByPrimaryKey&quot; parameterType=&quot;int&quot; resultType=&quot;com.chen.entity.Books&quot;&gt; select * from books where bid = #&#123;bid,jdbcType=INTEGER&#125; &lt;/select&gt; &lt;delete id=&quot;deleteByPrimaryKey&quot; parameterType=&quot;int&quot;&gt; delete from books where bid = #&#123;bid,jdbcType=INTEGER&#125; &lt;/delete&gt; &lt;insert id=&quot;insert&quot; parameterType=&quot;com.chen.entity.Books&quot; useGeneratedKeys=&quot;true&quot;&gt; insert into books (sname, bname, bauthor, bhome) values (#&#123;sname,jdbcType=VARCHAR&#125;, #&#123;bname,jdbcType=VARCHAR&#125;, #&#123;bauthor,jdbcType=VARCHAR&#125;, #&#123;bhome,jdbcType=VARCHAR&#125;) &lt;/insert&gt; &lt;update id=&quot;updateByPrimaryKey&quot; parameterType=&quot;com.chen.entity.Books&quot;&gt; update books set sname = #&#123;sname,jdbcType=VARCHAR&#125;, bname = #&#123;bname,jdbcType=VARCHAR&#125;, bauthor = #&#123;bauthor,jdbcType=VARCHAR&#125;, bhome = #&#123;bhome,jdbcType=VARCHAR&#125; where bid = #&#123;bid,jdbcType=INTEGER&#125; &lt;/update&gt;&lt;/mapper&gt; service å±‚ï¼šBooksService 123456789public interface BooksService &#123; int deleteByPrimaryKey(Integer bid); int insert(Books record); Books selectByPrimaryKey(Integer bid); int updateByPrimaryKey(Books record);&#125; implï¼š 12345678910111213141516171819202122232425public class BooksServiceImpl implements BooksService &#123; @Autowired private BooksDao booksDao; @Override public int deleteByPrimaryKey(Integer bid) &#123; return booksDao.deleteByPrimaryKey(bid); &#125; @Override public int insert(Books record) &#123; return booksDao.insert(record); &#125; @Override public Books selectByPrimaryKey(Integer bid) &#123; return booksDao.selectByPrimaryKey(bid); &#125; @Override public int updateByPrimaryKey(Books record) &#123; return booksDao.updateByPrimaryKey(record); &#125;&#125; æœ€åæ˜¯ Controller å±‚ï¼šBooksController 123456789101112131415161718192021222324252627282930@RestControllerpublic class BooksController &#123; @Autowired private BooksService booksService; public void setBooksService(BooksService booksService) &#123; this.booksService = booksService; &#125; @RequestMapping(&quot;/del&quot;) int deleteByPrimaryKey(Integer bid)&#123; return booksService.deleteByPrimaryKey(bid); &#125; @RequestMapping(&quot;/ins&quot;) int insert(Books record)&#123; return booksService.insert(record); &#125; @RequestMapping(&quot;/sel&quot;) Books selectByPrimaryKey(Integer bid)&#123; return booksService.selectByPrimaryKey(bid); &#125; @RequestMapping(&quot;/up&quot;) int updateByPrimaryKey(Books record)&#123; return booksService.updateByPrimaryKey(record); &#125;&#125; æœ€åé¡¹ç›®çš„ç»“æ„å¦‚ä¸‹ï¼š 7ã€ç°åœ¨éœ€è¦åœ¨é…ç½® xml ä¸­ç¼–å†™æ‰«ææˆ‘ä»¬çš„ bean çš„ä»£ç åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 123456789&lt;bean id=&quot;userDao&quot; class=&quot;com.chen.mapper.impl.BooksDaoImpl&quot;&gt; &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.chen.entity&quot;&gt;&lt;/property&gt; &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath*:mapper/BooksMapper.xml&quot;&gt;&lt;/property&gt;&lt;/bean&gt; å¦‚å›¾ï¼š 8ã€web é…ç½®åœ¨ web.xml ä¸­é…ç½®ä»¥ä¸‹å†…å®¹,ç”¨äºé…ç½®dispatcherServletä¸­å¿ƒæ§åˆ¶å™¨ 123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt; &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!-- ç›‘å¬å™¨ä¼šè‡ªåŠ¨è¯»å–applicationContext.xmlä¸­çš„beançš„ä¿¡æ¯ï¼Œå®Œæˆbeançš„åˆå§‹åŒ–--&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;&lt;!-- å‰ç«¯æ§åˆ¶å™¨ --&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;!-- å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œå½“ç„¶ä¹ŸåŒ…å«é™æ€èµ„æºï¼ˆjsã€cssã€img...ï¼‰ --&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; åœ¨åˆ›å»ºä¸€ä¸ª dispatcher-servlet.xmlï¼Œç”¨äº MVC çš„è£…é… 123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt; &lt;!-- æ‰«ææ§åˆ¶å™¨çš„åŒ…ï¼Œä»¥ç¡®å®šå“ªäº›ç±»æ˜¯æ§åˆ¶å™¨ç±»ï¼ˆå“ªäº›ç±»ä¸Šä½¿ç”¨äº†@Controlleræ³¨è§£ï¼‰ --&gt; &lt;context:component-scan base-package=&quot;cn.edu.guet.controller&quot;&gt;&lt;/context:component-scan&gt; &lt;!-- è¡¨ç¤ºï¼šæ‰€æœ‰çš„é™æ€èµ„æºä½¿ç”¨é»˜è®¤çš„Servlet --&gt; &lt;mvc:default-servlet-handler&gt;&lt;/mvc:default-servlet-handler&gt; &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt; &lt;bean id=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;&gt;&lt;/property&gt;&lt;!-- å‘Šè¯‰SpringMVCå»å“ªä¸ªç›®å½•æ‰¾æ–‡ä»¶ --&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;&lt;!-- æ–‡ä»¶çš„åç¼€ --&gt; &lt;/bean&gt; &lt;bean class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;/&gt; &lt;!--é€šè¿‡å¤„ç†å™¨é€‚é…å™¨AnnotationMethodHandlerAdapteræ¥å¼€å¯æ”¯æŒ@RequestMappingæ³¨è§£--&gt;&lt;/beans&gt; 9ã€è¿è¡Œæµ‹è¯•æ­¤æ—¶æˆ‘ä»¬ç”¨ Tomcat æ„å»ºé¡¹ç›®ã€‚å‡ºç°ä»¥ä¸‹ç»“æœï¼š å¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦å°† maven çš„åŒ…æ‰‹åŠ¨å¯¼å…¥ï¼Œæ‰èƒ½æˆåŠŸå¯åŠ¨é¡¹ç›®ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š æ‰“å¼€é¡¹ç›®ç»“æ„ã€‚ ç‚¹å‡»æ„ä»¶ï¼Œç„¶åç‚¹å‡»WEB-INFç›®å½•ï¼Œç‚¹å‡»æ–°å»ºæ–‡ä»¶å¤¹æŒ‰é’®ï¼Œåˆ›å»ºlibæ–‡ä»¶å¤¹ã€‚ ç„¶åå¼•å…¥åº“ã€‚ å°†å…¶å…¨é€‰ï¼Œç„¶åéœ€è¦çš„jaråŒ…ä¾¿å…¨éƒ¨å¯¼å…¥åˆ°é¡¹ç›®ä¸­ã€‚ å†è¿è¡Œï¼Œå³å¯","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"http://cyc0819.top/categories/java/spring/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"spring","slug":"spring","permalink":"http://cyc0819.top/tags/spring/"}]},{"title":"eChartså­¦ä¹ ç¬”è®°","slug":"2021-11-27-eChartså­¦ä¹ ç¬”è®°","date":"2021-11-27T14:04:25.000Z","updated":"2021-12-08T09:31:43.846Z","comments":false,"path":"2021/11/27/2021-11-27-eChartså­¦ä¹ ç¬”è®°/","link":"","permalink":"http://cyc0819.top/2021/11/27/2021-11-27-eCharts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"eCharts å­¦ä¹ ç¬”è®°1ã€ç®€ä»‹eCharts æ˜¯ç™¾åº¦å‡ºå“çš„ä¸€æ¬¾åŸºäº JavaScript çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“ï¼Œæä¾›ç›´è§‚ï¼Œç”ŸåŠ¨ï¼Œå¯äº¤äº’ï¼Œå¯ä¸ªæ€§åŒ–å®šåˆ¶çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€‚æœ€å¼€å§‹æ˜¯ç”±ç™¾åº¦å›¢é˜Ÿå¼€æºçš„ï¼Œåé¢äº2018å¹´äº¤ç”±ApacheåŸºé‡‘ä¼šï¼Œç§°ä¸ºASFå­µåŒ–é¡¹ç›®ã€‚å¹¶äº2021å¹´1æœˆ26æ—¥æ­£å¼æ¯•ä¸šã€‚ 2ã€åœ¨ Vue ä¸­ä½¿ç”¨ é¦–å…ˆä¸‹è½½ eChartsï¼š1npm install echarts --save å…¨å±€å¼•å…¥ eCharts:1import * as echarts from &#x27;echarts&#x27;; æˆ–è€…å¯ä»¥æŒ‰éœ€å¼•å…¥123456789101112131415161718192021222324252627282930// å¼•å…¥ echarts æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—æä¾›äº† echarts ä½¿ç”¨å¿…é¡»è¦çš„æ¥å£ã€‚import * as echarts from &#x27;echarts/core&#x27;;// å¼•å…¥æŸ±çŠ¶å›¾å›¾è¡¨ï¼Œå›¾è¡¨åç¼€éƒ½ä¸º Chartimport &#123; BarChart &#125; from &#x27;echarts/charts&#x27;;// å¼•å…¥æç¤ºæ¡†ï¼Œæ ‡é¢˜ï¼Œç›´è§’åæ ‡ç³»ï¼Œæ•°æ®é›†ï¼Œå†…ç½®æ•°æ®è½¬æ¢å™¨ç»„ä»¶ï¼Œç»„ä»¶åç¼€éƒ½ä¸º Componentimport &#123; TitleComponent, TooltipComponent, GridComponent, DatasetComponent, DatasetComponentOption, TransformComponent&#125; from &#x27;echarts/components&#x27;;// æ ‡ç­¾è‡ªåŠ¨å¸ƒå±€ï¼Œå…¨å±€è¿‡æ¸¡åŠ¨ç”»ç­‰ç‰¹æ€§import &#123; LabelLayout, UniversalTransition &#125; from &#x27;echarts/features&#x27;;// å¼•å…¥ Canvas æ¸²æŸ“å™¨ï¼Œæ³¨æ„å¼•å…¥ CanvasRenderer æˆ–è€… SVGRenderer æ˜¯å¿…é¡»çš„ä¸€æ­¥import &#123; CanvasRenderer &#125; from &#x27;echarts/renderers&#x27;;// æ³¨å†Œå¿…é¡»çš„ç»„ä»¶echarts.use([ TitleComponent, TooltipComponent, GridComponent, DatasetComponent, TransformComponent, BarChart, LabelLayout, UniversalTransition, CanvasRenderer]); 3ã€åŸºæœ¬è¯­æ³•ç»“æ„ åœ¨ä½¿ç”¨ eCharts ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒä¸€ä¸ª DOM å®¹å™¨ï¼Œå®˜æ–¹æ˜¯æ¨èæˆ‘ä»¬ä½¿ç”¨å…·æœ‰å®šä¹‰å¥½çš„é•¿å’Œå®½çš„ä¸€ä¸ªçˆ¶å®¹å™¨ï¼ˆå¯ä»¥æ˜¯ div ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ„å»ºä¸€ä¸ªçˆ¶å®¹å™¨ div æ¥å­˜æ”¾ eCharts å›¾è¡¨ 12&lt;div id=&quot;billreport&quot; :style=&quot;&#123; width: &#x27;95%&#x27;, height: &#x27;500px&#x27; &#125;&quot;&gt;&lt;/div&gt; ç”±äº eCharts åŸºäºjsæ„å»ºçš„ï¼Œæ‰€ä»¥åªè¦ä¼šjsçš„è¯­æ³•ï¼ŒeChartsçš„è¯­æ³•è‡ªç„¶ä¹Ÿä¸åœ¨è¯ä¸‹ã€‚è€Œ eCharts çš„åŸºæœ¬è¯­æ³•ç»“æ„ä¸ºï¼š 123456789101112131415setup()&#123;const data=reactive(&#123; option:&#123; //å›¾è¡¨ä¿¡æ¯ &#125;&#125;)const ech = () =&gt; &#123; //ç»˜åˆ¶å›¾è¡¨çš„æ–¹æ³• &#125;&#125;onBeforeMount(()=&gt;&#123; //åœ¨é¡µé¢æ¸²æŸ“ä¹‹å‰åŠ è½½å›¾è¡¨çš„ä¿¡æ¯&#125;) 4ã€å›¾è¡¨é…ç½®ä¿¡æ¯å›¾è¡¨é…ç½®ä¿¡æ¯ï¼Œå³ option ä¸­çš„å†…å®¹ï¼Œåœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é…ç½®ä¸€ç³»åˆ—çš„ä¿¡æ¯ï¼Œæ­£æ˜¯è¿™äº›ä¿¡æ¯ç”Ÿæˆäº†å¯¹åº”çš„å›¾è¡¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950option:&#123; title:&#123; text: &quot;æ”¶å…¥ä¸æ”¯å‡ºè¶‹åŠ¿å›¾&quot;//å›¾è¡¨çš„æ ‡é¢˜ &#125;, tooltip:&#123;//æç¤ºçš„ä¿¡æ¯ trigger:&#x27;axis&#x27;//è§¦å‘æ–¹å¼ &#125;, legend: &#123;//å›¾ä¾‹ data: [&#123; name: &#x27;æ”¶å…¥&#x27;, // å¼ºåˆ¶è®¾ç½®å›¾å½¢ä¸ºåœ†ã€‚ icon: &#x27;circle&#x27;, // è®¾ç½®æ–‡æœ¬ä¸ºçº¢è‰² textStyle: &#123; color: &#x27;red&#x27; &#125; &#125;, &#123; name: &#x27;æ”¯å‡º&#x27;, // å¼ºåˆ¶è®¾ç½®å›¾å½¢ä¸ºåœ†ã€‚ icon: &#x27;circle&#x27;, // è®¾ç½®æ–‡æœ¬ä¸ºçº¢è‰² textStyle: &#123; color: &#x27;red&#x27; &#125; &#125;]//å›¾ä¾‹çš„æ ‡é¢˜ï¼Œåˆ†åˆ«å¯¹åº” series ä¸­çš„æ•°æ® &#125;ï¼Œ xAxis: &#123;//é…ç½®è¦åœ¨xè½´æ˜¾ç¤ºçš„é¡¹ type: &#x27;category&#x27;,//&#x27;value&#x27; æ•°å€¼è½´ï¼Œé€‚ç”¨äºè¿ç»­æ•°æ®ã€‚ &#x27;category&#x27; ç±»ç›®è½´ï¼Œé€‚ç”¨äºç¦»æ•£çš„ç±»ç›®æ•°æ®ï¼Œä¸ºè¯¥ç±»å‹æ—¶å¿…é¡»é€šè¿‡ data è®¾ç½®ç±»ç›®æ•°æ®ã€‚ &#x27;time&#x27; æ—¶é—´è½´ï¼Œé€‚ç”¨äºè¿ç»­çš„æ—¶åºæ•°æ®ï¼Œä¸æ•°å€¼è½´ç›¸æ¯”æ—¶é—´è½´å¸¦æœ‰æ—¶é—´çš„æ ¼å¼åŒ–ï¼Œåœ¨åˆ»åº¦è®¡ç®—ä¸Šä¹Ÿæœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ä¼šæ ¹æ®è·¨åº¦çš„èŒƒå›´æ¥å†³å®šä½¿ç”¨æœˆï¼Œæ˜ŸæœŸï¼Œæ—¥è¿˜æ˜¯å°æ—¶èŒƒå›´çš„åˆ»åº¦ã€‚ &#x27;log&#x27; å¯¹æ•°è½´ã€‚é€‚ç”¨äºå¯¹æ•°æ•°æ®ã€‚ boundaryGap: false,// åˆ»åº¦ç¦»çºµè½´æœ‰æ— é—´éš™ï¼Œé»˜è®¤trueæœ‰é—´è· data: []//æ¨ªè½´åæ ‡çš„å€¼ &#125;, yAxis: &#123;//é…ç½®yè½´çš„é¡¹ï¼Œé…ç½®ä¸xè½´ç±»ä¼¼ type: &#x27;value&#x27; &#125;, series: [//ç³»åˆ—åˆ—è¡¨,æ˜¾ç¤ºåœ¨å›¾è¡¨ä¸­çš„å†…å®¹ &#123; name: &#x27;æ”¶å…¥&#x27;,//ç³»åˆ—åç§° type: &#x27;line&#x27;,//å›¾è¡¨ç±»å‹ stack: &#x27;æ”¶å…¥&#x27;,//å †å ï¼Œå¦‚æœæœ‰ç›¸åŒåç§°çš„ä¼šå †å  data: [] &#125;, &#123; name: &#x27;æ”¯å‡º&#x27;, type: &#x27;line&#x27;, stack: &#x27;æ”¯å‡º&#x27;, data: [] &#125; ]&#125; å›¾è¡¨ç±»å‹è¡¨ï¼š é…ç½® å›¾è¡¨ç±»å‹ type: â€˜barâ€™ æŸ±çŠ¶/æ¡å½¢å›¾ type: â€˜lineâ€™ æŠ˜çº¿/é¢ç§¯å›¾ type: â€˜pieâ€™ é¥¼å›¾ type: â€˜scatterâ€™ æ•£ç‚¹ï¼ˆæ°”æ³¡ï¼‰å›¾ type: â€˜effectScatterâ€™ å¸¦æœ‰æ¶Ÿæ¼ªç‰¹æ•ˆåŠ¨ç”»çš„æ•£ç‚¹ï¼ˆæ°”æ³¡ï¼‰ type: â€˜radarâ€™ é›·è¾¾å›¾ type: â€˜treeâ€™ æ ‘å‹å›¾ type: â€˜treemapâ€™ æ ‘å‹å›¾ type: â€˜sunburstâ€™ æ—­æ—¥å›¾ type: â€˜boxplotâ€™ ç®±å½¢å›¾ type: â€˜candlestickâ€™ Kçº¿å›¾ type: â€˜heatmapâ€™ çƒ­åŠ›å›¾ type: â€˜mapâ€™ åœ°å›¾ type: â€˜parallelâ€™ å¹³è¡Œåæ ‡ç³»çš„ç³»åˆ— type: â€˜linesâ€™ çº¿å›¾ type: â€˜graphâ€™ å…³ç³»å›¾ type: â€˜sankeyâ€™ æ¡‘åŸºå›¾ type: â€˜funnelâ€™ æ¼æ–—å›¾ type: â€˜gaugeâ€™ ä»ªè¡¨ç›˜ type: â€˜pictorialBarâ€™ è±¡å½¢æŸ±å›¾ type: â€˜themeRiverâ€™ ä¸»é¢˜æ²³æµ type: â€˜customâ€™ è‡ªå®šä¹‰ç³»åˆ— 5ã€x è½´ã€y è½´x è½´å’Œ y è½´éƒ½ç”±è½´çº¿ã€åˆ»åº¦ã€åˆ»åº¦æ ‡ç­¾ã€è½´æ ‡é¢˜å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒäºŒç»´çš„å›¾æ ‡ç»“æ„éƒ½ä¼šæœ‰ x è½´å’Œ y è½´ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œx è½´ä¼šåœ¨å›¾è¡¨çš„ä¸‹æ–¹ï¼Œè€Œ y è½´åœ¨å›¾è¡¨çš„å·¦è¾¹ã€‚è€Œ eCharts ä¹Ÿæä¾›äº†ä¸€äº›ç‰¹å®šçš„åæ ‡è½´çš„è®¾ç½®é€‰é¡¹ï¼Œå¦‚ï¼šè½´çº¿ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ axisLine æ¥å¯¹è½´çº¿è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚è½´çº¿ä¸¤å¤´çš„ç®­å¤´ï¼Œè½´çº¿çš„æ ·å¼ç­‰ç­‰ï¼Œæ¯”å¦‚ï¼š 1234567891011121314151617181920212223option = &#123; xAxis: &#123; axisLine: &#123; show:&#x27;true&#x27; //æ˜¾ç¤ºè½´çº¿ symbol: &#x27;arrow&#x27;, //è½´çº¿ä¸¤è¾¹çš„ç®­å¤´ lineStyle: &#123; //è½´çº¿çš„æ ·å¼ï¼Œæœ‰é¢œè‰²ã€å®½åº¦ã€ç±»å‹ç­‰ç­‰ type: &#x27;dashed&#x27; // ... &#125; &#125; // ... &#125;, yAxis: &#123; axisLine: &#123; symbol: &#x27;arrow&#x27;, lineStyle: &#123; type: &#x27;dashed&#x27; // ... &#125; &#125; &#125; // ...&#125;; è½´çº¿ä¸¤è¾¹çš„ç®­å¤´é€‰é¡¹ï¼š åæ ‡è½´åˆ»åº¦ï¼šECharts æä¾›äº†è½´çº¿ axisTick ç›¸å…³çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼Œä¾‹å¦‚åˆ»åº¦çº¿çš„é•¿åº¦ï¼Œæ ·å¼ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåæ ‡è½´åˆ»åº¦çš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526option = &#123; xAxis: &#123; axisTick: &#123; show:true //å¼€å¯åæ ‡è½´åˆ»åº¦ alignWithLabel:true //ä½¿åˆ»åº¦ä¸æ ‡ç­¾å¯¹å…¶ï¼ˆç±»ç›®è½´ä¸­åœ¨ boundaryGap ä¸º true çš„æ—¶å€™æœ‰æ•ˆï¼‰ inside:true //åˆ»åº¦çº¿æ˜¯å¦æœé‡Œï¼ˆtrueä¸ºæœé‡Œï¼‰ intervalï¼š0 //åæ ‡è½´åˆ»åº¦çš„æ˜¾ç¤ºé—´éš”,å¦‚æœè®¾ç½®ä¸º 1ï¼Œè¡¨ç¤ºã€éš”ä¸€ä¸ªæ ‡ç­¾æ˜¾ç¤ºä¸€ä¸ªæ ‡ç­¾ã€ï¼Œå¦‚æœå€¼ä¸º 2ï¼Œè¡¨ç¤ºéš”ä¸¤ä¸ªæ ‡ç­¾æ˜¾ç¤ºä¸€ä¸ªæ ‡ç­¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚ length: 6,//åˆ»åº¦çº¿çš„é•¿åº¦ lineStyle: &#123; //æ ·å¼è®¾ç½® type: &#x27;dashed&#x27; // ... &#125; &#125; // ... &#125;, yAxis: &#123; axisTick: &#123; length: 6, lineStyle: &#123; type: &#x27;dashed&#x27; // ... &#125; &#125; &#125; // ...&#125;; åˆ»åº¦æ ‡ç­¾ï¼šECharts æä¾›äº†è½´çº¿ axisLabel ç›¸å…³çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸‹é¢çš„æ˜ŸæœŸå°±æ˜¯åˆ»åº¦æ ‡ç­¾ 1234567891011121314151617181920212223option = &#123; xAxis: &#123; axisLabel: &#123; show:true //æ˜¾ç¤ºåˆ»åº¦æ ‡ç­¾ interval:0 //æ˜¾ç¤ºåˆ»åº¦ï¼ŒåŒä¸Š inside:true //æ ‡ç­¾æ˜¯å¦æœé‡Œï¼ˆtrueæœé‡Œï¼‰ rotateï¼š45 // æ ‡ç­¾åç§»çš„è§’åº¦ margin:5 //æ ‡ç­¾ä¸è½´çº¿çš„è·ç¦» formatter: &#x27;&#123;value&#125; kg&#x27;, //åˆ»åº¦æ ‡ç­¾çš„å†…å®¹æ ¼å¼å™¨ï¼Œæ”¯æŒå­—ç¬¦ä¸²æ¨¡æ¿å’Œå›è°ƒå‡½æ•°ä¸¤ç§å½¢å¼ã€‚ align: &#x27;center&#x27; //æ–‡å­—æ°´å¹³å¯¹é½æ–¹å¼ï¼Œé»˜è®¤è‡ªåŠ¨ã€‚å¯é€‰ä¸ºï¼š&#x27;left&#x27;,&#x27;center&#x27;,&#x27;right&#x27; // ... &#125; // ... &#125;, yAxis: &#123; axisLabel: &#123; formatter: &#x27;&#123;value&#125; å…ƒ&#x27;, align: &#x27;center&#x27; // ... &#125; &#125; // ...&#125;; æ ‡ç­¾ä¸­çš„formatterï¼š 123456// ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œæ¨¡æ¿å˜é‡ä¸ºåˆ»åº¦é»˜è®¤æ ‡ç­¾ &#123;value&#125;formatter: &#x27;&#123;value&#125; kg&#x27;// ä½¿ç”¨å‡½æ•°æ¨¡æ¿ï¼Œå‡½æ•°å‚æ•°åˆ†åˆ«ä¸ºåˆ»åº¦æ•°å€¼ï¼ˆç±»ç›®ï¼‰ï¼Œåˆ»åº¦çš„ç´¢å¼•formatter: function (value, index) &#123; return value + &#x27;kg&#x27;;&#125; æ›´å¤šå…³äº formatter çš„å†…å®¹å¯ä»¥å‚è€ƒå®˜æ–¹çš„ API 6ã€ä¸»é¢˜é…ç½®åœ¨eChartsçš„å†…éƒ¨ï¼Œå†…ç½®äº†ä¸¤å¥—ä¸»é¢˜ï¼Œåˆ†åˆ«æ˜¯äº®è‰²ä¸»é¢˜ä»¥åŠæš—è‰²ä¸»é¢˜é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸»é¢˜ 12var chart = echarts.init(dom, &#x27;light&#x27;);var chart = echarts.init(dom, &#x27;dark&#x27;); æˆ–è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡eChartsçš„ä¸»é¢˜ç¼–è¾‘å™¨æ¥åˆ›å»ºè‡ªå·±çš„ä¸»é¢˜ 7ã€æ•°æ®é›†ï¼ˆdatasetï¼‰dataset ç»„ä»¶å¯ä»¥ç”¨äºå•ç‹¬çš„æ•°æ®é›†å£°æ˜ï¼Œä»è€Œæ•°æ®å¯ä»¥å•ç‹¬ç®¡ç†ï¼Œè¢«å¤šä¸ªç»„ä»¶å¤ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åŸºäºæ•°æ®æŒ‡å®šæ•°æ®åˆ°è§†è§‰çš„æ˜ å°„ã€‚ å†™æ³•ä¸€ï¼š 1234567891011dataset: &#123; // æä¾›ä¸€ä»½æ•°æ®ã€‚ //ç¬¬ä¸€è¡Œå¯¹åº”çš„æ˜¯ x è½´ source: [ [&#x27;product&#x27;, &#x27;2015&#x27;, &#x27;2016&#x27;, &#x27;2017&#x27;], [&#x27;Matcha Latte&#x27;, 43.3, 85.8, 93.7], [&#x27;Milk Tea&#x27;, 83.1, 73.4, 55.1], [&#x27;Cheese Cocoa&#x27;, 86.4, 65.2, 82.5], [&#x27;Walnut Brownie&#x27;, 72.4, 53.9, 39.1] ]&#125;, åœ¨ dataset ä¸­ç®¡ç†æ•°æ®ä¹‹åï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨ series å•ç‹¬è¿›è¡Œæ•°æ®çš„å£°æ˜ï¼Œè€Œæ˜¯ç›´æ¥åœ¨ data é™¤è¿›è¡Œè°ƒç”¨ 123456// å£°æ˜å¤šä¸ªæŸ±çŠ¶å›¾ç³»åˆ—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç³»åˆ—ä¼šè‡ªåŠ¨å¯¹åº”åˆ° dataset çš„æ¯ä¸€åˆ—ã€‚series: [ &#123;type: &#x27;bar&#x27;&#125;, &#123;type: &#x27;bar&#x27;&#125;, &#123;type: &#x27;bar&#x27;&#125;] å†™æ³•äºŒï¼š 1234567891011dataset: &#123; // è¿™é‡ŒæŒ‡å®šäº†ç»´åº¦åçš„é¡ºåºï¼Œä»è€Œå¯ä»¥åˆ©ç”¨é»˜è®¤çš„ç»´åº¦åˆ°åæ ‡è½´çš„æ˜ å°„ã€‚ // å¦‚æœä¸æŒ‡å®š dimensionsï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š series.encode å®Œæˆæ˜ å°„ï¼Œå‚è§åæ–‡ã€‚ dimensions: [&#x27;product&#x27;, &#x27;2015&#x27;, &#x27;2016&#x27;, &#x27;2017&#x27;], source: [ &#123;product: &#x27;Matcha Latte&#x27;, &#x27;2015&#x27;: 43.3, &#x27;2016&#x27;: 85.8, &#x27;2017&#x27;: 93.7&#125;, &#123;product: &#x27;Milk Tea&#x27;, &#x27;2015&#x27;: 83.1, &#x27;2016&#x27;: 73.4, &#x27;2017&#x27;: 55.1&#125;, &#123;product: &#x27;Cheese Cocoa&#x27;, &#x27;2015&#x27;: 86.4, &#x27;2016&#x27;: 65.2, &#x27;2017&#x27;: 82.5&#125;, &#123;product: &#x27;Walnut Brownie&#x27;, &#x27;2015&#x27;: 72.4, &#x27;2016&#x27;: 53.9, &#x27;2017&#x27;: 39.1&#125; ]&#125;, 8ã€å›¾ä¾‹å›¾ä¾‹æ˜¯å›¾è¡¨ä¸­å¯¹å†…å®¹åŒºå…ƒç´ çš„æ³¨é‡Šã€ç”¨ä¸åŒå½¢çŠ¶ã€é¢œè‰²ã€æ–‡å­—ç­‰æ¥æ ‡ç¤ºä¸åŒæ•°æ®åˆ—ï¼Œé€šè¿‡ç‚¹å‡»å¯¹åº”æ•°æ®åˆ—çš„æ ‡è®°ï¼Œå¯ä»¥æ˜¾ç¤ºæˆ–éšè—è¯¥æ•°æ®åˆ—ã€‚å›¾ä¾‹è™½ç„¶ä¸æ˜¯å›¾è¡¨ä¸­çš„ä¸»è¦ä¿¡æ¯ã€å´æ˜¯äº†è§£å›¾è¡¨ä¿¡æ¯çš„é’¥åŒ™ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415161718192021option = &#123; legend: &#123; type:&#x27;plain&#x27; //å›¾ä¾‹çš„ç±»å‹å¯é€‰å€¼ï¼š&#x27;scroll&#x27;ï¼šå¯æ»šåŠ¨ç¿»é¡µçš„å›¾ä¾‹ã€‚å½“å›¾ä¾‹æ•°é‡è¾ƒå¤šæ—¶å¯ä»¥ä½¿ç”¨ã€‚ // Try &#x27;horizontal&#x27; orient: &#x27;vertical&#x27;, //å›¾ä¾‹åˆ—è¡¨çš„å¸ƒå±€æœå‘ã€‚å¯é€‰ï¼š&#x27;horizontal&#x27;æ°´å¹³ï¼Œ&#x27;vertical&#x27;å‚ç›´ right: 10, //å›¾ä¾‹ç»„ä»¶ç¦»å®¹å™¨å³ä¾§çš„è·ç¦»ã€‚ top: &#x27;center&#x27; //å›¾ä¾‹ç»„ä»¶ç¦»å®¹å™¨ä¸Šä¾§çš„è·ç¦»ã€‚ &#125;, dataset: &#123; source: [ [&#x27;product&#x27;, &#x27;2015&#x27;, &#x27;2016&#x27;, &#x27;2017&#x27;], [&#x27;Matcha Latte&#x27;, 43.3, 85.8, 93.7], [&#x27;Milk Tea&#x27;, 83.1, 73.4, 55.1], [&#x27;Cheese Cocoa&#x27;, 86.4, 65.2, 82.5], [&#x27;Walnut Brownie&#x27;, 72.4, 53.9, 39.1] ] &#125;, xAxis: &#123; type: &#x27;category&#x27; &#125;, yAxis: &#123;&#125;, series: [&#123; type: &#x27;bar&#x27; &#125;, &#123; type: &#x27;bar&#x27; &#125;, &#123; type: &#x27;bar&#x27; &#125;]&#125;; æ˜¾ç¤ºå†…å®¹å¦‚ä¸‹ï¼šæ›´å¤šå†…å®¹å‚è€ƒå®˜æ–¹ API","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/"},{"name":"eCharts","slug":"å‰ç«¯/eCharts","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/eCharts/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/tags/%E5%89%8D%E7%AB%AF/"},{"name":"eCharts","slug":"eCharts","permalink":"http://cyc0819.top/tags/eCharts/"}]},{"title":"SpringSecurity+JWTå®ç°çš„ç™»å½•è®¤è¯","slug":"2021-11-20-SpringSecurity+JWTå®ç°çš„ç™»å½•è®¤è¯","date":"2021-11-20T01:39:55.000Z","updated":"2021-12-08T09:37:34.904Z","comments":false,"path":"2021/11/20/2021-11-20-SpringSecurity+JWTå®ç°çš„ç™»å½•è®¤è¯/","link":"","permalink":"http://cyc0819.top/2021/11/20/2021-11-20-SpringSecurity+JWT%E5%AE%9E%E7%8E%B0%E7%9A%84%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81/","excerpt":"","text":"SpringSecurity+JWTå®ç°çš„ç™»å½•è®¤è¯1ã€ç®€ä»‹ Spring Securityåœ¨ Web ç¼–ç¨‹å¼€å‘ä¸­ï¼Œç™»å½•å®‰å…¨å¾€å¾€ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œè€Œ Spring Security æ‰€åšå¾—å°±æ˜¯è¿™ä¸ªå·¥ä½œã€‚åœ¨ java é¢†åŸŸï¼Œæˆç†Ÿçš„å®‰å…¨æ¡†æ¶è§£å†³æ–¹æ¡ˆä¸€èˆ¬æœ‰ Apache Shiroã€Spring Security ç­‰ä¸¤ç§æŠ€æœ¯é€‰å‹ã€‚Apache Shiro ç®€å•æ˜“ç”¨ä¹Ÿç®—æ˜¯ä¸€å¤§ä¼˜åŠ¿ï¼Œä½†å…¶åŠŸèƒ½è¿˜æ˜¯è¿œä¸å¦‚ Spring Security å¼ºå¤§ã€‚åè€…å¯ä»¥ä¸ºåº”ç”¨æä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®é™åˆ¶ï¼Œä»–æä¾›äº†ä¸€ç³»åˆ—çš„å¯ä»¥ç”±å¼€å‘è€…ä¸»åŠ¨é…ç½®çš„ bean ï¼Œå¹¶åˆ©ç”¨ Spring IoCå’Œ AOPç­‰åŠŸèƒ½ç‰¹æ€§æ¥ä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†è¯¸å¤šé‡å¤å·¥ä½œã€‚ JWTJWT çš„å…¨ç§°æ˜¯ï¼šJson Web Token ã€‚æ˜¯åœ¨ç½‘è·¯åº”ç”¨ä¸­ä¼ é€’ä¿¡æ¯çš„ä¸€ç§åŸºäº json çš„å¼€å‘æ ‡å‡†ï¼Œå¯ç”¨äºä½œä¸º json å¯¹è±¡åœ¨ä¸åŒç³»ç»Ÿä¹‹é—´è¿›è¡Œå®‰å…¨åœ°ä¿¡æ¯ä¼ è¾“ã€‚ä¸»è¦ä½¿ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚ 2ã€è®¾è®¡ç™»å½•è®¤è¯æ‰€ç”¨çš„è¡¨æœ¬æ¬¡ç™»å½•è®¤è¯éœ€è¦ç”¨åˆ°ä¸‰ä¸ªè¡¨ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·è¡¨ï¼Œèº«ä»½è¡¨ä»¥åŠç”¨æˆ·å’Œèº«ä»½ç»‘å®šçš„è¡¨ã€‚`` 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384SET NAMES utf8mb4;SET FOREIGN_KEY_CHECKS = 0;-- ------------------------------ Table structure for hibernate_sequence-- ----------------------------DROP TABLE IF EXISTS `hibernate_sequence`;CREATE TABLE `hibernate_sequence` ( `next_val` bigint(0) NULL DEFAULT NULL) ENGINE = MyISAM AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Fixed;-- ------------------------------ Records of hibernate_sequence-- ----------------------------INSERT INTO `hibernate_sequence` VALUES (1);INSERT INTO `hibernate_sequence` VALUES (1);-- ------------------------------ Table structure for role-- ----------------------------DROP TABLE IF EXISTS `role`;CREATE TABLE `role` ( `id` bigint(0) NOT NULL, `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of role-- ----------------------------INSERT INTO `role` VALUES (1, &#x27;ROLE_NORMAL&#x27;);INSERT INTO `role` VALUES (2, &#x27;ROLE_ADMIN&#x27;);-- ------------------------------ Table structure for user-- ----------------------------DROP TABLE IF EXISTS `user`;CREATE TABLE `user` ( `id` bigint(0) NOT NULL, `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of user-- ------------------------------ ------------------------------ Table structure for user_roles-- ----------------------------DROP TABLE IF EXISTS `user_roles`;CREATE TABLE `user_roles` ( `user_id` bigint(0) NULL DEFAULT NULL, `roles_id` bigint(0) NULL DEFAULT NULL, INDEX `FKj9553ass9uctjrmh0gkqsmv0d`(`roles_id`) USING BTREE, INDEX `FK55itppkw3i07do3h7qoclqd4k`(`user_id`) USING BTREE, CONSTRAINT `FK55itppkw3i07do3h7qoclqd4k` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT `FKj9553ass9uctjrmh0gkqsmv0d` FOREIGN KEY (`roles_id`) REFERENCES `role` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of user_roles-- ----------------------------INSERT INTO `user_roles` VALUES (1, 2);INSERT INTO `user_roles` VALUES (1, 1);-- ------------------------------ Table structure for users-- ----------------------------DROP TABLE IF EXISTS `users`;CREATE TABLE `users` ( `id` bigint(0) NOT NULL, `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;-- ------------------------------ Records of users-- ----------------------------INSERT INTO `users` VALUES (1, &#x27;chenyicai&#x27;, &#x27;$2a$10$hZG8XjmuAcuY.izAj0D7wuQIvPDdwdz.y4KcbGPI18Mri1hx1FWA6&#x27;);SET FOREIGN_KEY_CHECKS = 1; 3ã€åˆ›å»ºæ–°å·¥ç¨‹å¹¶å¯¼å…¥ä¾èµ–åŠå®ä½“ç±» åœ¨åˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ä¹‹åæˆ‘ä»¬éœ€è¦å¼•å…¥Securityå’ŒJWTå¿…é¡»çš„ä¾èµ– 12345678910&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt; &lt;artifactId&gt;jjwt&lt;/artifactId&gt; &lt;version&gt;0.9.0&lt;/version&gt;&lt;/dependency&gt; åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“ä¿¡æ¯ 123456789101112131415161718192021222324spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/jwtdemo?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true username: chenyicai password: cyc1234 ackson: serialization: indent_output: trueserver: port: 8086#æ—¥å¿—çº§åˆ«ï¼ˆä¸€èˆ¬è®¾ç½®ä¸ºINFOï¼‰logging: level: cn: edu: guet: mapper: debug org: springframework: security: infomybatis: type-aliases-package: cn.edu.guet.entity mapper-locations: classpath:mapper/*.xml åˆ›å»ºç”¨æˆ·ä»¥åŠèº«ä»½å®ä½“ç±» Usersç±»ï¼šï¼ˆçœç•¥ getset æ–¹æ³•ï¼‰ æ­¤å¤„æ‰€åˆ›å»ºçš„ User ç±»ç»§æ‰¿äº† Spring Security çš„ UserDetails æ¥å£ï¼Œä»è€Œæˆä¸ºäº†ä¸€ä¸ªç¬¦åˆ Security å®‰å…¨çš„ç”¨æˆ·ï¼Œå³é€šè¿‡ç»§æ‰¿ UserDetailsï¼Œå³å¯å®ç° Security ä¸­ç›¸å…³çš„å®‰å…¨åŠŸèƒ½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public class User implements UserDetails &#123; private Long id; private String username; private String password; private List&lt;Role&gt; roles; @Override public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123; List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); for (Role role : roles) &#123; authorities.add( new SimpleGrantedAuthority( role.getName() ) ); &#125; return authorities; &#125; @Override public String getUsername() &#123; return username; &#125; @Override public String getPassword() &#123; return password; &#125; @Override public boolean isAccountNonExpired() &#123; return true; &#125; @Override public boolean isAccountNonLocked() &#123; return true; &#125; @Override public boolean isCredentialsNonExpired() &#123; return true; &#125; @Override public boolean isEnabled() &#123; return true; &#125;&#125; Roleç±»ï¼šï¼ˆçœç•¥ getset æ–¹æ³•ï¼‰ 1234567public class Role &#123; private Long id; private String name;&#125; 4ã€JWTå·¥å…·ç±»è¯¥å·¥å…·ç±»ä¸»è¦ç”¨äºå¯¹ JWT Token è¿›è¡Œå„é¡¹æ“ä½œï¼Œæ¯”å¦‚ç”ŸæˆTokenã€éªŒè¯Tokenã€åˆ·æ–°Token ç­‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374@Componentpublic class JwtTokenUtils implements Serializable &#123; private static final long serialVersionUID = -5625635588908941275L; private static final String CLAIM_KEY_USERNAME = &quot;sub&quot;; private static final String CLAIM_KEY_CREATED = &quot;created&quot;; private static final String CLAIM_KEY_AUTHORITIES=&quot;authorities&quot;; // ç”Ÿæˆtoken public String generateToken(UserDetails userDetails) &#123; Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;(); claims.put( CLAIM_KEY_USERNAME, userDetails.getUsername()); claims.put(CLAIM_KEY_CREATED, new Date()); return generateToken(claims); &#125; // éªŒè¯token public boolean validateToken(String token, UserDetails userDetails) &#123; String username = getUserNameFromToken(token); return !isTokenExpired(token); &#125; // åˆ·æ–°token public String refreshToken(String token)&#123; Claims claims = getClaimsFromToken(token); claims.put(CLAIM_KEY_CREATED,new Date()); return generateToken(claims); &#125; // éªŒè¯tokenæ˜¯å¦å¤±æ•ˆ public boolean isTokenExpired(String token)&#123; Date expireDate = getExpiredDateFromToken(token); return expireDate.before(new Date()); &#125; // ä»tokenä¸­è·å–è¿‡æœŸæ—¶é—´ public Date getExpiredDateFromToken(String token) &#123; Claims claims = getClaimsFromToken(token); return claims.getExpiration(); &#125; // ä»tokenä¸­è·å–ç”¨æˆ·å public String getUserNameFromToken(String token)&#123; String username; try&#123; Claims claims = getClaimsFromToken(token); username = claims.getSubject(); &#125; catch (Exception e) &#123; username = null; &#125; return username; &#125; // ä»tokenä¸­è·å–è·è½½ private Claims getClaimsFromToken(String token)&#123; Claims claims = null; try &#123; claims = Jwts.parser() .setSigningKey(Const.SECRET) .parseClaimsJws(token) .getBody(); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; return claims; &#125; // ç”Ÿæˆè¿‡æœŸæ—¶é—´ private Date generateExpirationDate() &#123; return new Date(System.currentTimeMillis()+Const.EXPIRATION_TIME*1000); &#125; // æ ¹æ®è·è½½ç”Ÿæˆtoken String generateToken(Map&lt;String, Object&gt; claims) &#123; return Jwts.builder() .setClaims(claims) .setExpiration(generateExpirationDate()) .signWith(SignatureAlgorithm.HS512, Const.SECRET ) .compact(); &#125;&#125; è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå¸¸é‡ç±»ï¼Œå­˜å‚¨äº†JWTçš„ä¸€äº›å¸¸é‡ä¿¡æ¯ 123456789101112public class Const &#123; // 5å¤©(ä»¥æ¯«ç§’msè®¡) public static final long EXPIRATION_TIME = 432_000_000; // JWTå¯†ç  public static final String SECRET = &quot;CodeSheepSecret&quot;; // Tokenå‰ç¼€ public static final String TOKEN_PREFIX = &quot;Bearer&quot;; // å­˜æ”¾Tokençš„Header Key public static final String HEADER_STRING = &quot;Authorization&quot;;&#125; 5ã€Tokenè¿‡æ»¤å™¨ç”¨äºæ¯æ¬¡å¤–éƒ¨å¯¹æ¥å£è¯·æ±‚æ—¶çš„Tokenå¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738394041public class JwtFilter extends OncePerRequestFilter &#123; @Autowired private UserDetailsService userDetailsService; @Autowired private JwtTokenUtils jwtTokenUtil; @Override protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException &#123; // ç¡®è®¤æ˜¯å¦èƒ½æ ¹æ®keyæ‹¿åˆ°value String authHeader = httpServletRequest.getHeader( Const.HEADER_STRING ); if (authHeader == null) &#123; authHeader =Const.TOKEN_PREFIX+&quot; &quot;+httpServletRequest.getHeader(&quot;token&quot;); &#125; // åˆ¤æ–­ç™»å½•ç”¨æˆ·çš„tokenä¸ä¸ºç©ºå’Œæ˜¯Bearerå¼€å¤´çš„ if (authHeader != null &amp;&amp; authHeader.startsWith( Const.TOKEN_PREFIX )) &#123; // å–åˆ°token final String authToken = authHeader.substring( Const.TOKEN_PREFIX.length() ); // ä»ç”¨æˆ·è¯·æ±‚æºå¸¦çš„tokenè·å–ç”¨æˆ·åï¼Œèƒ½å–åˆ°è¯æ˜tokené™¤äº†æ—¶é—´ä»¥å¤–éƒ½åˆæ³•äº† String username = jwtTokenUtil.getUserNameFromToken(authToken); System.out.println(username); // token å­˜åœ¨ç”¨æˆ·åä½†æ²¡æœ‰è®¤è¯çš„ if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) &#123; UserDetails userDetails = this.userDetailsService.loadUserByUsername(username); // æ ¹æ®userDetailséªŒè¯äº†tokenæ˜¯å¦æœ‰æ•ˆï¼ˆéªŒè¯æ—¶é—´æ˜¯å¦è¿‡æœŸå’Œå½“å‰ç”¨æˆ·åæ˜¯å¦åŒ¹é…ï¼‰ if (jwtTokenUtil.validateToken(authToken, userDetails)) &#123; // æˆ‘ä»¬çš„tokenï¼Œæ¡†æ¶æ˜¯ä¸è®¤è¯†çš„ï¼Œtokenæœ‰æ•ˆå°±è½¬åŒ–æ„å»º UsernamePasswordAuthenticationTokenè¡¨ç¤ºè®¤è¯é€šè¿‡å’Œè¿›è¡Œç›¸å…³æˆæƒ UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken( userDetails, null, userDetails.getAuthorities()); authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails( httpServletRequest)); // è®¾ç½®äº†è®¤è¯ä¸»ä½“ï¼Œåˆ°UsernamePasswordAuthenticationFilterå°±ä¸ä¼šæ‹¦æˆªï¼Œå› ä¸ºä½ åº”è¯¥å¸¦æœ‰äº†å®ƒçš„token SecurityContextHolder.getContext().setAuthentication(authentication); &#125; &#125; &#125; // ç»§ç»­æ‰§è¡Œå…¶ä»–è¿‡æ»¤å™¨ filterChain.doFilter(httpServletRequest, httpServletResponse); &#125;&#125; 6ã€Serviceå±‚ä¸šåŠ¡æ“ä½œä¸»è¦æ˜¯ç™»å½•ä»¥åŠæ³¨å†Œçš„ä¸šåŠ¡ é¦–å…ˆæ˜¯AuthServiceæ¥å£ï¼š 1234public interface AuthService &#123; User register( User userToAdd ); String login( String username, String password );&#125; AuthServiceImplå®ç°ç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839@Servicepublic class AuthServiceImpl implements AuthService &#123; @Autowired private AuthenticationManager authenticationManager; @Autowired private UserDetailsService userDetailsService; @Autowired private JwtTokenUtil jwtTokenUtil; @Autowired private UserRepository userRepository; // ç™»å½• @Override public String login( String username, String password ) &#123; UsernamePasswordAuthenticationToken upToken = new UsernamePasswordAuthenticationToken( username, password ); final Authentication authentication = authenticationManager.authenticate(upToken); SecurityContextHolder.getContext().setAuthentication(authentication); final UserDetails userDetails = userDetailsService.loadUserByUsername( username ); final String token = jwtTokenUtil.generateToken(userDetails); return token; &#125; // æ³¨å†Œ @Override public User register( User userToAdd ) &#123; final String username = userToAdd.getUsername(); if( userRepository.findByUsername(username)!=null ) &#123; return null; &#125; BCryptPasswordEncoder encoder = new BCryptPasswordEncoder(); final String rawPassword = userToAdd.getPassword(); userToAdd.setPassword( encoder.encode(rawPassword) ); return userRepository.save(userToAdd); &#125;&#125; ç„¶åæ˜¯ UserService å®ç°ç±»ï¼Œå®ƒå®ç°äº† UserDetailsServiceï¼Œå¯ç”¨äºåœ¨ç™»å½•è®¤è¯æ—¶æ£€éªŒç”¨æˆ·çš„èº«ä»½ 123456789101112131415161718192021@Servicepublic class UserService implements UserDetailsService &#123; @Autowired UserMapper userMapper; @Override public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException &#123; User user = userMapper.findByUsername(s); List&lt;Role&gt; roleList =userMapper.findRoleByUsername(s); user.setRoles(roleList); System.out.println(user.getId()); System.out.println(user.getUsername()); System.out.println(user.getPassword()); System.out.println(user.getAuthorities()); System.out.println(user.getRoles()); if (user == null) &#123; throw new UsernameNotFoundException(&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;); &#125; return user; &#125;&#125; 7ã€Spring Securityé…ç½®ç±»ç¼–å†™è¿™æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹ï¼Œè¿™é‡Œå†³å®šäº†æ‹¦æˆªçš„é¡µé¢ä»¥åŠå…¶ä»–çš„ä¸€äº›æ“ä½œã€‚è¿™æ˜¯ä¸€ä¸ªé«˜åº¦ç»¼åˆçš„é…ç½®ç±»ï¼Œä¸»è¦æ˜¯é€šè¿‡é‡å†™ WebSecurityConfigurerAdapter çš„éƒ¨åˆ† configure é…ç½®ï¼Œæ¥å®ç°ç”¨æˆ·è‡ªå®šä¹‰çš„éƒ¨åˆ†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142@Configuration@EnableWebSecurity@EnableGlobalMethodSecurity(prePostEnabled=true)public class WebSecurityConfig extends WebSecurityConfigurerAdapter &#123; @Autowired private UserService userService; @Bean public JwtFilter authenticationTokenFilterBean() throws Exception &#123; return new JwtFilter(); &#125; @Bean public AuthenticationManager authenticationManagerBean() throws Exception &#123; return super.authenticationManagerBean(); &#125; @Override protected void configure( AuthenticationManagerBuilder auth ) throws Exception &#123; auth.userDetailsService( userService ).passwordEncoder( new BCryptPasswordEncoder() ); &#125; @Override protected void configure( HttpSecurity httpSecurity ) throws Exception &#123; httpSecurity.csrf().disable() .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and() .authorizeRequests() .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll() // OPTIONSè¯·æ±‚å…¨éƒ¨æ”¾è¡Œ .antMatchers(HttpMethod.POST, &quot;/authentication/**&quot;).permitAll() //ç™»å½•å’Œæ³¨å†Œçš„æ¥å£æ”¾è¡Œï¼Œå…¶ä»–æ¥å£å…¨éƒ¨æ¥å—éªŒè¯ .antMatchers(HttpMethod.POST).authenticated() .antMatchers(HttpMethod.PUT).authenticated() .antMatchers(HttpMethod.DELETE).authenticated() .antMatchers(HttpMethod.GET).authenticated(); // ä½¿ç”¨å‰æ–‡è‡ªå®šä¹‰çš„ Tokenè¿‡æ»¤å™¨ httpSecurity .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class); httpSecurity.headers().cacheControl(); &#125;&#125; 8ã€æ¥ä¸‹æ¥ç¼–å†™Controllerç±»è¿›è¡Œæµ‹è¯•é¦–å…ˆæ˜¯ç™»é™†æ³¨å†Œçš„ç±»ï¼š 12345678910111213141516171819@RestControllerpublic class JwtAuthController &#123; @Autowired private AuthService authService; // ç™»å½• @RequestMapping(value = &quot;/authentication/login&quot;, method = RequestMethod.POST) public String createToken( String username,String password ) throws AuthenticationException &#123; return authService.login( username, password ); &#125; // æ³¨å†Œ @RequestMapping(value = &quot;/authentication/register&quot;, method = RequestMethod.POST) public User register( @RequestBody User addedUser ) throws AuthenticationException &#123; return authService.register(addedUser); &#125;&#125; ç„¶åæ˜¯æµ‹è¯•æƒé™çš„ç±»ï¼š 1234567891011121314151617@RestControllerpublic class TestController &#123; // æµ‹è¯•æ™®é€šæƒé™ @PreAuthorize(&quot;hasAuthority(&#x27;ROLE_NORMAL&#x27;)&quot;) @RequestMapping( value=&quot;/normal/test&quot;, method = RequestMethod.GET ) public String test1() &#123; return &quot;ROLE_NORMAL /normal/testæ¥å£è°ƒç”¨æˆåŠŸï¼&quot;; &#125; // æµ‹è¯•ç®¡ç†å‘˜æƒé™ @PreAuthorize(&quot;hasAuthority(&#x27;ROLE_ADMIN&#x27;)&quot;) @RequestMapping( value = &quot;/admin/test&quot;, method = RequestMethod.GET ) public String test2() &#123; return &quot;ROLE_ADMIN /admin/testæ¥å£è°ƒç”¨æˆåŠŸï¼&quot;; &#125;&#125; 9ã€ç°åœ¨æˆ‘ä»¬è¿›è¡Œæµ‹è¯• é¦–å…ˆæµ‹è¯•èƒ½å¦æ­£å¸¸ç™»å½•å¹¶è·å–åˆ°Tokenå¯ä»¥çœ‹åˆ°åœ¨è´¦å·å¯†ç æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œèƒ½è¿”å›ä¸€ä¸ªTokenï¼Œæ¥ä¸‹æ¥åªè¦è®¿é—®ç½‘é¡µæ—¶å¸¦ä¸Šè¿™ä¸ªTokenï¼Œå°±å¯ä»¥é¡ºåˆ©è¿›è¡Œè®¿é—® æ¥ä¸‹æ¥æµ‹è¯•èƒ½å¦æ­£å¸¸è®¿é—®ç½‘é¡µé¦–å…ˆæ˜¯ä¸å¸¦Tokençš„æƒ…å†µï¼šå¾ˆæ˜æ˜¾ï¼Œè¢«æ‹’ç»è®¿é—®äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æºå¸¦Tokençš„æƒ…å†µï¼šå¯ä»¥æˆåŠŸè®¿é—®ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringSecurity","slug":"java/SpringSecurity","permalink":"http://cyc0819.top/categories/java/SpringSecurity/"},{"name":"JWT","slug":"java/JWT","permalink":"http://cyc0819.top/categories/java/JWT/"}],"tags":[{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"http://cyc0819.top/tags/SpringSecurity/"},{"name":"JWT","slug":"JWT","permalink":"http://cyc0819.top/tags/JWT/"}]},{"title":"æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹ jQueryå—","slug":"2021-11-17-æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹ jQueryå—","date":"2021-11-17T15:27:41.000Z","updated":"2021-12-08T09:38:56.041Z","comments":false,"path":"2021/11/17/2021-11-17-æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹ jQueryå—/","link":"","permalink":"http://cyc0819.top/2021/11/17/2021-11-17-%E6%88%91%E4%BB%AC%E8%BF%98%E6%9C%89%E5%BF%85%E8%A6%81%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0jQuery%E5%90%97/","excerpt":"","text":"æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹  jQuery å—è¡¨è¾¾æƒ³æ³•å‰å‡ å¤©åœ¨æŸä¸ªè§†é¢‘å¹³å°çœ‹åˆ°ä¸€ä¸ªåšä¸»çš„è§†é¢‘ï¼Œè¯¥åšä¸»å¯¹äºã€ æˆ‘ä»¬è¿˜æœ‰å¿…è¦æ·±å…¥å­¦ä¹  jQuery å—ï¼Ÿã€è¿™ä¸ªé—®é¢˜åšå‡ºäº†ä¸€ä¸ªå¾ˆè‚¯å®šçš„ç­”æ¡ˆï¼šå°±æ˜¯æ²¡æœ‰å¿…è¦ã€‚ è€Œä»–å¯¹äºè¿™ä¸ªç»“è®ºå¹¶ä¹Ÿä¸æ˜¯ç©ºç©´æ¥é£ï¼ŒåŒæ ·æ˜¯åšå‡ºäº†ä¸€ç³»åˆ—çš„è§£é‡Šã€‚æ¯”å¦‚è¯´ï¼šjQuery å·²ç»è¿‡æ—¶äº†ã€Vue.jsä»¥åŠReact.jsè¿™æ ·çš„å‰ç«¯æ¡†æ¶èƒ½æ›´å¥½åœ°å®ç°jQueryæ‰€èƒ½å®ç°çš„åŠŸèƒ½ç­‰ç­‰ã€‚ å½“ç„¶ï¼Œä½œä¸ºè¯¥åšä¸»çš„ä¸ªäººæƒ³æ³•ï¼Œè¯„è®ºåŒºè‡ªç„¶æ˜¯ç‚¸å¼€äº†é”…ï¼Œæœ‰äººèµåŒè¯¥åšä¸»çš„è¨€è®ºï¼Œè€Œä¹Ÿæœ‰äººå¯¹è¯¥åšä¸»çš„è¨€è®ºè¡¨ç¤ºä¸æ•¢è‹ŸåŒã€‚è¿™é‡Œæˆ‘è¯´è¯´æˆ‘ä¸ªäººçš„æƒ³æ³•ï¼š æˆ‘è®¤ä¸º jQuery è™½ç„¶æ˜¯ä¸€ä¸ªå¤šå¹´ä»¥å‰çš„æŠ€æœ¯ï¼Œä½†æ˜¯ä»–ä½œä¸ºå­¦ä¹ è·¯ä¸Šæ‰€å¿…é¡»ç»å†çš„ä¸€æ®µç»å†ï¼Œæˆ‘è®¤ä¸ºè¿˜æ˜¯æœ‰å¿…è¦è¿›è¡Œå­¦ä¹ çš„ï¼Œä½†æ˜¯ä¹Ÿä¸ç”¨è¿‡åº¦æ·±å…¥ï¼Œåœ¨è¯¥é˜¶æ®µèŠ±è´¹è¿‡å¤šçš„æ—¶é—´ã€‚ jQuery çš„å¼€å‘æ¨¡å¼å’Œ Vue.js ç­‰æ¡†æ¶çš„å¼€å‘æ¨¡å¼æ˜¯ä¸åŒçš„ä¸¤ç§å¼€å‘æ¨¡å¼ï¼Œåªæœ‰ä½“ä¼šåˆ°ä¸¤ç§å¼€å‘æ¨¡å¼çš„ä¸åŒä¹‹å¤„ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´æ·±å…¥åœ°ç†è§£å¦‚ä»Šæ‰€æµè¡Œçš„å‰ç«¯æ¡†æ¶æ‰€æµè¡Œçš„åŸå› ï¼Œä»¥åŠ jQuery è½åçš„åŸå› ç­‰ç­‰ã€‚åŒæ ·åœ¨è‹¥å¹²å¹´ä»¥åï¼Œå¯èƒ½ä¼šæœ‰æ›´å¤šæ–°çš„å‰ç«¯æ¡†æ¶çš„å‡ºç°ï¼Œæ›¿ä»£ç°åœ¨åœ° vue.jsã€react.js ç­‰ç­‰ï¼Œåˆ°æ—¶å€™ï¼Œç»å†è¿‡ vue.js æ—¶ä»£çš„æˆ‘ä»¬ï¼Œæ˜¯ä¸æ˜¯åˆèƒ½ä»ä¸€ç§æ–°çš„å±‚é¢çœ‹åˆ°å¤šç§å¼€å‘æ¨¡å¼åœ°åŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬æ‰€äº†è§£åˆ°çš„æ˜¯ï¼šä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å­ï¼Ÿè€Œä¸æ˜¯æœ¬æ¥å°±æ˜¯è¿™æ ·å­ã€‚æ°¸è¿œä¿æŒå¥½å¥‡ä¸æ¢ç´¢ï¼Œå¯¹ä¸€ä¸ªå¼€å‘è€…æ¥è¯´æ˜¯æå…¶é‡è¦çš„ã€‚ è€Œå¯¹äº js ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬åº”è¯¥é‡ç‚¹å¯¹åŸç”Ÿçš„jsè¿›è¡Œå­¦ä¹ ï¼Œæ¯•ç«Ÿ jQueryï¼Œvueï¼Œreact è¿™äº›æ¡†æ¶éƒ½æ˜¯åœ¨jsçš„åŸºç¡€ä¸Šè¿›è¡Œå°è£…çš„ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›æ¡†æ¶çš„æ—¶å€™ï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜æ˜¯åœ¨ä½¿ç”¨ js ï¼Œä½†æ˜¯æ–¹ä¾¿å°±æ–¹ä¾¿åœ¨è¿™äº›æ¡†æ¶çš„ä¸€äº›ä¼˜ç§€çš„å°è£…ç±»å¸®æˆ‘ä»¬å®ç°äº† js ä¸­å¾ˆå¤šå¤æ‚æ“ä½œï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§æ¡†æ¶æ‰€è§„å®šçš„è¯­æ³•è¿›è¡Œç¼–å†™ï¼Œå°±èƒ½å¾ˆæ–¹ä¾¿çš„å®ç° js ä¸­ä¸€äº›å¤æ‚çš„æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ¡†æ¶æŠ€æœ¯èƒ½å¤Ÿå¦‚æ­¤æµè¡Œçš„åŸå› ä¹‹ä¸€ã€‚ è€Œæˆ‘ä»¬ä¸èƒ½åªçŸ¥é“ä½¿ç”¨ï¼Œè€Œä¸çŸ¥åŸç†ï¼Œè¿™æ ·å­æ˜¯èµ°ä¸è¿œçš„ï¼Œä½†æ˜¯è¿™å¹¶ä¸è¡¨ç¤ºæˆ‘ä»¬å°±åº”è¯¥å»ç”Ÿå•ƒè¿™äº›æ¡†æ¶çš„æºç ï¼Œè€Œæ˜¯è¯´æˆ‘ä»¬åº”è¯¥å­¦å¥½ js çš„è¯­æ³•ï¼Œè¿™æ ·å­åœ¨æˆ‘ä»¬ä½¿ç”¨æ—¶ä¹Ÿèƒ½å¾ˆå¥½åœ°ç†è§£æ¡†æ¶çš„åŸç†ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œé€æ­¥åœ°ç†è§£æ¡†æ¶ã€‚ jQuery æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼ŸæŠ›å¼€ç°åœ¨æµè¡Œçš„ vue ç­‰å‰ç«¯æ¡†æ¶ä¸è°ˆï¼Œæˆ‘ä»¬æ¥è¯´è¯´ jQuery æ—¶ä»£ï¼Œä»–éƒ½æœ‰å“ªäº›æœ‰ä¼˜ç‚¹ã€‚ èƒ½å¾ˆå¥½çš„æ“ä½œ DOMæœ‰è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘è¦ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„æ ·å¼ï¼Œæˆ‘ç”¨åŸç”Ÿçš„jsæ˜¯è¿™æ ·å­å®Œæˆåœ°ï¼š 12var dom=document.getElementById(&#x27;test&#x27;)dom.style.color=&#x27;red&#x27; è€Œæˆ‘ç”¨ jQuery æ¥æ›¿ä»£ä¸Šé¢åœ°ä»£ç  1$(&#x27;#test&#x27;).css(&#x27;color&#x27;,&#x27;red&#x27;); ç›¸å¯¹äºåŸç”Ÿçš„ js æ¥è¯´ï¼Œæˆ‘ä»¬çš„ä»£ç ç²¾ç®€äº†è®¸å¤šï¼Œåœ¨ jQuery ä¸­æˆ‘ä»¬ç”¨$æ¥æ›¿ä»£äº†åŸç”Ÿ js ä¸­çš„document.getElementByIdè¿™ä¸€è¡Œè¯­å¥ï¼Œæ‰€ä»¥ä»£ç ç²¾ç®€äº†è®¸å¤šã€‚ æå…¶æ–¹ä¾¿åœ° ajax æ“ä½œåœ¨jQueryä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨ajaxè®¿é—®åå°çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å­å®ç°ï¼š 123456$.ajax(&#123; url:&#x27;/index&#x27;, success:function(res)&#123; console.log(&quot;è¯·æ±‚æˆåŠŸ&quot;) &#125;&#125;) è€Œå¦‚æœæˆ‘ä»¬è¦åœ¨åŸç”Ÿçš„jsä¸­ä½¿ç”¨ ajax ï¼Œé‚£åˆ«ææœ‰å¤šå¤æ‚äº†ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—åˆ›å»ºä¸€ä¸ªå¼‚æ­¥å¯¹è±¡ï¼Œç„¶åå†è®¾ç½®è¯·æ±‚çš„ url ä»¥åŠå‚æ•°ï¼Œç„¶åå‘é€è¯·æ±‚ï¼Œæœ€åæˆ‘ä»¬éœ€è¦å°†å…¶æ³¨å†Œåˆ°ä¸€ä¸ªäº‹ä»¶ä¸Šï¼Œæ‰èƒ½è¿›è¡Œè®¿é—®ã€‚è™½ç„¶æˆ‘ä»¬ä¹Ÿèƒ½å°†å…¶å°è£…æˆä¸€ä¸ªå¯é‡å¤ä½¿ç”¨çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äº jQuery æ¥è¯´ï¼Œä»–è¿˜æ˜¯å¤ªéº»çƒ¦äº†ã€‚ æ›´æ–¹ä¾¿çš„é¡µé¢åŠ¨æ•ˆé€šå¸¸æˆ‘ä»¬çš„ç•Œé¢éœ€è¦ç”¨åˆ°ä¸€äº›å¾ˆæœ‰è¶£çš„ç”»é¢ï¼Œæˆ‘ä»¬åœ¨ jQuery ä¸­å¯ä»¥è¿™æ ·å­å®ç°ï¼š 1$(&quot;#test&quot;).animate(&#123;left:&#x27;100px&#x27;&#125;) ä»¥ä¸Šçš„è¿™äº›æ“ä½œï¼Œè¯´å®è¯åœ¨ js ä¸­æˆ‘ä»¬éƒ½å¯ä»¥å®ç°ï¼Œè€Œ jQuery ä½œä¸ºä¸€ä¸ªå¾ˆå¥½çš„ js æ¡†æ¶ï¼Œä»–æ‰€å°è£…çš„å¾ˆå¤šå‡½æ•°å¯ä»¥å¤§å¤§æ–¹ä¾¿æˆ‘ä»¬çš„æ“ä½œï¼Œæ‰€ä»¥è¿™ä¹Ÿå°±æ˜¯ jQuery ä¸ºä»€ä¹ˆä¼šæµè¡Œçš„åŸå› ä¹‹ä¸€ã€‚æˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½å°è£…ä¸€ä¸ªè¿™æ ·çš„ä»£ç åº“ï¼Œåªæ˜¯æˆ‘ä»¬å¯èƒ½ä¸èƒ½åšåˆ°è¿™ä¹ˆä¼˜ç§€ï¼Œä¹Ÿä¸ä¸€å®šæœ‰æ—¶é—´å’Œç²¾åŠ›æ¥åšè¿™æ ·çš„å·¥ä½œã€‚ MVVM æ¡†æ¶æ˜¯æ€ä¹ˆæ›¿ä»£ jQuery çš„ï¼Ÿç°åœ¨çš„ MVVM æ¡†æ¶ï¼Œä»–ä»¬éƒ½å¼•å…¥äº†å‡ ä¸ªæ–°çš„æ¦‚å¿µï¼šæ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€‚å¹¶é‡‡ç”¨äº†è™šæ‹Ÿ DOM çš„æ–¹å¼æ¥æ›¿ä»£åŸæ¥çš„ DOM æ“ä½œï¼Œåœ¨è¿™äº›æ¡†æ¶ä¸­ï¼Œæ•°æ®å’Œè§†å›¾å®ç°äº†åˆ†ç¦»ï¼Œå¯¹æ•°æ®çš„æ“ä½œä¸åœ¨éœ€è¦å¼•ç”¨å“åº”çš„ DOM å¯¹è±¡ï¼Œè¾¾åˆ°äº†ç¼–ç¨‹ä¸–ç•Œä¸­ä¸€ä¸ªå…±åŒçš„ç›®æ ‡â€”â€”è§£è€¦ã€‚ é’ˆå¯¹ DOM æ“ä½œåœ¨ MVVM æ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬çœ‹ä¸åˆ° DOM æ“ä½œçš„å½±å­ï¼Œæ˜¯å› ä¸ºä»–ä»¬é‡‡ç”¨äº†ä¸€ç§ç»‘å®šå…ƒç´ æ¸²æŸ“çš„æ–¹å¼ï¼Œæ¥ç»‘å®šæˆ‘ä»¬çš„è§†å›¾ä»¥åŠæ•°æ®ã€‚æ¯”å¦‚è¯´ vue æ¡†æ¶ä¸­çš„v-modelã€‚ä½†æ˜¯ DOM æ“ä½œä¸å¯èƒ½å®Œå…¨ä¸éœ€è¦ï¼ŒæŸäº›ç‰¹æ®Šæƒ…å†µè¿˜æ˜¯ä¼šç”¨åˆ°ã€‚ é’ˆå¯¹ ajax æ“ä½œåœ¨ ajax æ“ä½œæ–¹é¢ï¼ŒåŸºæœ¬ä¸Šæ˜¯è¢« axios è¿™æ ·çš„åº“ç»™æ›¿ä»£äº†ï¼Œè€Œä¸”æ‰€å®ç°çš„åŠŸèƒ½ä¸ ajax éƒ½å·®ä¸å¤šï¼Œè€Œä¸”èƒ½æ›´å¥½åœ°å¥‘åˆè¿™äº›æ¡†æ¶ã€‚ é’ˆå¯¹ç•Œé¢åŠ¨æ•ˆCSS 3å·²ç»èƒ½å¾ˆå¥½åœ°å®ç°ç•Œé¢åŠ¨æ€åœ°æ•ˆæœã€‚è€Œä¸”æœ‰å¾ˆå¤šä¼˜ç§€çš„åŠ¨æ•ˆåº“ï¼Œèƒ½å®Œç¾é€‚é…ç°åœ¨æµè¡Œçš„æ¡†æ¶ï¼Œå¹¶èƒ½æ›´å¥½çš„å®ç°å¾ˆå¤šå¥½çœ‹çš„åŠ¨æ•ˆã€‚ æ„Ÿæƒ³å¯èƒ½åœ¨è‹¥å¹²å¹´ååœ°æŸä¸€å¤©ï¼Œåˆä¼šå‡ºç°æ›´æ–°çš„æ¯”ç°åœ¨æ›´å¥½çš„æ¡†æ¶ï¼Œé‚£æ—¶å€™åˆä¼šæ›´åŠ æ–¹ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ã€‚è€Œæˆ‘ä»¬åŒæ ·è¦é¡ºåº”æ—¶ä»£åœ°æ½®æµï¼Œå»å­¦ä¹ è¿™äº›æ–°çš„æŠ€æœ¯ï¼Œä»å…¥äº†ç¼–ç¨‹è¿™ä¸€è¡Œå¼€å§‹ï¼Œæˆ‘å°±æ·±çŸ¥è¿™æ˜¯ä¸€ä¸ªéœ€è¦ä¸æ–­å­¦ä¹ çŸ¥è¯†ï¼Œæ›´æ–°è‡ªå·±çš„è¡Œä¸šï¼Œå¦‚æœåœæ­¢å­¦ä¹ ï¼Œå°±ä¼šè¢«é«˜é€Ÿå‘å±•çš„äº’è”ç½‘è¡Œä¸šæŠ›å¼ƒã€‚æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¾ˆã€å†…å·ã€çš„è¡Œä¸šï¼Œæˆ‘å–œæ¬¢è¿™ç§æŒ‘æˆ˜ï¼Œä¹Ÿæ¸´æœ›èƒ½ä»è¿™ç§æŒ‘æˆ˜ä¸­è·å¾—ä¸€ä¸ªä¸æ–­è¿›æ­¥çš„è‡ªå·±ã€‚","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/tags/%E9%9A%8F%E7%AC%94/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"Serviceä¸­åŒ…å«å“ªäº›ä»£ç ","slug":"2021-11-12-Serviceä¸­åŒ…å«å“ªäº›ä»£ç ","date":"2021-11-12T15:49:01.000Z","updated":"2021-12-08T09:31:05.817Z","comments":false,"path":"2021/11/12/2021-11-12-Serviceä¸­åŒ…å«å“ªäº›ä»£ç /","link":"","permalink":"http://cyc0819.top/2021/11/12/2021-11-12-Service%E4%B8%AD%E5%8C%85%E5%90%AB%E5%93%AA%E4%BA%9B%E4%BB%A3%E7%A0%81/","excerpt":"","text":"Serviceä¸­åŒ…å«å“ªäº›ä»£ç 1ã€ç®€ä»‹Serviceå±‚ä¸­ = æ ¸å¿ƒåŠŸèƒ½(å‡ åè¡Œ ä¸Šç™¾ä»£ç ) + é¢å¤–åŠŸèƒ½(é™„åŠ åŠŸèƒ½) æ ¸å¿ƒåŠŸèƒ½ä¸šåŠ¡è¿ç®—DAOè°ƒç”¨ é¢å¤–åŠŸèƒ½ ä¸å±äºä¸šåŠ¡ å¯æœ‰å¯æ—  ä»£ç é‡å¾ˆå° ä»¥åŠï¼šäº‹åŠ¡ã€æ—¥å¿—ã€æ€§èƒ½â€¦ Serviceå±‚ï¼Œä½œä¸ºç¨‹åºçš„ä¸šåŠ¡å±‚é¢ï¼Œå…¶ä¸­æœ€é‡è¦çš„å¿…ç„¶æ˜¯ç¨‹åºçš„ä¸šåŠ¡æµç¨‹ï¼Œåªæœ‰å¯¹ç¨‹åºçš„ä¸šåŠ¡æµç¨‹æœ‰è¶³å¤Ÿçš„äº†è§£ï¼Œæ‰èƒ½å†™å‡ºä¼˜ç§€çš„Serviceå±‚ä»£ç ã€‚ ä¸å†—ä½™ï¼Œæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ä»£ç æ°´å¹³çš„ä¸€ä¸ªä½“ç°ã€‚ 2ã€æ¥å£ä¸ºä»€ä¹ˆè¦å…ˆå†™æ¥å£ï¼Ÿæ¥å£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ è¿™é‡Œæˆ‘å¼•ç”¨ä¸€å¥è¯: 1æ¥å£ä¸»è¦ç”¨äºæè¿°ç±»å…·æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œè€Œå¹¶ä¸ç»™å‡ºæ¯ä¸ªåŠŸèƒ½çš„å…·ä½“å®ç°ã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œå¹¶åœ¨éœ€è¦æ¥å£çš„åœ°æ–¹ï¼Œéšæ—¶ä½¿ç”¨å®ç°äº†ç›¸åº”æ¥å£çš„å¯¹è±¡ã€‚â€”â€”ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·ä¸€ã€‹ è¿™å¥è¯æ‰€æè¿°çš„æ˜¯æ¥å£çš„æ‰©å±•æ€§ã€‚ç®€è€Œè¨€å°±æ˜¯ï¼šæ¥å£æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ’åº§ï¼Œå¦‚æœæœ‰éœ€è¦æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œå®ç°äº†å³æ’å³ç”¨ã€‚ ä¾‹å¦‚ï¼šæœ‰ä¸€ä¸ªç™»å½•åŠŸèƒ½éœ€è¦æˆ‘ä»¬å»å®ç°ï¼Œè€Œè¯¥ç³»ç»Ÿåˆæœ‰å¤šç§ç™»é™†æ–¹å¼ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ¯ç§æ¥å£éƒ½å†™ä¸€ä¸ªServiceä»£ç ç»™Controllerè¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·æ˜¯ååˆ†ç¹ççš„ã€‚è€Œæˆ‘ä»¬å°†å¤šç§ç™»é™†çš„æ–¹å¼ç»Ÿä¸€æˆä¸€ä¸ªæ¥å£ï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æ¥åˆ†é…æœ€åå®é™…çš„å®ç°ç±»ã€‚æ­¤æ—¶å¯¹äºä½¿ç”¨è€…æ¥è¯´ï¼Œä»–ä»¬åªéœ€è¦å…³æ³¨çš„æ˜¯ç™»é™†è¿™ä¸ªæ–¹æ³•ï¼Œæ•´ä¸ªç™»é™†æ“ä½œå˜å¾—ååˆ†çµæ´»ï¼Œæ ¹æ®ä¸åŒçš„åœºæ™¯ä½¿ç”¨ä¸åŒçš„æ–¹å¼ç™»é™†ã€‚ å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œæ¥å£ä¸­æ¸…æ™°åœ°åˆ—å‡ºäº†æ‰€æœ‰åœ°æ–¹æ³•ï¼Œå¯¹äºåæœŸçš„ç»´æŠ¤ä»¥åŠä¿®æ”¹ä¹Ÿæ˜¯æœ‰æå¤§çš„æ–¹ä¾¿ã€‚ 3ã€Serviceä¹‹é—´çš„äº’ç›¸è°ƒç”¨Serviceå±‚ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨å—ï¼Ÿ è¿™ä¸ªé—®é¢˜ç›¸ä¿¡å¾ˆå¤šäººéƒ½æœ‰è¿‡æ€è€ƒï¼Œç†è®ºä¸Šæ¥è®²æ˜¯ä¸åº”è¯¥ç›¸äº’è¿›è¡Œè°ƒç”¨çš„ï¼Œå› ä¸ºServiceå±‚çš„å­˜åœ¨çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ç›®çš„å°±æ˜¯ è§£è€¦ ã€‚ å°†ä¸šåŠ¡å±‚çš„æ¯ä¸€ä¸ªä¸šåŠ¡ç‹¬ç«‹å‡ºæ¥ï¼Œä»¥è‡³äºä»–ä»¬ä¹‹é—´ä¸ç›¸äº’å½±å“ï¼Œèƒ½å¤Ÿå®ç°ä»£ç çš„ä¼˜åŒ–ï¼Œå¦åˆ™å¤šç§ä¸šåŠ¡çš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œé•¿ä¹…ä¹‹åè°éƒ½çœ‹ä¸å‡ºæ¥ä»£ç çš„é€»è¾‘ã€‚æ‰€ä»¥è¯´Serviceå±‚å°±å®ç°äº†è¿™ä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ã€‚ æ‰€ä»¥å¦‚æœServiceå±‚ä¹‹é—´çš„ä»£ç ç›¸äº’è°ƒç”¨ï¼Œæ˜¯ä¸æ˜¯ä¼šæ˜¯ä¸€ç§å€’é€€å‘¢ï¼Ÿ æœ‰äº›äººå¯èƒ½ä¼šé—®ï¼Œæœ‰äº›ä¸šåŠ¡ä¸­ç¡®å®æ˜¯ä¼šä½¿ç”¨åˆ°å…¶ä»–ä¸šåŠ¡ä¸­çš„ä»£ç ï¼Œé‚£è¿™éƒ¨åˆ†ä»£ç æ€ä¹ˆåŠï¼Ÿé‡æ–°å†™ï¼Ÿé‚£æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™åˆçŠ¯äº†å†—ä½™è¿™ä¸ªé”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ¸…æ¥šï¼Œè¿™ä¸ªæƒ…å†µæ˜¯å‡ºäºServiceé—´æœ‰é€šç”¨çš„é€»è¾‘ï¼Œè€Œä¸æ˜¯é€šç”¨çš„ä¸šåŠ¡ï¼Œæ¯ä¸ªServiceå¯¹åº”ä¸€ä¸ªä¸šåŠ¡ï¼Œä¸šåŠ¡ä¹‹é—´åº”è¯¥æœ‰æ˜ç¡®çš„åˆ†ç•Œï¼Œä¸ç„¶ä¼šå‡ºç°ä¸šåŠ¡é—´çš„è€¦åˆï¼Œè¿™æ˜¯è®¾è®¡çš„ä¸åˆç†ã€‚ æ—¢ç„¶æ˜¯é€šç”¨çš„é€»è¾‘ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯åˆå¯ä»¥æŠŠä»–ä»¬æŠ½è±¡å‡ºæ¥ï¼Œç‹¬ç«‹æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œå½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ç›´æ¥è¿›è¡Œè°ƒç”¨è¿™ä¸ªå·¥å…·ç±»å°±å¯ä»¥äº†å‘¢ï¼Ÿ æ‰€ä»¥æˆ‘ä¸ªäººè®¤ä¸ºServiceå±‚ä¹‹é—´æ˜¯ä¸å»ºè®®ç›¸äº’è°ƒç”¨çš„ã€‚ 4ã€éœ€è¦å‘Conrtrollerå±‚å±•ç¤ºä¸šåŠ¡å—ï¼Ÿå½“æˆ‘ä»¬å®ç°ä¸€ä¸ªç™»å½•åŠŸèƒ½çš„æ—¶å€™ï¼ŒControllerå±‚ï¼Œè°ƒç”¨Serviceå±‚ï¼Œå¾€å¾€æˆ‘ä»¥å‰çš„å†™æ³•æ˜¯ï¼ŒServiceè¿”å›ç™»å½•æˆåŠŸæˆ–è€…å¤±è´¥çš„ä»£ç ï¼Œç„¶åControllerè¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­æ˜¯å¦æˆåŠŸç™»å½•ï¼Œç„¶åå†å‘å‰ç«¯è¿”å›ä¿¡æ¯ã€‚è¿™æ ·å­çš„å†™æ³•æœ‰ä¸ªé—®é¢˜ï¼ŒControlleråˆ¤æ–­çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œç®—ä¸ç®—æ˜¯ä¸šåŠ¡ï¼Ÿå¦‚æœç®—ï¼Œæ˜¯ä¸æ˜¯Controllerå±‚åˆæ¥è§¦åˆ°äº†ä¸šåŠ¡ï¼Ÿ åˆå›åˆ°äº†ä¹‹å‰çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¦æœ‰Serviceå±‚ï¼Ÿ æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥è®©Controllerå±‚å°½å¯èƒ½å°‘çš„æ¥è§¦åˆ°ä¸šåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å†™æ³•å¯ä»¥ä¼˜åŒ–ä¸ºï¼Œå†Serviceå±‚åšå®Œæ‰€æœ‰ä¸šåŠ¡ç›¸å…³çš„å·¥ä½œï¼Œæœ€åè¿”å›ç»™Controllerå±‚çš„æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„æ¥å£ï¼Œè¿™æ ·å­æ˜¯ä¸æ˜¯å¯ä»¥é¿å…Controllerå±‚æ¥è§¦åˆ°ä¸šåŠ¡ç›¸å…³çš„ä»£ç å‘¢ï¼Ÿè¿™å°±åˆç¬¦åˆäº†æˆ‘ä»¬ä½¿ç”¨Serviceå±‚çš„åˆè¡·äº†ã€‚ 5ã€æœ€ååœ¨çœ‹äº†ä¸€äº›æ–‡ç« ä¹‹åï¼Œä¸ªäººçš„ä¸€äº›å°å°è§‚ç‚¹ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"}]},{"title":"ç®—æ³•å­¦ä¹ _leetcodeè®¾è®¡æ¨¡å—","slug":"2021-10-09-ç®—æ³•å­¦ä¹ _leetcodeè®¾è®¡æ¨¡å—","date":"2021-10-09T06:39:20.000Z","updated":"2021-12-08T09:30:51.311Z","comments":false,"path":"2021/10/09/2021-10-09-ç®—æ³•å­¦ä¹ _leetcodeè®¾è®¡æ¨¡å—/","link":"","permalink":"http://cyc0819.top/2021/10/09/2021-10-09-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_leetcode%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%9D%97/","excerpt":"","text":"leetcodeè®¾è®¡æ¨¡å—1ã€å­çŸ©å½¢æŸ¥è¯¢é¢˜ç›®lettcode-1476é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯æŒ‰ç…§é¢˜ç›®çš„è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¾“å…¥çš„åæ ‡ï¼Œæ‹¿åˆ°è¯¥åæ ‡çš„å€¼ã€‚ä»¥åŠæ ¹æ®è¾“å…¥çš„ä¸¤ä¸ªåæ ‡å’Œä¸€ä¸ªå€¼ï¼Œä¿®æ”¹ä¸¤ä¸ªåæ ‡ä¹‹é—´çš„å€¼ä¸ºæ‰€ç»™å‡ºæ¥çš„å€¼ã€‚æ‰€ä»¥å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚æ‹¿åˆ°åæ ‡çš„å€¼å¹¶ä¸éš¾ã€‚ä¸»è¦æ˜¯ä¿®æ”¹ä¸¤ä¸ªåæ ‡ä¹‹é—´çš„å€¼ã€‚å› ä¸ºè¾“å…¥çš„ä¸¤ä¸ªåæ ‡ï¼Œå‡å¦‚æ˜¯(1,1)å’Œ(3,4) ,æ‰€ä»¥å¯ä»¥çœ‹å‡ºæ¥çºµåæ ‡æ˜¯ä¿®æ”¹1å’Œ4ä¹‹é—´çš„å€¼ï¼Œç„¶åæ¨ªåæ ‡æ˜¯ä¿®æ”¹1ï¼Œ3ä¹‹é—´çš„å€¼ã€‚æ‰€ä»¥é€šè¿‡éå†å¯ä»¥éå†ç¬¬ä¸€è¡Œçš„1-4åˆ—ï¼Œç¬¬äºŒè¡Œçš„1-4åˆ—ä¸€ç›´å¾ªç¯ä¸‹å»ï¼Œæœ€ç»ˆä¿®æ”¹æ‰€æœ‰çš„å€¼ã€‚ å…·ä½“ä»£ç 12345678910111213141516171819class SubrectangleQueries &#123; int[][] rectangle; public SubrectangleQueries(int[][] rectangle) &#123; this.rectangle=rectangle; &#125; public void updateSubrectangle(int row1, int col1, int row2, int col2, int newValue) &#123; for (int i=row1;i&lt;=row2;i++)&#123; for (int j=col1;j&lt;=col2;j++)&#123; rectangle[i][j]=newValue; &#125; &#125; &#125; public int getValue(int row, int col) &#123; return rectangle[row][col]; &#125;&#125; 2ã€TinyURL çš„åŠ å¯†ä¸è§£å¯†é¢˜ç›®lettcode-535é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯ä¸ºäº†åŠ å¯† URLï¼Œæˆ‘ä»¬ä½¿ç”¨è®¡æ•°å™¨ (ii) ï¼Œæ¯é‡åˆ°ä¸€ä¸ªæ–°çš„ URL éƒ½åŠ ä¸€ã€‚æˆ‘ä»¬å°† URL ä¸å®ƒçš„æ¬¡æ•° ii æ”¾åœ¨å“ˆå¸Œè¡¨ HashMap ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ç¨åçš„è§£å¯†ä¸­å¯ä»¥è½»æ˜“åœ°è·å¾—åŸæœ¬çš„ URL å…·ä½“ä»£ç 12345678910111213141516public class Codec &#123; Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;(); int i = 0; // Encodes a URL to a shortened URL. public String encode(String longUrl) &#123; map.put(i,longUrl); return &quot;http://tinyurl.com/&quot; + i++; &#125; // Decodes a shortened URL to its original URL. public String decode(String shortUrl) &#123; return map.get(Integer.parseInt(shortUrl.replace(&quot;http://tinyurl.com/&quot;, &quot;&quot;))); &#125;&#125; 3ã€äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨é¢˜ç›®lettcode-173é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯äºŒå‰æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªTreeNodeæ¥å®ç°ï¼Œå…¶ä¸­æˆ‘ä»¬å°†éå†åˆ°çš„å€¼é”™æ”¾åˆ°ä¸€ä¸ªlisté›†åˆä¸­å»ã€‚äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œéå†é¡ºåºæ˜¯ï¼šå·¦èŠ‚ç‚¹-ä¸­èŠ‚ç‚¹-å³èŠ‚ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æ–¹æ³•ä¸­è¾“å…¥ä¸€ä¸ªäºŒå‰æ ‘ï¼Œé‡å¤è¿›è¡Œéå†ï¼Œå³å¯å¾—åˆ°æœ€åä¸­åºéå†çš„ç»“æœã€‚ å…·ä½“ä»£ç 1234567891011121314151617181920212223242526272829class BSTIterator &#123; private int index; private List&lt;Integer&gt; arr; public BSTIterator(TreeNode root) &#123; index = 0; arr = new ArrayList&lt;Integer&gt;(); inorderTraversal(root, arr); &#125; public int next() &#123; return arr.get(index++); &#125; public boolean hasNext() &#123; return index &lt; arr.size(); &#125; private void inorderTraversal(TreeNode root, List&lt;Integer&gt; arr) &#123; if (root == null) &#123; return; &#125; //å®ç°ä¸­åºéå† å·¦-ä¸­-å³ inorderTraversal(root.left, arr); arr.add(root.val); inorderTraversal(root.right, arr); &#125;&#125; 4ã€è®¾è®¡ä¸€ä¸ªæ”¯æŒå¢é‡æ“ä½œçš„æ ˆé¢˜ç›®lettcode-1381é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯é¢˜ç›®è¦æ±‚è¿™ä¸ªæ ˆéœ€è¦æœ‰ä¸€ä¸ªæœ€å¤§æ•°é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡æ¥é™åˆ¶æ ˆçš„å¤§å°ã€‚å¦‚æœæ²¡æœ‰è¾¾åˆ°æœ€å¤§æ•°é‡ï¼Œå°±å°†æ–°å…ƒç´ æ·»åŠ åˆ°æ ˆçš„é¡¶ç«¯ï¼Œå¦åˆ™å°±ä¸å…è®¸æ·»åŠ ã€‚å½“åˆ é™¤æ ˆä¸­å…ƒç´ çš„æ—¶å€™ï¼Œé¦–å…ˆåˆ é™¤æ ˆé¡¶ç«¯çš„å…ƒç´ ï¼Œå¦‚æœæ ˆä¸­æ²¡æœ‰ä¸œè¥¿ï¼Œå°±è¿”å›ä¸€ä¸ª -1æ›´æ–°æ ˆä¸­çš„å…ƒç´ çš„æ—¶å€™é¦–å…ˆåˆ¤æ–­æ ˆä¸­çš„æ•°é‡ä¸è¾“å…¥çš„kçš„å¤§å°å…³ç³»ï¼Œå¦‚æœkå¤§ï¼Œå°±å°†æ ˆä¸­å…ƒç´ æ•°é‡ä½œä¸ºæ›´æ–°çš„æ•°é‡ï¼Œç”±äºindexæ˜¯ç”±0å¼€å§‹çš„ï¼Œæ‰€ä»¥æ•°é‡å°±æ˜¯index+1ï¼Œå¦åˆ™å°±æ˜¯ä»¥kä½œä¸ºæ•°é‡ã€‚ å…·ä½“ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839class CustomStack &#123; int maxSize; int[] myStack=null; int head=-1; public CustomStack(int maxSize) &#123; myStack=new int[maxSize]; this.maxSize=maxSize; &#125; public void push(int x) &#123; if (head==myStack.length-1)&#123; return; &#125;else &#123; myStack[++head]=x; &#125; &#125; public int pop() &#123; if (head==-1)&#123; return -1; &#125;else&#123; return myStack[head--]; &#125; &#125; public void increment(int k, int val) &#123; int min; if (head&lt;k)&#123; min=head+1; &#125;else&#123; min=k; &#125; for (int i=0;i&lt;min;i++)&#123; myStack[i]+=val; &#125; &#125;&#125; 5ã€åœ¨å—æ±¡æŸ“çš„äºŒå‰æ ‘ä¸­æŸ¥æ‰¾å…ƒç´ é¢˜ç›®lettcode-1261é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯é€šè¿‡é¢˜ç›®æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘æ˜¯2x+1ï¼Œå³å­æ ‘æ˜¯2x+2ï¼Œæ‰€ä»¥ä»¥æ­¤ç±»æ¨ä¸‹å»ï¼Œå°±èƒ½è¿˜åŸå‡ºäºŒå‰æ ‘ã€‚é¦–å…ˆå¾—åˆ¤æ–­æ˜¯å¦æœ‰å­èŠ‚ç‚¹ã€‚ç„¶åå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰çˆ¶å­æ ‘ï¼Œå°±è¯´æ˜ä»–æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå°±å°†ä»–è®¾ä¸º0 å…·ä½“ä»£ç 1234567891011121314151617181920212223242526272829303132class FindElements &#123; Set&lt;Integer&gt; set=new HashSet&lt;&gt;(); public FindElements(TreeNode root) &#123; rebuildTree(root, null); &#125; public boolean find(int target) &#123; // åˆ¤æ–­ Set é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„å¯¹è±¡ return set.contains(target); &#125; private void rebuildTree(TreeNode root, TreeNode parent) &#123; if (root == null) &#123; return; &#125; // å¦‚æœæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå°±è®¾ä¸º0 // å¦åˆ™å°±æ‰§è¡Œä¸‹é¢çš„æ¡ä»¶ if (parent == null) &#123; root.val = 0; &#125; else &#123; root.val = root == parent.left ? (parent.val &lt;&lt; 1) + 1 : (parent.val &lt;&lt; 1) + 2; &#125; // å°†ç»“æœæ·»åŠ åˆ°setä¸­ set.add(root.val); // é‡å¤æ‰§è¡Œä¸Šé¢çš„å†…å®¹ rebuildTree(root.left, root); rebuildTree(root.right, root); &#125;&#125; 6ã€æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨é¢˜ç›®lettcode-341é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯ä»é¢˜ç›®ä¸Šçœ‹ï¼Œé¢˜ç›®æ‰€è¾“å…¥çš„æ•°æ®å°±æ˜¯ä¸€ä¸ªåµŒå¥—çš„æ•°ç»„ï¼Œä¸€ä¸ªæ•°ç»„ä¸­å¯ä»¥å­˜æ”¾æ•´æ•°ï¼Œä¹Ÿå¯ä»¥å­˜æ”¾ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è€Œå½“æˆ‘ä»¬è¿›è¡Œéå†æ—¶éœ€è¦å…ˆéå†å®Œä¸€ä¸ªæ•°ç»„ï¼Œç„¶åå†éå†åé¢çš„æ•°ç»„ï¼Œç›¸å½“äºæŠŠå¤šä¸ªæ•°ç»„ä¸­çš„å€¼ç»™æ‘Šå¼€æˆä¸€ä¸ªåªæœ‰æ•´æ•°çš„æ•°ç»„ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨éå†æ—¶ï¼Œå°†éå†çš„æ–¹æ³•æŠ½æˆä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ã€‚å¦‚æœç¢°åˆ°åµŒå¥—æ•°ç»„ï¼Œæˆ‘ä»¬å°±å†æ¬¡å¯¹éå†çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œä¾æ¬¡é‡å¤å¤šæ¬¡ï¼Œå°±å¯ä»¥å®ç°å¯¹å¤šä¸ªåµŒå¥—æ•°ç»„çš„éå†ã€‚ å…·ä½“ä»£ç 123456789101112131415161718192021222324252627282930public class NestedIterator implements Iterator&lt;Integer&gt; &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); int index=0; public NestedIterator(List&lt;NestedInteger&gt; nestedList) &#123; add(nestedList); &#125; private void add(List&lt;NestedInteger&gt; nestedList) &#123; for (NestedInteger nestedInteger : nestedList) &#123; if (nestedInteger.isInteger()) &#123; list.add(nestedInteger.getInteger()); &#125; else &#123; //é‡æ–°éå†åµŒå¥—çš„æ•°ç»„ add(nestedInteger.getList()); &#125; &#125; &#125; @Override public Integer next() &#123; return list.get(index++); &#125; @Override public boolean hasNext() &#123; return index&lt;list.size(); &#125;&#125; 7ã€å®ç° Trie (å‰ç¼€æ ‘)é¢˜ç›®lettcode-208é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯å‰ç¼€æ ‘ï¼Œåˆå«åšå­—å…¸æ ‘ã€‚é€šè¿‡é˜…è¯»é¢˜ç›®ï¼Œè¿™ä¸€é¢˜æˆ‘ä»¬å¯ä»¥ç”¨Listæ•°ç»„æ¥å®ç°ã€‚å…¶ä¸­æ·»åŠ å…ƒç´ å¯ä»¥ç”¨addæ–¹æ³•æ¥å®ç°ï¼Œè€Œcontainsæ–¹æ³•å¯ä»¥ç”¨æ¥åˆ¤æ–­æ•°ç»„ä¸­ä¹¦å¦æœ‰è¯¥å…ƒç´ ã€‚startsWithæ–¹æ³•å³å¯ç”¨ç”¨äºåˆ¤æ–­æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦åŒ…å«æŸä¸€ä¸ªå€¼ã€‚ å…·ä½“ä»£ç 123456789101112131415161718192021222324252627282930public class Trie &#123; private List&lt;String&gt; list; private int index = 0; public Trie() &#123; list = new ArrayList&lt;&gt;(); &#125; public void insert(String word) &#123; list.add(word); &#125; public boolean search(String word) &#123; if (list.contains(word)) &#123; return true; &#125; else &#123; return false; &#125; &#125; public boolean startsWith(String prefix) &#123; for (String lists:list)&#123; if (lists.startsWith(prefix))&#123; return true; &#125; &#125; return false; &#125;&#125; 8ã€çš‡ä½ç»§æ‰¿é¡ºåºé¢˜ç›®lettcode-1600é¢˜éš¾åº¦ï¼šä¸­ç­‰ è§£é¢˜æ€è·¯è¿™é¢˜ä¸€å¼€å§‹è¯»èµ·æ¥æœ‰ç‚¹æ™¦æ¶©éš¾æ‡‚ï¼Œå’Œåé¢è¯»èµ·æ¥å…¶å®å°±æ˜¯ç±»ä¼¼äºæˆ‘å›½å¤ä»£çš„ä¸–è¢­æœºåˆ¶ã€‚é¦–å…ˆæ˜¯çš‡å¸ï¼Œç„¶åé•¿å­æ¬¡å­ï¼Œä½†æ˜¯é•¿å­ä¹‹åçš„çš‡å¸åº”è¯¥æ˜¯é•¿å­çš„åä»£ï¼Œå¦‚æœé•¿å­æ²¡æœ‰åä»£äº†ï¼Œçš‡å¸æ‰ä¼šä¼ ç»™æ¬¡å­ã€‚ç±»ä¼¼è¿™æ ·å­å¾ªç¯ä¸‹å»ã€‚ç„¶åæˆ‘ä»¬éœ€è¦æ¯ä¸ªäººæœ‰ä¸€ä¸ªåˆ—è¡¨æ¥å­˜å‚¨ä»–çš„åä»£ä»¬ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨HashMapæ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚ç„¶åè¯¥Mapçš„é”®æ˜¯Stringç±»å‹ï¼Œå€¼æ˜¯ä¸€ä¸ªlistç±»å‹ã€‚æ‰€ä»¥æ¯”å¦‚è¯´çš‡å¸Aï¼Œä»–çš„Aå°±æ˜¯é”®ï¼Œä»–çš„åä»£å°±æ„æˆäº†Mapçš„å€¼listã€‚æ­»äº¡äººå‘˜æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªSetæ¥å®ç°ï¼Œå› ä¸ºä»–æ˜¯ä¸å¯é‡å¤çš„ï¼Œä¸€ä¸ªäººä¹Ÿä¸å¯èƒ½æ­»å¾ˆå¤šæ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ­»äº¡çš„äººå‘˜æ”¾åˆ°å…¶ä¸­ã€‚æœ€åæ˜¯æ’åºã€‚é¦–å…ˆåˆ¤æ–­åœ¨setä¸­çš„äººå‘˜ï¼Œå°†ä»–ä»¬åˆ é™¤ï¼Œç„¶åå¾ªç¯éå†Listä¸­çš„å€¼ã€‚é¦–å…ˆæˆ‘ä»¬è¾“å…¥çš‡å¸çš„åå­—ï¼Œç„¶åå°±ä¼šéå†çš‡å¸çš„åä»£ï¼Œéå†åˆ°çš‡å¸çš„ç¬¬ä¸€ä¸ªåä»£ï¼Œåˆä¼šéå†åˆ°ä»–çš„ç¬¬ä¸€ä¸ªåä»£çš„åä»£ï¼Œä¸€ç›´åˆ°å®Œï¼Œå°±æ˜¯æ·±åº¦ä¼˜å…ˆéå†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¾¿åˆ©çš„ä»£ç æŠ½æˆä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ï¼Œä»¥ä¾›é‡å¤è¿›è¡Œè°ƒç”¨ï¼Œå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ å…·ä½“ä»£ç 12345678910111213141516171819202122232425262728293031323334353637public class ThroneInheritance &#123; private String kingName; private Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;(); //ä¸å¯é‡å¤ private Set&lt;String&gt; deathSet = new HashSet&lt;&gt;(); public ThroneInheritance(String kingName) &#123; this.kingName=kingName; map.put(kingName,new ArrayList&lt;&gt;()); &#125; public void birth(String parentName, String childName) &#123; map.get(parentName).add(childName); map.put(childName,new ArrayList&lt;&gt;()); &#125; public void death(String name) &#123; deathSet.add(name); &#125; public List&lt;String&gt; getInheritanceOrder() &#123; List&lt;String&gt; list=new ArrayList&lt;&gt;(); add(list,kingName); return list; &#125; public void add(List&lt;String&gt; list, String name)&#123; if (!deathSet.contains(name))&#123; list.add(name); &#125; //éå†è¯¥äººç‰©çš„å­å­™ for (String names:map.get(name))&#123; add(list,names); &#125; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"RabbitMQå…¥é—¨ä½¿ç”¨","slug":"2021-10-06-RabbitMQå…¥é—¨ä½¿ç”¨","date":"2021-10-06T13:49:01.000Z","updated":"2021-12-08T09:30:44.667Z","comments":false,"path":"2021/10/06/2021-10-06-RabbitMQå…¥é—¨ä½¿ç”¨/","link":"","permalink":"http://cyc0819.top/2021/10/06/2021-10-06-RabbitMQ%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/","excerpt":"","text":"RabbitMQå…¥é—¨ä½¿ç”¨1ã€åŒæ­¥ã€å¼‚æ­¥é€šä¿¡æˆ‘ä»¬æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œä¸€èˆ¬åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ–¹å¼ã€‚ åŒæ­¥å°±æ˜¯ï¼šå½“ä¸¤ä¸ªæœåŠ¡é—´é€šä¿¡æ—¶ï¼Œå¿…é¡»è¦æ¯ä¸€æ­¥æŒ‰ç…§é¡ºåºè¿›è¡Œä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥çš„å†…å®¹ã€‚çœ‹ä¸Šå»åŒæ­¥å¯ä»¥ç«‹å³å¾—åˆ°ç»“æœï¼Œå¥½åƒå¾ˆå¥½ã€‚ä½†æ˜¯è¿™æ ·çš„é€šä¿¡æ–¹å¼å¾€å¾€å°±ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚ è€¦åˆåº¦è¾ƒé«˜ã€‚å½“æˆ‘ä»¬åŠ å…¥æ–°çš„éœ€æ±‚æ—¶ï¼Œéœ€è¦ä¿®æ”¹å¾ˆå¤šçš„ä»£ç ã€‚ æ€§èƒ½ä¸å¥½ã€‚å› ä¸ºæ¯æ¬¡éƒ½è¦ç­‰å¾…ä¸Šä¸€ä¸ªæœåŠ¡å®Œæˆï¼Œæ‰€ä»¥ä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™. èµ„æºæµªè´¹ã€‚åœ¨ç­‰å¾…æœåŠ¡å®Œæˆçš„æ—¶å€™ï¼Œä¸èƒ½é‡Šæ”¾èµ„æºï¼Œä¹Ÿä¸èƒ½åšäº‹æƒ…ï¼Œå°±å¯¼è‡´äº†èµ„æºçš„æµªè´¹ã€‚ çº§è”å¤±è´¥ã€‚å¦‚æœæœåŠ¡è°ƒç”¨è¿‡ç¨‹ä¸­ä¸€ä¸ªç¯èŠ‚å‡ºç°é”™è¯¯ï¼Œå°±ä¼šå¯¼è‡´å…¶ä»–ç¯èŠ‚è·Ÿç€å‡ºç°é”™è¯¯ã€‚å°±åƒæ˜¯å¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ã€‚ å¼‚æ­¥å°±æ˜¯ï¼šå½“ä¸¤ä¸ªæœåŠ¡é—´é€šä¿¡æ—¶ï¼ŒAå°†èµ„æ–™ä¼ ç»™Bçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç»§ç»­å»åšè‡ªå·±çš„äº‹æƒ…ï¼Œè€Œä¸ç”¨ä¸€ç›´ç­‰å¾…Bä¼ é€æ¶ˆæ¯å›æ¥ï¼Œåœ¨Bæœ‰ç©ºçš„æ—¶å€™å¤„ç†å°±å¯ä»¥ã€‚åŒæ—¶ï¼Œå¼‚æ­¥é€šä¿¡è§£å†³äº†ä¸€äº›åŒæ­¥é€šä¿¡å­˜åœ¨çš„é—®é¢˜ï¼šè€¦åˆåº¦ä½ï¼Œååé‡æå‡ï¼Œæ•…éšœéš”ç¦» ï¼Œæµé‡å‰Šå³°ã€‚ä½†æ˜¯åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›æ–°çš„é—®é¢˜ï¼š ä¾èµ–äºBrokerçš„å¯é æ€§ã€å®‰å…¨æ€§ã€ååèƒ½åŠ› æ¶æ„å¤æ‚äº†ï¼Œä¸šåŠ¡æ²¡æœ‰æ˜æ˜¾çš„æµç¨‹çº¿ï¼Œä¸å¥½è¿½è¸ªç®¡ç† æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œåº”è¯¥æ ¹æ®å®é™…æƒ…å†µæ¥ä½¿ç”¨å¼‚æ­¥æˆ–è€…åŒæ­¥é€šä¿¡ã€‚ 2ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰ç®€ä»‹MQ ï¼ˆMessageQueueï¼‰ï¼Œä¸­æ–‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå­—é¢æ¥çœ‹å°±æ˜¯å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚ä¹Ÿå°±æ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„Brokerã€‚ æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è€¦åˆã€å¼‚æ­¥æ¶ˆæ¯ã€æµé‡å‰Šé”‹ç­‰é—®é¢˜ã€‚å®ç°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æ¶æ„ã€‚æ˜¯å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯ç¼ºå°‘çš„ä¸­é—´ä»¶ã€‚ 2.1ã€å¸¸è§çš„MQä»¥ä¸‹å°±æ˜¯å››ç§æˆ‘ä»¬å¸¸ç”¨çš„MQä»¥åŠå®ƒä»¬ä¹‹é—´çš„å¯¹æ¯”ï¼š æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»¥RabbitMQæ¥ä½œä¸ºæˆ‘ä»¬å­¦ä¹ çš„å·¥å…·ã€‚ 2.2ã€RabbitMQä»‹ç»ä»¥åŠå®‰è£…RabbitMQæ˜¯åŸºäºErlangè¯­è¨€å¼€å‘çš„å¼€æºæ¶ˆæ¯é€šä¿¡ä¸­é—´ä»¶ï¼Œå®˜ç½‘åœ°å€ï¼šhttps://www.rabbitmq.com/ ç”±äºå®ƒæ˜¯åŸºäºErlangè¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å®‰è£…Erlangè¯­è¨€çš„å¼€å‘ç¯å¢ƒã€‚ä¸ºäº†çœæ—¶é—´ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥åœ¨Dockersé‡Œé¢è¿›è¡Œå®‰è£…å¹¶åšä¸€ä¸ªæ˜ å°„ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š ä¸‹è½½RabbitMQçš„é•œåƒ1docker pull rabbitmq:3-management å®‰è£…mq123456789docker run \\ -e RABBITMQ_DEFAULT_USER=chenyicai \\ -e RABBITMQ_DEFAULT_PASS=123456 \\ --name mq \\ --hostname mq1 \\ -p 15672:15672 \\ -p 5672:5672 \\ -d \\ rabbitmq:3-management ç„¶åæˆ‘ä»¬çš„RabbitMQå°±å®‰è£…å®Œæˆäº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨åœ°å€+15672è¿›å…¥RabbitMQçš„æ§åˆ¶å°è´¦å·å¯†ç å°±æ˜¯æˆ‘ä»¬å‰é¢è®¾ç½®å¥½çš„chenyicaiå’Œ123456ç™»å½•ä¹‹åï¼š ä»¥ä¸‹æ˜¯RabbitMQä¸­çš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š channelï¼šæ“ä½œMQçš„å·¥å…· exchangeï¼šè·¯ç”±æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸­ queueï¼šç¼“å­˜æ¶ˆæ¯ virtual hostï¼šè™šæ‹Ÿä¸»æœºï¼Œæ˜¯å¯¹queueã€exchangeç­‰èµ„æºçš„é€»è¾‘åˆ†ç»„ 3ã€å¸¸è§çš„æ¶ˆæ¯æ¨¡å‹3.1ã€å®˜æ–¹ç»™å‡ºçš„æ¶ˆæ¯æ¨¡å‹å®˜æ–¹ä¸€å…±ç»™å‡ºçš„äº”ä¸ªMQçš„Demoï¼Œåˆ†åˆ«å¯¹åº”äº†å‡ ç§ä¸åŒçš„ç”¨æ³•ï¼š åŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆBasicQueueï¼‰ å·¥ä½œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆWorkQueueï¼‰ å‘å¸ƒè®¢é˜…ï¼ˆPublishã€Subscribeï¼‰ï¼Œåˆæ ¹æ®äº¤æ¢æœºç±»å‹ä¸åŒåˆ†ä¸ºä¸‰ç§ï¼š Fanout Exchangeï¼šå¹¿æ’­ Direct Exchangeï¼šè·¯ç”± Topic Exchangeï¼šä¸»é¢˜ 3.2ã€Hello Worldç°åœ¨æˆ‘ä»¬å°±åœ¨SpringBooté‡Œé¢å®ç°ä»¥ä¸‹å®˜æ–¹ç¤ºä¾‹ä¸­çš„Hello Worldè¿™ä¸ªä¾‹å­ã€‚å®˜æ–¹çš„HelloWorldæ˜¯åŸºäºæœ€åŸºç¡€çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹æ¥å®ç°çš„ï¼ŒåªåŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼š publisherï¼šæ¶ˆæ¯å‘å¸ƒè€…ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—queue queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè´Ÿè´£æ¥å—å¹¶ç¼“å­˜æ¶ˆæ¯ consumerï¼šè®¢é˜…é˜Ÿåˆ—ï¼Œå¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ æ‰€ä»¥æˆ‘ä»¬å®ç°è¿™ä¸ªä¾‹å­çš„æ­¥éª¤å¦‚ä¸‹ï¼šåŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯å‘é€æµç¨‹ï¼š å»ºç«‹connection123456789ConnectionFactory factory = new ConnectionFactory();//è®¾ç½®è¿æ¥å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»æœºåã€ç«¯å£å·ã€vhostã€ç”¨æˆ·åã€å¯†ç factory.setHost(&quot;8.129.212.155&quot;);factory.setPort(5672);factory.setVirtualHost(&quot;/&quot;);factory.setUsername(&quot;chenyicai&quot;);factory.setPassword(&quot;123456&quot;);//å»ºç«‹è¿æ¥Connection connection = factory.newConnection(); åˆ›å»ºé€šé“channel1Channel channel = connection.createChannel(); åˆ©ç”¨channelå£°æ˜é˜Ÿåˆ—1234//é˜Ÿåˆ—åString queueName = &quot;simple.queue&quot;;//é˜Ÿåˆ—çš„å±æ€§channel.queueDeclare(queueName, false, false, false, null); åˆ©ç”¨channelå‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯123String message = &quot;hello, rabbitmq!&quot;;channel.basicPublish(&quot;&quot;, queueName, null, message.getBytes());System.out.println(&quot;å‘é€æ¶ˆæ¯æˆåŠŸï¼šã€&quot; + message + &quot;ã€‘&quot;); åŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯æ¥æ”¶æµç¨‹ï¼š å»ºç«‹connection åˆ›å»ºé€šé“channel åˆ©ç”¨channelå£°æ˜é˜Ÿåˆ— å®šä¹‰consumerçš„æ¶ˆè´¹è¡Œä¸ºhandleDelivery()åˆ©ç”¨channelå°†æ¶ˆè´¹è€…ä¸é˜Ÿåˆ—ç»‘å®š12345678910channel.basicConsume(queueName, true, new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; // 5.å¤„ç†æ¶ˆæ¯ String message = new String(body); System.out.println(&quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot; + message + &quot;ã€‘&quot;); &#125; &#125;);System.out.println(&quot;ç­‰å¾…æ¥æ”¶æ¶ˆæ¯ã€‚ã€‚ã€‚ã€‚&quot;); å¾ˆæ˜¾ç„¶å¦‚æœæ¯æ¬¡ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—éƒ½è¿™æ ·å¼€å…³è¿æ¥ï¼Œé‚£ä¹ˆæ˜¯éå¸¸ä¸å¥½çš„ä¸€ç§ç°è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦ä½¿ç”¨Springçš„ä¸€ä¸ªæ¡†æ¶ï¼Œæ¥æ›´å¥½åœ°å¸®åŠ©æˆ‘ä»¬å¯¹æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œä½¿ç”¨ã€‚ 4ã€SpringAMQP4.1ã€ä»€ä¹ˆæ˜¯SpringAMQPSpringAmqpçš„å®˜æ–¹åœ°å€ï¼šhttps://spring.io/projects/spring-amqp AMQPï¼šæ˜¯ç”¨äºåœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’ä¸šåŠ¡æ¶ˆæ¯çš„å¼€æ”¾æ ‡å‡†ã€‚è¯¥åè®®ä¸è¯­è¨€å’Œå¹³å°æ— å…³ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ä¸­ç‹¬ç«‹æ€§çš„è¦æ±‚ã€‚ SpringAMQPï¼šæ˜¯åŸºäºAMQPåè®®å®šä¹‰çš„ä¸€å¥—APIè§„èŒƒï¼Œæä¾›äº†æ¨¡æ¿æ¥å‘é€å’Œæ¥å—æ¶ˆæ¯ã€‚åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­Spring-AMQPæ˜¯åŸºç¡€æŠ½è±¡ï¼ŒSpring-rabbitæ˜¯åº•å±‚çš„é»˜è®¤å®ç°ã€‚ 4.2ã€SpringAMQPå®ç°Hello WorldSpringä¸­å·²ç»é›†æˆäº†AMQPçš„ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¼•å…¥ä¾èµ–å°±å¯ä»¥å®ç°è‡ªåŠ¨æ³¨å…¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š å¼•å…¥SpringAMQPçš„ä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;&lt;/dependency&gt; åœ¨publisherä¸­ç¼–å†™ä¸€ä¸ªymlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ mqè¿æ¥çš„ä¿¡æ¯1234567spring: rabbitmq: host: 8.129.212.155 # rabbitMQçš„ipåœ°å€ port: 5672 # ç«¯å£ username: chenyicai password: 123456 virtual-host: / åœ¨publisheræœåŠ¡ä¸­æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•å‘é€æ¶ˆæ¯ï¼š12345678910111213@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringAmqpTest &#123; @Autowired private RabbitTemplate rabbitTemplate; @Test public void testSendMessage2SimpleQueue() &#123; String queueName = &quot;simple.queue&quot;; String message = &quot;hello, spring amqp!&quot;; rabbitTemplate.convertAndSend(queueName, message); &#125;&#125; å¦‚æœæ­¤æ—¶æˆ‘ä»¬æ²¡æœ‰æ¥å—ä¿¡æ¯ï¼Œä¿¡æ¯å°±ä¼šå­˜åœ¨mqçš„ç¼“å­˜åŒºé‡Œé¢ï¼Œå¦‚ä¸‹: åœ¨consumerä¸­æ¥å—æ¶ˆæ¯ï¼ˆconsumerä¸­ä¹Ÿè¦åˆ›å»ºè¿æ¥é…ç½®æ–‡ä»¶ï¼‰1234567@Componentpublic class SpringRabbitListener &#123; @RabbitListener(queues = &quot;simple.queue&quot;) public void listenSimpleQueue(String msg) &#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°simple.queueçš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125;&#125; ç°åœ¨æˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªHello Worldçš„ä¾‹å­çš„å®ç°ã€‚ç»“æœå¦‚ä¸‹ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯é˜…åå³ç„šçš„ï¼Œæ˜¯ä¸€ä¸ªä¸å¯é€†çš„è¿‡ç¨‹ã€‚ç°åœ¨æˆ‘ä»¬çœ‹çœ‹å‰©ä¸‹çš„å‡ ä¸ªä¾‹å­ã€‚ 4.3ã€Work Queue å·¥ä½œé˜Ÿåˆ—å·¥ä½œé˜Ÿåˆ—ï¼Œå¯ä»¥æé«˜æ¶ˆæ¯å¤„ç†é€Ÿåº¦ï¼Œé¿å…é˜Ÿåˆ—æ¶ˆæ¯å †ç§¯ä»–çš„é€»è¾‘å›¾å¦‚ä¸‹ï¼š ç°åœ¨æˆ‘ä»¬è¦æ¥å®ç°ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ— åœ¨publisheræœåŠ¡ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå¾ªç¯å‘é€50æ¡æ¶ˆæ¯åˆ°simple.queueé˜Ÿåˆ—12345678910111213141516@RunWith(SpringRunner.class)@SpringBootTestpublic class SpringAmqpTest &#123; @Autowired private RabbitTemplate rabbitTemplate; @Test public void testSendMessage2WorkQueue() throws InterruptedException &#123; String queueName = &quot;simple.queue&quot;; String message = &quot;hello, message__&quot;; for (int i = 1; i &lt;= 50; i++) &#123; rabbitTemplate.convertAndSend(queueName, message + i); Thread.sleep(20); &#125; &#125;&#125; åœ¨consumeræœåŠ¡ä¸­æ·»åŠ ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¹Ÿç›‘å¬simple.queueï¼š1234567891011121314@Componentpublic class SpringRabbitListener &#123; @RabbitListener(queues = &quot;simple.queue&quot;) public void listenWorkQueue1(String msg) throws InterruptedException &#123; System.out.println(&quot;æ¶ˆè´¹è€…1æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot; + LocalTime.now()); Thread.sleep(20); &#125; @RabbitListener(queues = &quot;simple.queue&quot;) public void listenWorkQueue2(String msg) throws InterruptedException &#123; System.err.println(&quot;æ¶ˆè´¹è€…2........æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot; + LocalTime.now()); Thread.sleep(200); &#125;&#125; ç„¶åæˆ‘ä»¬ä¿®æ”¹ymlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹12345spring: rabbitmq: listener: simple: prefetch: 1 #æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯ ç„¶åæˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ ä¸¤ä¸ªæ¶ˆè´¹è€…å°±ä¼šäº¤æ›¿è·å–ä¿¡æ¯ï¼Œè€Œç¡çœ 20æ¯«ç§’çš„ç”¨æˆ·ä¼šæ¯”ç¡çœ 200æ¯«ç§’çš„ç”¨æˆ·è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚ 4.4ã€å‘å¸ƒï¼ˆ Publish ï¼‰ã€è®¢é˜…ï¼ˆ Subscribe ï¼‰å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸ä¹‹å‰æ¡ˆä¾‹çš„åŒºåˆ«å°±æ˜¯å…è®¸å°†åŒä¸€æ¶ˆæ¯å‘é€ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚å®ç°æ–¹å¼æ˜¯åŠ å…¥äº†exchangeï¼ˆäº¤æ¢æœºï¼‰ã€‚å¸¸è§exchangeç±»å‹åŒ…æ‹¬ï¼š Fanoutï¼šå¹¿æ’­ Directï¼šè·¯ç”± Topicï¼šè¯é¢˜ æ³¨æ„ï¼šexchangeè´Ÿè´£æ¶ˆæ¯è·¯ç”±ï¼Œè€Œä¸æ˜¯å­˜å‚¨ï¼Œè·¯ç”±å¤±è´¥åˆ™æ¶ˆæ¯ä¸¢å¤± 4.4.1ã€å‘å¸ƒè®¢é˜…-Fanout ExchangeFanout Exchange ä¼šå°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯å¹¿æ’­åˆ°æ¯ä¸€ä¸ªè·Ÿå…¶ç»‘å®šçš„queue å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨consumeræœåŠ¡å£°æ˜Exchangeã€Queueã€Bindingåœ¨consumeræœåŠ¡å¸¸è§ä¸€ä¸ªç±»ï¼Œæ·»åŠ @Configuration æ³¨è§£ï¼Œå¹¶å£°æ˜FanoutExchangeã€Queueå’Œç»‘å®šå…³ç³»å¯¹è±¡Binding123456789101112131415161718192021222324252627282930313233343536@Configurationpublic class FanoutConfig &#123; // itcast.fanout @Bean public FanoutExchange fanoutExchange()&#123; return new FanoutExchange(&quot;itcast.fanout&quot;); &#125; // fanout.queue1 @Bean public Queue fanoutQueue1()&#123; return new Queue(&quot;fanout.queue1&quot;); &#125; // ç»‘å®šé˜Ÿåˆ—1åˆ°äº¤æ¢æœº @Bean public Binding fanoutBinding1(Queue fanoutQueue1, FanoutExchange fanoutExchange)&#123; return BindingBuilder .bind(fanoutQueue1) .to(fanoutExchange); &#125; // fanout.queue2 @Bean public Queue fanoutQueue2()&#123; return new Queue(&quot;fanout.queue2&quot;); &#125; // ç»‘å®šé˜Ÿåˆ—2åˆ°äº¤æ¢æœº @Bean public Binding fanoutBinding2(Queue fanoutQueue2, FanoutExchange fanoutExchange)&#123; return BindingBuilder .bind(fanoutQueue2) .to(fanoutExchange); &#125;&#125; åœ¨consumeræœåŠ¡çš„SpringRabbitListenerç±»ä¸­ï¼Œæ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬fanout.queue1å’Œfanout.queue21234567891011@Componentpublic class SpringRabbitListener &#123; @RabbitListener(queues = &quot;fanout.queue1&quot;) public void listenFanoutQueue1(String msg) &#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°fanout.queue1çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125; @RabbitListener(queues = &quot;fanout.queue2&quot;) public void listenFanoutQueue2(String msg) &#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°fanout.queue2çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125;&#125; åœ¨publisheræœåŠ¡å‘é€æ¶ˆæ¯åˆ°FanoutExchange123456789@Test public void testSendFanoutExchange() &#123; // äº¤æ¢æœºåç§° String exchangeName = &quot;itcast.fanout&quot;; // æ¶ˆæ¯ String message = &quot;hello, every one!&quot;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, &quot;&quot;, message); &#125; æµ‹è¯•ï¼Œæ­¤æ—¶ä¸¤ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šå—åˆ°è¿™æ¡æ¶ˆæ¯ 4.4.2ã€å‘å¸ƒè®¢é˜…-DirectExchangeDirect Exchange ä¼šå°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ ¹æ®è§„åˆ™è·¯ç”±åˆ°æŒ‡å®šçš„Queueï¼Œå› æ­¤ç§°ä¸ºè·¯ç”±æ¨¡å¼ï¼ˆroutesï¼‰ã€‚ æ¯ä¸€ä¸ªQueueéƒ½ä¸Exchangeè®¾ç½®ä¸€ä¸ªBindingKey å‘å¸ƒè€…å‘é€æ¶ˆæ¯æ—¶ï¼ŒæŒ‡å®šæ¶ˆæ¯çš„RoutingKey Exchangeå°†æ¶ˆæ¯è·¯ç”±åˆ°BindingKeyä¸æ¶ˆæ¯RoutingKeyä¸€è‡´çš„é˜Ÿåˆ— å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨consumeræœåŠ¡ä¸­ï¼Œç¼–å†™ä¸¤ä¸ªæ¶ˆè´¹è€…æ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬direct.queue1å’Œdirect.queue2ã€‚å¹¶åˆ©ç”¨@RabbitListenerå£°æ˜Exchangeã€Queueã€RoutingKey 1234567891011121314151617@RabbitListener(bindings = @QueueBinding( value = @Queue(name = &quot;direct.queue1&quot;), exchange = @Exchange(name = &quot;itcast.direct&quot;, type = ExchangeTypes.DIRECT), key = &#123;&quot;red&quot;, &quot;blue&quot;&#125; )) public void listenDirectQueue1(String msg)&#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125; @RabbitListener(bindings = @QueueBinding( value = @Queue(name = &quot;direct.queue2&quot;), exchange = @Exchange(name = &quot;itcast.direct&quot;, type = ExchangeTypes.DIRECT), key = &#123;&quot;red&quot;, &quot;yellow&quot;&#125; )) public void listenDirectQueue2(String msg)&#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125; åœ¨publisheræœåŠ¡å‘é€æ¶ˆæ¯åˆ°DirectExchange123456789@Test public void testSendDirectExchange() &#123; // äº¤æ¢æœºåç§° String exchangeName = &quot;itcast.direct&quot;; // æ¶ˆæ¯ String message = &quot;hello, red!&quot;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, &quot;red&quot;, message); &#125; æµ‹è¯•å¦‚ä¸‹ï¼šä¸¤ä¸ªéƒ½èƒ½æ”¶åˆ°redçš„æ¶ˆæ¯ï¼Œè€Œæˆ‘ä»¬ç°åœ¨æ¢ä¸€ç§å‘é€æ¶ˆæ¯çš„æ–¹å¼çœ‹çœ‹ï¼Œå‘é€ä¸€ä¸ªblueçš„æ¶ˆæ¯ï¼ŒæŒ‰ç…§è§„å®šdirect.queue2åº”è¯¥æ˜¯æ²¡æœ‰æ¶ˆæ¯çš„ã€‚ç¡®å®æ˜¯è¿™ä¸ªæ ·å­ã€‚ 4.4.3ã€å‘å¸ƒè®¢é˜…-TopicExchangeTopicExchangeä¸DirectExchangeç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºroutingKeyå¿…é¡»æ˜¯å¤šä¸ªå•è¯çš„åˆ—è¡¨ï¼Œå¹¶ä¸”ä»¥ . åˆ†å‰²ã€‚Queueä¸ExchangeæŒ‡å®šBindingKeyæ—¶å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼š #ï¼šä»£æŒ‡0ä¸ªæˆ–å¤šä¸ªå•è¯ *ï¼šä»£æŒ‡ä¸€ä¸ªå•è¯ å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨consumeræœåŠ¡ä¸­ï¼Œç¼–å†™ä¸¤ä¸ªæ¶ˆè´¹è€…æ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬topic.queue1å’Œtopic.queue2ã€‚å¹¶åˆ©ç”¨@RabbitListenerå£°æ˜Exchangeã€Queueã€RoutingKey1234567891011121314151617@RabbitListener(bindings = @QueueBinding( value = @Queue(name = &quot;topic.queue1&quot;), exchange = @Exchange(name = &quot;itcast.topic&quot;, type = ExchangeTypes.TOPIC), key = &quot;china.#&quot; )) public void listenTopicQueue1(String msg)&#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°topic.queue1çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125; @RabbitListener(bindings = @QueueBinding( value = @Queue(name = &quot;topic.queue2&quot;), exchange = @Exchange(name = &quot;itcast.topic&quot;, type = ExchangeTypes.TOPIC), key = &quot;#.news&quot; )) public void listenTopicQueue2(String msg)&#123; System.out.println(&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°topic.queue2çš„æ¶ˆæ¯ï¼šã€&quot; + msg + &quot;ã€‘&quot;); &#125; åœ¨publisheræœåŠ¡å‘é€æ¶ˆæ¯åˆ°TopicExchange123456789@Test public void testSendTopicExchange() &#123; // äº¤æ¢æœºåç§° String exchangeName = &quot;itcast.topic&quot;; // æ¶ˆæ¯ String message = &quot;ä¸­å›½æ–°é—»&quot;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, &quot;china.news&quot;, message); &#125; è¿›è¡Œæµ‹è¯•ï¼Œæ­¤æ—¶ä¸¤ä¸ªæ¶ˆè´¹è€…éƒ½èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ å¦‚æœä¿®æ”¹keyçš„å€¼ï¼Œåé¢ä¸ä¸ºnewsæ—¶ï¼Œtopic.queue2å°†æ— æ³•æ”¶åˆ°æ¶ˆæ¯ 123456789@Test public void testSendTopicExchange() &#123; // äº¤æ¢æœºåç§° String exchangeName = &quot;itcast.topic&quot;; // æ¶ˆæ¯ String message = &quot;ä¸­å›½æ–°é—»,ä¸€æ¡&quot;; // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(exchangeName, &quot;china.new&quot;, message); &#125; ç»“æœå¦‚ä¸‹ï¼š 4.5ã€SpringAMQP-æ¶ˆæ¯è½¬æ¢å™¨åœ¨SpringAMQPçš„å‘é€æ–¹æ³•ä¸­ï¼Œæ¥æ”¶æ¶ˆæ¯çš„ç±»å‹æ˜¯Objectï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å‘é€ä»»æ„å¯¹è±¡ç±»å‹çš„æ¶ˆæ¯ï¼ŒSpringAMQPä¼šå¸®æˆ‘ä»¬åºåˆ—åŒ–ä¸ºå­—èŠ‚åå‘é€ã€‚ æˆ‘ä»¬åœ¨consumerä¸­åˆ©ç”¨@Beanå£°æ˜ä¸€ä¸ªé˜Ÿåˆ—ï¼š 1234567@Configurationpublic class FanoutConfig &#123; @Bean public Queue objectQueue()&#123; return new Queue(&quot;object.queue&quot;); &#125;&#125; åœ¨publisherä¸­å‘é€æ¶ˆæ¯ä»¥æµ‹è¯•: 123456789@Test public void testSendMap() throws InterruptedException &#123; // å‡†å¤‡æ¶ˆæ¯ Map&lt;String,Object&gt; msg = new HashMap&lt;&gt;(); msg.put(&quot;name&quot;, &quot;Jack&quot;); msg.put(&quot;age&quot;, 21); // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(&quot;object.queue&quot;, msg); &#125; ä¼šå‘ç°åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­æˆ‘ä»¬ä¼ è¿‡å»çš„æ˜¯ä¸€å †ä¹±ç  å…¶å®å°±æ˜¯javaå°†æˆ‘ä»¬çš„æ¶ˆæ¯è¿›è¡Œäº†ä¸€ä¸ªåºåˆ—åŒ–æ¥è¿›è¡Œä¼ è¾“ï¼Œä½†æ˜¯è¿™æ ·å­ååˆ†ä¸å…·æœ‰å¯è¯»æ€§ï¼Œè€Œä¸”å­—ç¬¦ä¸²è¾ƒé•¿ï¼Œä¼šå½±å“åˆ°ä¼ è¾“çš„æ•ˆç‡ã€‚ Springçš„å¯¹æ¶ˆæ¯å¯¹è±¡çš„å¤„ç†æ˜¯ç”±org.springframework.amqp.support.converter.MessageConverteræ¥å¤„ç†çš„ã€‚è€Œé»˜è®¤å®ç°æ˜¯SimpleMessageConverterï¼ŒåŸºäºJDKçš„ObjectOutputStreamå®Œæˆåºåˆ—åŒ–ã€‚å¦‚æœè¦ä¿®æ”¹åªéœ€è¦å®šä¹‰ä¸€ä¸ªMessageConverter ç±»å‹çš„Beanå³å¯ã€‚æ¨èç”¨JSONæ–¹å¼åºåˆ—åŒ–ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼•å…¥jsonçš„ä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&lt;/dependency&gt; publisheræœåŠ¡å£°æ˜MessageConverterï¼ˆå¯ä»¥æ”¾åœ¨å¯åŠ¨ç±»ä¸Šï¼‰1234@Bean public MessageConverter messageConverter()&#123; return new Jackson2JsonMessageConverter(); &#125; ç„¶åæˆ‘ä»¬è¿›è¡Œæµ‹è¯• æ­¤æ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯å°±å¾ˆæœ‰å¯è¯»æ€§äº†ã€‚ 5ã€æ€»ç»“ä»¥ä¸Šå°±æ˜¯æˆ‘å¯¹RabbirMQå…¥é—¨å­¦ä¹ çš„ä¸€ä¸ªæ€»ç»“ï¼Œè¿˜æœ‰å¾ˆå¤šçš„å†…å®¹éœ€è¦å»å­¦ä¹ ï¼Œä»¥åå­¦åˆ°äº†ä¼šç»§ç»­è¡¥å……ã€‚s","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"java/æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://cyc0819.top/categories/java/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://cyc0819.top/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"}]},{"title":"Swagger3å…¥é—¨ä½¿ç”¨","slug":"2021-10-05-Swagger3å…¥é—¨ä½¿ç”¨","date":"2021-10-05T01:57:56.000Z","updated":"2021-12-08T09:30:34.938Z","comments":false,"path":"2021/10/05/2021-10-05-Swagger3å…¥é—¨ä½¿ç”¨/","link":"","permalink":"http://cyc0819.top/2021/10/05/2021-10-05-Swagger3%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/","excerpt":"","text":"Swagger3å…¥é—¨ä½¿ç”¨1ã€Swagger3ç®€ä»‹Swagger æ˜¯ä¸€å¥—åŸºäº OpenAPI è§„èŒƒï¼ˆOpenAPI Specificationï¼ŒOASï¼‰æ„å»ºçš„å¼€æºå·¥å…·ï¼Œåæ¥æˆä¸ºäº† Open API æ ‡å‡†çš„ä¸»è¦å®šä¹‰è€…ã€‚å¯¹äº Rest API æ¥è¯´å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†å†…å®¹å°±æ˜¯æ–‡æ¡£ï¼ŒSwagger ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—é€šè¿‡ä»£ç å’Œæ³¨è§£è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£çš„æ–¹æ³•ï¼Œè¿™ä¸€ç‚¹å¯¹äºä¿è¯API æ–‡æ¡£çš„åŠæ—¶æ€§å°†æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ swagger2äº17å¹´åœæ­¢ç»´æŠ¤ï¼Œç°åœ¨æœ€æ–°çš„ç‰ˆæœ¬ä¸º17å¹´å‘å¸ƒçš„ Swagger3ï¼ˆOpen Api3ï¼‰ 2. Swagger3ä¸Swagger2.xæ¯”è¾ƒ åº”ç”¨ä¸»ç±»æ·»åŠ æ³¨è§£@EnableOpenApi (swagger2æ˜¯@EnableSwagger2) swaggeré…ç½®ç±»SwaggerProperties.classï¼Œä¸swagger2.xx ç‰ˆæœ¬æœ‰å·®å¼‚ï¼Œå…·ä½“çœ‹ä¸‹æ–‡ è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±» SwaggerConfiguration.class,çœ‹ä¸‹æ–‡ è®¿é—®åœ°å€ï¼šhttp://localhost:8080/swagger-ui/index.html (swagger2.xxç‰ˆæœ¬è®¿é—®çš„åœ°å€ä¸ºhttp://localhost:8080/swagger-ui.html) 3ã€SpringBootæ•´åˆSwagger33.1ã€å¼•å…¥ä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt;&lt;/dependency&gt; 3.2ã€åœ¨Controllerç±»ä¸Šæ·»åŠ æ³¨è§£Swaggeré€šè¿‡å‡ ä¸ªæ³¨è§£ï¼Œå°±èƒ½å®ç°apiçš„æ·»åŠ ã€‚ @Api ï¼šç”¨åœ¨controllerç±»ï¼Œæè¿°APIæ¥å£@EnableOpenApi :è¡¨ç¤ºå¼€å¯SwaggerApi@ApiOperation ï¼šæè¿°æ¥å£æ–¹æ³•@ApiModel ï¼šæè¿°å¯¹è±¡@ApiModelProperty ï¼šæè¿°å¯¹è±¡å±æ€§@ApiImplicitParams ï¼šæè¿°æ¥å£å‚æ•°@ApiResponses ï¼šæè¿°æ¥å£å“åº”@ApiIgnore ï¼šå¿½ç•¥æ¥å£æ–¹æ³•@ApiParam ï¼šä¸º Rest æ¥å£å‚æ•°æ·»åŠ å…¶å®ƒå…ƒæ•°æ® å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930@EnableOpenApi // ä¹Ÿå¯ä»¥ä¸å†™æ­¤æ³¨è§£@Api(description=&quot;è®²å¸ˆç®¡ç†&quot;)@RestController@RequestMapping(&quot;/admin/edu/teacher&quot;)public class MyController &#123; @Autowired private TeacherService teacherService; @ApiOperation(value = &quot;æ‰€æœ‰è®²å¸ˆåˆ—è¡¨&quot;) @GetMapping public List&lt;Teacher&gt; list()&#123; return teacherService.list(); &#125; @ApiOperation(value = &quot;æ ¹æ®IDåˆ é™¤è®²å¸ˆ&quot;) @DeleteMapping(&quot;&#123;id&#125;&quot;) public boolean removeById( @ApiParam(name = &quot;id&quot;, value = &quot;è®²å¸ˆID&quot;, required = true) @PathVariable String id)&#123; return teacherService.removeById(id); &#125; @ApiOperation(value = &quot;æŸ¥è¯¢æŸä¸ªè®²å¸ˆ&quot;) @GetMapping(&quot;/setlct/&#123;id&#125;&quot;) public Teacher teacher(@ApiParam(name = &quot;id&quot;, value = &quot;è®²å¸ˆID&quot;, required = true) @PathVariable String id)&#123; return teacherService.teacher(id); &#125;&#125; 3.3ã€è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»SwaggerProperties.class1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768@Component@ConfigurationProperties(&quot;swagger&quot;)public class SwaggerProperties &#123; /** * æ˜¯å¦å¼€å¯swaggerï¼Œç”Ÿäº§ç¯å¢ƒä¸€èˆ¬å…³é—­ï¼Œæ‰€ä»¥è¿™é‡Œå®šä¹‰ä¸€ä¸ªå˜é‡ */ private Boolean enable; /** * é¡¹ç›®åº”ç”¨å */ private String applicationName; /** * é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯ */ private String applicationVersion; /** * é¡¹ç›®æè¿°ä¿¡æ¯ */ private String applicationDescription; /** * æ¥å£è°ƒè¯•åœ°å€ */ private String tryHost; public Boolean getEnable() &#123; return enable; &#125; public void setEnable(Boolean enable) &#123; this.enable = enable; &#125; public String getApplicationName() &#123; return applicationName; &#125; public void setApplicationName(String applicationName) &#123; this.applicationName = applicationName; &#125; public String getApplicationVersion() &#123; return applicationVersion; &#125; public void setApplicationVersion(String applicationVersion) &#123; this.applicationVersion = applicationVersion; &#125; public String getApplicationDescription() &#123; return applicationDescription; &#125; public void setApplicationDescription(String applicationDescription) &#123; this.applicationDescription = applicationDescription; &#125; public String getTryHost() &#123; return tryHost; &#125; public void setTryHost(String tryHost) &#123; this.tryHost = tryHost; &#125;&#125; 3.4ã€è‡ªå®šä¹‰springfox swagger3é…ç½®ç±»SwaggerConfiguration.class123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119import io.swagger.models.auth.In;import org.apache.commons.lang3.reflect.FieldUtils;import org.springframework.boot.SpringBootVersion;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.util.ReflectionUtils;import org.springframework.web.servlet.config.annotation.InterceptorRegistration;import org.springframework.web.servlet.config.annotation.InterceptorRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;import springfox.documentation.builders.ApiInfoBuilder;import springfox.documentation.builders.PathSelectors;import springfox.documentation.builders.RequestHandlerSelectors;import springfox.documentation.oas.annotations.EnableOpenApi;import springfox.documentation.service.*;import springfox.documentation.spi.DocumentationType;import springfox.documentation.spi.service.contexts.SecurityContext;import springfox.documentation.spring.web.plugins.Docket;import java.lang.reflect.Field;import java.util.*;@Configurationpublic class SwaggerConfiguration implements WebMvcConfigurer &#123; private final SwaggerProperties swaggerProperties; public SwaggerConfiguration(SwaggerProperties swaggerProperties) &#123; this.swaggerProperties = swaggerProperties; &#125; @Bean public Docket createRestApi() &#123; return new Docket(DocumentationType.OAS_30).pathMapping(&quot;/&quot;) // å®šä¹‰æ˜¯å¦å¼€å¯swaggerï¼Œfalseä¸ºå…³é—­ï¼Œå¯ä»¥é€šè¿‡å˜é‡æ§åˆ¶ .enable(swaggerProperties.getEnable()) // å°†apiçš„å…ƒä¿¡æ¯è®¾ç½®ä¸ºåŒ…å«åœ¨json ResourceListingå“åº”ä¸­ã€‚ .apiInfo(apiInfo()) // æ¥å£è°ƒè¯•åœ°å€ .host(swaggerProperties.getTryHost()) // é€‰æ‹©å“ªäº›æ¥å£ä½œä¸ºswaggerçš„docå‘å¸ƒ .select() .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build() // æ”¯æŒçš„é€šè®¯åè®®é›†åˆ .protocols(newHashSet(&quot;https&quot;, &quot;http&quot;)) // æˆæƒä¿¡æ¯è®¾ç½®ï¼Œå¿…è¦çš„header tokenç­‰è®¤è¯ä¿¡æ¯ .securitySchemes(securitySchemes()) // æˆæƒä¿¡æ¯å…¨å±€åº”ç”¨ .securityContexts(securityContexts()); &#125; /** * API é¡µé¢ä¸ŠåŠéƒ¨åˆ†å±•ç¤ºä¿¡æ¯ */ private ApiInfo apiInfo() &#123; return new ApiInfoBuilder().title(swaggerProperties.getApplicationName() + &quot; Api Doc&quot;) .description(swaggerProperties.getApplicationDescription()) .contact(new Contact(&quot;lighter&quot;, null, &quot;123456@gmail.com&quot;)) .version(&quot;Application Version: &quot; + swaggerProperties.getApplicationVersion() + &quot;, Spring Boot Version: &quot; + SpringBootVersion.getVersion()) .build(); &#125; /** * è®¾ç½®æˆæƒä¿¡æ¯ */ private List&lt;SecurityScheme&gt; securitySchemes() &#123; ApiKey apiKey = new ApiKey(&quot;BASE_TOKEN&quot;, &quot;token&quot;, In.HEADER.toValue()); return Collections.singletonList(apiKey); &#125; /** * æˆæƒä¿¡æ¯å…¨å±€åº”ç”¨ */ private List&lt;SecurityContext&gt; securityContexts() &#123; return Collections.singletonList( SecurityContext.builder() .securityReferences(Collections.singletonList(new SecurityReference(&quot;BASE_TOKEN&quot;, new AuthorizationScope[]&#123;new AuthorizationScope(&quot;global&quot;, &quot;&quot;)&#125;))) .build() ); &#125; @SafeVarargs private final &lt;T&gt; Set&lt;T&gt; newHashSet(T... ts) &#123; if (ts.length &gt; 0) &#123; return new LinkedHashSet&lt;&gt;(Arrays.asList(ts)); &#125; return null; &#125; /** * é€šç”¨æ‹¦æˆªå™¨æ’é™¤swaggerè®¾ç½®ï¼Œæ‰€æœ‰æ‹¦æˆªå™¨éƒ½ä¼šè‡ªåŠ¨åŠ swaggerç›¸å…³çš„èµ„æºæ’é™¤ä¿¡æ¯ */ @SuppressWarnings(&quot;unchecked&quot;) @Override public void addInterceptors(InterceptorRegistry registry) &#123; try &#123; Field registrationsField = FieldUtils.getField(InterceptorRegistry.class, &quot;registrations&quot;, true); List&lt;InterceptorRegistration&gt; registrations = (List&lt;InterceptorRegistration&gt;) ReflectionUtils.getField(registrationsField, registry); if (registrations != null) &#123; for (InterceptorRegistration interceptorRegistration : registrations) &#123; interceptorRegistration .excludePathPatterns(&quot;/swagger**/**&quot;) .excludePathPatterns(&quot;/webjars/**&quot;) .excludePathPatterns(&quot;/v3/**&quot;) .excludePathPatterns(&quot;/doc.html&quot;); &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; 4ã€æµ‹è¯•å®Œæˆä¸Šè¿°çš„ç¼–å†™ä¹‹åå¯ä»¥æ‰“å¼€ä¸‹é¢çš„åœ°å€æŸ¥çœ‹æ˜¯å¦æˆåŠŸåˆ›å»º 1http://localhost:8080/swagger-ui/index.html æˆåŠŸæ˜¾ç¤ºå¦‚ä¸‹","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"Swagger","slug":"java/Swagger","permalink":"http://cyc0819.top/categories/java/Swagger/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"Swagger","slug":"Swagger","permalink":"http://cyc0819.top/tags/Swagger/"}]},{"title":"ç®—æ³•å­¦ä¹ _æœ€å°æ ˆ","slug":"2021-10-04-ç®—æ³•å­¦ä¹ _æœ€å°æ ˆ","date":"2021-10-03T16:05:20.000Z","updated":"2021-12-08T09:30:05.039Z","comments":false,"path":"2021/10/04/2021-10-04-ç®—æ³•å­¦ä¹ _æœ€å°æ ˆ/","link":"","permalink":"http://cyc0819.top/2021/10/04/2021-10-04-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E6%9C%80%E5%B0%8F%E6%A0%88/","excerpt":"","text":"æœ€å°æ ˆé¢˜ç›®lettcode-155é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯é¢˜ç›®åŸºæœ¬ä¸Šå°±æ˜¯è¦æ±‚æ‰¾å‡ºä¸€ä¸ªæ ˆä¸­æœ€å°çš„å€¼ï¼Œé€šè¿‡javaä¸­å†…ç½®çš„æ ˆçš„æ–¹æ³•å³å¯å®ç°è¿™ä¸€ç›®æ ‡ é¦–å…ˆæˆ‘çš„æƒ³æ³•æ˜¯é€šè¿‡éå†æ¯”è¾ƒæ‰€æœ‰çš„å€¼æ¥æ‰¾å‡ºæœ€å°çš„é‚£ä¸ªå€¼ï¼Œä½†æ˜¯è¿™æ ·å­æ¶ˆè€—äº†è¾ƒå¤šçš„æ—¶é—´ï¼Œè€Œä¸”é¢˜ç›®å¸Œæœ›æ˜¯è®¾è®¡ä¸€ç§æ ˆçš„ç»“æ„ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨æ ˆçš„æ–¹æ³•ã€‚ æ‰€ä»¥åé¢æ¢äº†ä¸€ç§æ–°çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨é“¾è¡¨æ¥å®ç°ï¼Œè¿™æ ·å­çš„æ•ˆç‡æ˜¯è¾ƒé«˜çš„ï¼Œç›¸æ¯”äºä¹‹å‰çš„æ–¹æ³•ï¼Œç”¨æ—¶æ•´æ•´å°‘äº†200å¤šæ¯«ç§’ å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ å…·ä½“ä»£ç (ç¬¬ä¸€ç§æ€è·¯)123456789101112131415161718192021222324252627282930class MinStack &#123; Stack&lt;Integer&gt; stack; public MinStack() &#123; stack = new Stack&lt;Integer&gt;(); &#125; public void push(int val) &#123; stack.push(val); &#125; public void pop() &#123; stack.pop(); &#125; public int top() &#123; return stack.peek(); &#125; public int getMin() &#123; int min=stack.get(0);; for (int i=0;i&lt;stack.size();i++)&#123; if (stack.get(i)&lt;min)&#123; min=stack.get(i); &#125; &#125; return min; &#125;&#125; å…·ä½“ä»£ç (ç¬¬äºŒç§æ€è·¯)123456789101112131415161718192021222324252627282930313233343536373839class MinStack &#123; private Node head; public void push(int x) &#123; if(head == null) head = new Node(x, x); else head = new Node(x, Math.min(x, head.min), head); &#125; public void pop() &#123; head = head.next; &#125; public int top() &#123; return head.val; &#125; public int getMin() &#123; return head.min; &#125; private class Node &#123; int val; int min; Node next; private Node(int val, int min) &#123; this(val, min, null); &#125; private Node(int val, int min, Node next) &#123; this.val = val; this.min = min; this.next = next; &#125; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•å­¦ä¹ _è®¾è®¡hashé›†åˆã€hashæ˜ å°„","slug":"2021-10-03-ç®—æ³•å­¦ä¹ _è®¾è®¡hashé›†åˆã€hashæ˜ å°„","date":"2021-10-03T14:21:21.000Z","updated":"2021-12-08T09:30:00.187Z","comments":false,"path":"2021/10/03/2021-10-03-ç®—æ³•å­¦ä¹ _è®¾è®¡hashé›†åˆã€hashæ˜ å°„/","link":"","permalink":"http://cyc0819.top/2021/10/03/2021-10-03-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E8%AE%BE%E8%AE%A1hash%E9%9B%86%E5%90%88%E3%80%81hash%E6%98%A0%E5%B0%84/","excerpt":"","text":"è®¾è®¡hashé›†åˆã€hashæ˜ å°„é¢˜ç›®1lettcode-705é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯æ—¢ç„¶è¯´æ˜¯ä¸€ä¸ªHashSetï¼Œæ‰€ä»¥ä»–å°±æ˜¯ä¸€ä¸ªä¸å¯é‡å¤çš„é›†åˆï¼Œå°±æ„å‘³ç€åœ¨è¯¥é›†åˆä¸­æ¯ä¸ªå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ‰€ä»¥è¯´æˆ‘ä»¬å°±å¯ä»¥ç”¨booleanç±»å‹çš„æ•°ç»„æ¥æ¨¡æ‹Ÿå‡ºè¿™æ ·çš„ä¸€ä¸ªé›†åˆ æ•°ç»„çš„ç´¢å¼•å°±å¯¹åº”äº†setçš„keyï¼Œæ•°ç»„æ‰€å¯¹åº”çš„å¸ƒå°”å€¼å°±æ˜¯setçš„valueï¼Œå½“å…¶ä¸ºtrue1æ—¶å°±è¯´æ˜å­˜åœ¨ï¼Œå¦åˆ™å°±æ˜¯ä¸å­˜åœ¨ å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ å…·ä½“ä»£ç 123456789101112131415161718192021222324class MyHashSet &#123; //åˆ›å»ºä¸€ä¸ªbooleanç±»å‹çš„æ•°ç»„ boolean[] map=null; public MyHashSet() &#123; map=new boolean[1000001]; &#125; public void add(int key) &#123; map[key]=true; &#125; public void remove(int key) &#123; map[key]=false; &#125; public boolean contains(int key) &#123; if (map[key]==true)&#123; return true; &#125;else &#123; return false; &#125; &#125;&#125; é¢˜ç›®2lettcode-706é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯ä»é¢˜ç›®ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥è·Ÿä¸Šä¸€é¢˜å·®ä¸å¤šï¼Œæ— éæ˜¯ä¸€ä¸ªsetä¸€ä¸ªmapçš„å·®åˆ« é˜…è¯»é¢˜ç›®è¦æ±‚æˆ‘ä»¬å¯ä»¥çŸ¥é“å¯¹åº”çš„keyå’Œvalue éƒ½æ˜¯int ç±»å‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªintç±»å‹çš„æ•°ç»„æ¥å­˜å‚¨æ•°æ® å–å€¼çš„æ—¶å€™å¦‚æœå–å€¼ä¸ºç©ºå°±è¿”å›ä¸€ä¸ª-1 ï¼Œæ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å€¼ å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ å…·ä½“ä»£ç 12345678910111213141516171819202122232425class MyHashMap &#123; // åˆ›å»ºä¸€ä¸ªintç±»å‹çš„æ•°ç»„ Integer[] map=null; public MyHashMap() &#123; map=new Integer[1000001]; &#125; public void put(int key, int value) &#123; map[key]=value; &#125; public int get(int key) &#123; if (map[key]!=null)&#123; int value=map[key]; return value; &#125;else&#123; return -1; &#125; &#125; public void remove(int key) &#123; map[key]=null; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"SpringCloudå¾®æœåŠ¡å…¥é—¨","slug":"2021-10-03-SpringCloudå¾®æœåŠ¡å…¥é—¨","date":"2021-10-03T05:44:20.000Z","updated":"2021-12-08T09:30:21.245Z","comments":false,"path":"2021/10/03/2021-10-03-SpringCloudå¾®æœåŠ¡å…¥é—¨/","link":"","permalink":"http://cyc0819.top/2021/10/03/2021-10-03-SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%85%A5%E9%97%A8/","excerpt":"","text":"SpringCloudå¾®æœåŠ¡å…¥é—¨1ã€å¾®æœåŠ¡çš„å‘å±•å†ç¨‹1.1ã€å•ä½“ç»“æ„ç®€ä»‹ï¼šå°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„å­¦ç”Ÿç®¡ç†ç³»ç»ŸåŸºæœ¬éƒ½æ˜¯å•ä½“ç»“æ„ä¼˜ç‚¹ï¼šç»“æ„ç®€å•ã€éƒ¨ç½²æˆæœ¬ä½ç¼ºç‚¹ï¼šè€¦åˆåº¦é«˜ 1.2ã€åˆ†å¸ƒå¼ç»“æ„ç®€ä»‹ï¼šæ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ï¼Œç§°ä¸ºä¸€ä¸ªæœåŠ¡ã€‚ä¼˜ç‚¹ï¼šé™ä½æœåŠ¡è€¦åˆã€æœ‰åˆ©äºæœåŠ¡å‡çº§æ‹“å±•åˆ†å¸ƒå¼æ¶æ„çš„è¦è€ƒè™‘çš„é—®é¢˜ï¼šæœåŠ¡æ‹†åˆ†ç²’åº¦å¦‚ä½•ï¼ŸæœåŠ¡é›†ç¾¤åœ°å€å¦‚ä½•ç»´æŠ¤ï¼ŸæœåŠ¡ä¹‹é—´å¦‚ä½•å®ç°è¿œç¨‹è°ƒç”¨ï¼ŸæœåŠ¡å¥åº·çŠ¶æ€å¦‚ä½•æ„ŸçŸ¥ï¼Ÿ 1.3ã€å¾®æœåŠ¡æ¶æ„ç®€ä»‹ï¼šå¾®æœåŠ¡æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½æ¶æ„è®¾è®¡çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆã€‚ä¼˜ç‚¹ï¼šæ‹†åˆ†ç²’åº¦æ›´å°ã€æœåŠ¡æ›´ç‹¬ç«‹ã€è€¦åˆåº¦æ›´ä½ç¼ºç‚¹ï¼šæ¶æ„éå¸¸å¤æ‚ï¼Œè¿ç»´ã€ç›‘æ§ã€éƒ¨ç½²éš¾åº¦æé«˜å¾®æœåŠ¡æ¶æ„çš„ç‰¹å¾ï¼š å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ï¼Œé¿å…é‡å¤ä¸šåŠ¡å¼€å‘ é¢å‘æœåŠ¡ï¼šå¾®æœåŠ¡å¯¹å¤–æš´éœ²ä¸šåŠ¡æ¥å£ è‡ªæ²»ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ã€éƒ¨ç½²ç‹¬ç«‹ éš”ç¦»æ€§å¼ºï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜ 2ã€ä½¿ç”¨SpringCloudSpringCloudå¹¶ä¸æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œå…¶å®ä»–æ˜¯ä¸€ä¸ªå°†å…¶ä»–å¼€æºçš„æ¡†æ¶é›†åˆçš„ä¸€ä¸ªå¤§ç¯®å­å¾—ç›ŠäºSpringBootæ¡†æ¶æ–¹ä¾¿çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¾ˆè½»æ¾åœ°åœ¨SpringBootä¸Šæ•´åˆSpriongCloudçš„æ¨¡å—ä»¥ä¸‹æ˜¯SpringBootå’ŒSpringCloudçš„ç‰ˆæœ¬åŒ¹é…è¡¨ï¼Œå¦‚æœä¸æŒ‰ç…§è¿™ä¸ªè§„åˆ™ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å¾ˆå¤šå¥‡æ€ªçš„é—®é¢˜ 2.1ã€æœåŠ¡æ‹†åˆ†å½“æˆ‘ä»¬ä½¿ç”¨å¾®æœåŠ¡æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯ç›¸å½“äºæŠŠåŸæœ¬åœ¨ä¸€èµ·çš„æ¨¡å—æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„å°çš„æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿›è¡ŒæœåŠ¡æ‹†åˆ†æ—¶å¿…é¡»æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š å•ä¸€èŒè´£ï¼šä¸åŒå¾®æœåŠ¡ï¼Œä¸è¦é‡å¤å¼€å‘ç›¸åŒä¸šåŠ¡ æ•°æ®ç‹¬ç«‹ï¼šä¸è¦è®¿é—®å…¶å®ƒå¾®æœåŠ¡çš„æ•°æ®åº“ é¢å‘æœåŠ¡ï¼šå°†è‡ªå·±çš„ä¸šåŠ¡æš´éœ²ä¸ºæ¥å£ï¼Œä¾›å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨ 2.2ã€æœåŠ¡è°ƒç”¨å½“æˆ‘ä»¬æˆåŠŸæ‹†åˆ†å‡ºä¸¤ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œè‚¯å®šä¼šå‡ºç°Aè°ƒç”¨Bï¼ŒBè°ƒç”¨Cçš„æƒ…å†µå‡ºç°ï¼Œè€Œæ­¤æ—¶æˆ‘ä»¬æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªæ–¹æ³•å°±æ˜¯æ ¹æ®æœåŠ¡çš„IPåœ°å€å’Œç«¯å£è¿›è¡Œè°ƒç”¨ã€‚ ä½†æ˜¯æ­¤æ—¶ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå®é™…æƒ…å†µä¸­æˆ‘ä»¬ä¸€ä¸ªæœåŠ¡è‚¯å®šä¸åªæ˜¯åªæœ‰ä¸€ä¸ªåœ°å€ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä¸€æ ·çš„æœåŠ¡ï¼Œä½œä¸ºè´Ÿè½½å‡è¡¡ã€‚ä½†æ˜¯å¦‚æœæ¯ä¸ªæœåŠ¡æˆ‘ä»¬éƒ½éœ€è¦é€šè¿‡IP+ç«¯å£çš„æ–¹å¼æ¥è¿æ¥ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæœåŠ¡çš„ç«¯å£æ—¶ï¼Œå°±è¦ç›¸åº”åœ°ä¿®æ”¹å¾ˆå¤šä¸ªè°ƒç”¨ä»–çš„ç«¯å£çš„æœåŠ¡ï¼Œæ˜¾ç„¶æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œè€Œä¸”ä¹Ÿä¸èƒ½å®ç°çœŸæ­£çš„è´Ÿè½½å‡è¡¡ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒæ¥ç»Ÿä¸€ç®¡ç†æˆ‘ä»¬çš„æ‰€æœ‰æœåŠ¡ã€‚æ‰€ä»¥å°±æœ‰äº†eureka 2.3ã€eurekaæ³¨å†Œä¸­å¿ƒæ¶ˆè´¹è€…è¯¥å¦‚ä½•è·å–æœåŠ¡æä¾›è€…å…·ä½“ä¿¡æ¯ï¼Ÿ æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶å‘eurekaæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ eurekaä¿å­˜è¿™äº›ä¿¡æ¯ æ¶ˆè´¹è€…æ ¹æ®æœåŠ¡åç§°å‘eurekaæ‹‰å–æä¾›è€…ä¿¡æ¯ å¦‚æœæœ‰å¤šä¸ªæœåŠ¡æä¾›è€…ï¼Œæ¶ˆè´¹è€…è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ æœåŠ¡æ¶ˆè´¹è€…åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­æŒ‘é€‰ä¸€ä¸ª æ¶ˆè´¹è€…å¦‚ä½•æ„ŸçŸ¥æœåŠ¡æä¾›è€…å¥åº·çŠ¶æ€ï¼Ÿ æœåŠ¡æä¾›è€…ä¼šæ¯éš”30ç§’å‘EurekaServerå‘é€å¿ƒè·³è¯·æ±‚ï¼ŒæŠ¥å‘Šå¥åº·çŠ¶æ€ eurekaä¼šæ›´æ–°è®°å½•æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ æ¶ˆè´¹è€…å°±å¯ä»¥æ‹‰å–åˆ°æœ€æ–°çš„ä¿¡æ¯ ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªeurekaæ³¨å†Œä¸­å¿ƒï¼š æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®ï¼Œç„¶ååœ¨å…¶ä¸­å¼•å…¥ä¾èµ–ï¼š1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;&lt;/dependency&gt; åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableEurekaServeræ³¨è§£ ç„¶ååˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶Application.yml,åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹123456789server: port: 10086 #ç«¯å£spring: application: name: eurekaserver #æœåŠ¡åç§°eureka: client: service-url: defaultZone: http://127.0.0.1:10086/eureka/ # eurekaçš„åœ°å€ï¼Œå°†è‡ªå·±æ³¨å†Œåˆ°eurekaä¸­ ä»¥ä¸Šå°±æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªeurekaæ³¨å†Œä¸­å¿ƒï¼Œè¿è¡Œæ‰“å¼€ç«¯å£ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºå¥½çš„æ³¨å†Œä¸­å¿ƒ æ³¨å†ŒæˆåŠŸçš„æœåŠ¡ä¼šæ˜¾ç¤ºåœ¨Instances currently registered with Eurekaå¤„ æ¥ä¸‹æ¥æˆ‘ä»¬å°†å®¢æˆ·ç«¯æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒå» æˆ‘ä»¬åœ¨éœ€è¦åŠ å…¥çš„æœåŠ¡ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶åå†é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹1234567spring: application: name: orderserviceeureka: client: service-url: defaultZone: http://127.0.0.1:10086/eureka/ ä¸ä¸Šé¢ä¸€æ ·ï¼Œå°†è‡ªå·±æ³¨å†Œåˆ°äº†æ³¨å†Œä¸­å¿ƒä¸­ 2.4ã€eurekaæœåŠ¡è°ƒç”¨åœ¨æˆåŠŸå°†æœåŠ¡æ³¨å†Œåˆ°eurekaä¸­ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æœåŠ¡åæ¥æ›¿ä»£ç«¯å£åœ°å€å¯¹æœåŠ¡è¿›è¡Œè°ƒç”¨äº† 1String url = &quot;http://userservice/user/&quot; + order.getUserId(); ä½†è¿™ä¸æ˜¯ä¸€ä¸ªçœŸå®æœ‰æ•ˆçš„åœ°å€ï¼Œæ˜¯ä¸èƒ½ç›´æ¥è¿›è¡Œè®¿é—®çš„ï¼Œåªèƒ½é€šè¿‡eurekaè¿›è¡Œè®¿é—® 3ã€è´Ÿè½½å‡è¡¡3.1ã€è®¤è¯†è´Ÿè½½å‡è¡¡ä»¥ä¸‹æ˜¯è´Ÿè½½å‡è¡¡çš„ä¸€ä¸ªæµç¨‹å›¾ï¼ˆæ­¤æµç¨‹å›¾ä¹Ÿè§£é‡Šäº†å¦‚ä½•é€šè¿‡æœåŠ¡åè°ƒç”¨å¯¹åº”çš„æœåŠ¡ï¼‰ è´Ÿè½½å‡è¡¡ç®€å•æ¥è¯´å°±æ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªåŒåçš„æœåŠ¡ï¼Œä»–ä»¬åšçš„æ˜¯ä¸€æ ·çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„è¯·æ±‚ç»™ä»–ä»¬æ‰€æœ‰äººä¸€èµ·åˆ†æ‹…ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªäººæŠ—ä¸‹æ‰€æœ‰çš„è¯·æ±‚ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™è´Ÿè½½å‡è¡¡å°±èµ·åˆ°äº†ä½œç”¨ï¼Œæ ¹æ®ä¸åŒçš„è§„åˆ™ï¼Œè´Ÿè½½å‡è¡¡å¯ä»¥ä»¥ä¸åŒçš„ç­–ç•¥å¯¹è¯·æ±‚çš„æœåŠ¡è¿›è¡Œç®¡ç†ï¼Œå¯ä»¥æå¤§å‡å°æœåŠ¡å™¨çš„å‹åŠ›ã€‚ 3.2ã€è´Ÿè½½å‡è¡¡ç­–ç•¥ä»¥ä¸‹å°±æ˜¯è´Ÿè½½å‡è¡¡çš„ç­–ç•¥è§„åˆ™ é¥¥é¥¿åŠ è½½Ribboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚è€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š åœ¨ymlé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œå°±å¯ä»¥å¼€å¯é¥¥é¥¿åŠ è½½æ¨¡å¼ï¼š 1234ribbon: eager-load: enabled: true # å¼€å¯é¥¥é¥¿åŠ è½½ clients: userservice # æŒ‡å®šå¯¹userserviceè¿™ä¸ªæœåŠ¡é¥¥é¥¿åŠ è½½ 4ã€SpringCloud AlibabaSpring Cloud Alibaba æ˜¯é˜¿é‡Œå·´å·´æä¾›çš„å¾®æœåŠ¡å¼€å‘ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ˜¯é˜¿é‡Œå·´å·´å¼€æºä¸­é—´ä»¶ä¸ Spring Cloud ä½“ç³»çš„èåˆã€‚ Spring Cloud Alibabaåœ¨è‡ªèº«æœ‰å¾ˆå¤šæ–°çš„ç»„ä»¶ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å…¼å®¹SpringCloudNetflixçš„éƒ¨åˆ†ç»„ä»¶ï¼Œå¦‚eurekaã€zuulç­‰ç­‰ 4.1ã€æ³¨å†Œä¸­å¿ƒNacosNacosæ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œç°åœ¨æ˜¯SpringCloudä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯”EurekaåŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬å¾—å…ˆè¿›è¡Œå®‰è£…é¦–å…ˆå¾—å»Githubä¸Šä¸‹è½½Nacosçš„å‹ç¼©åŒ…,ç‚¹å‡»è·³è½¬ä¸‹è½½å®Œæˆåæ”¾åˆ°ä¸€ä¸ªæ²¡æœ‰ä¸­æ–‡çš„è·¯å¾„åœ¨binè·¯å¾„å¤„æ‰“å¼€cmdï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯è¿è¡ŒNacos 1startup.cmd -m standalone ä»¥ä¸‹æ˜¯è¿è¡ŒæˆåŠŸçš„æ ‡å¿—ç„¶åæˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€å’Œç«¯å£å°±å¯ä»¥è¿›å…¥åˆ°nacosé‡Œé¢å» å¯èƒ½æŠ¥é”™åœ¨å¯åŠ¨çš„æ—¶å€™ç¢°åˆ°ä»¥ä¸‹é”™è¯¯ 1åœ¨å¯åŠ¨æ—¶ç¢°è§è¿™ä¸ªæç¤ºï¼šæ­¤æ—¶ä¸åº”æœ‰ \\nacos&quot;\\logs\\java_heapdump.hprof -XX:-UseLargePages&quot; æ­¤æ—¶æˆ‘ä»¬æ‰“å¼€è‡ªå¸¦çš„ç¼–è¯‘å™¨ï¼Œå°†ä¸‹é¢çš„è¯­å¥æ³¨é‡Šæ‰ 1REM if %MODE% == &quot;cluster&quot; ( REM echo &quot;nacos is starting with cluster&quot; REM if %EMBEDDED_STORAGE% == &quot;embedded&quot; ( REM set &quot;NACOS_OPTS=-DembeddedStorage=true&quot; REM ) REM set &quot;NACOS_JVM_OPTS=-server -Xms2g -Xmx2g -Xmn1g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=%BASE_DIR%\\logs\\java_heapdump.hprof -XX:-UseLargePages&quot;REM ) å†æ¬¡è¿è¡Œå³å¯é€šè¿‡ 4.2ã€å°†æœåŠ¡æ³¨å†Œåˆ°Nacos åœ¨å¾®æœåŠ¡çš„çˆ¶å·¥ç¨‹æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹123456&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt; &lt;version&gt;2.2.6.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt;&lt;/dependency&gt; æ³¨é‡Šæ‰æ‰€æœ‰çš„eurekaä¾èµ–æ–‡ä»¶ æ·»åŠ Nacosä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶åä¿®æ”¹ymlæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰eurekaçš„åœ°å€ï¼Œæ·»åŠ ä¸ŠNacosçš„åœ°å€1234spring: cloud: nacos: server-addr: localhost:8848 # nacosæœåŠ¡åœ°å€ å¯åŠ¨æœåŠ¡å°±å¯ä»¥æ³¨å†Œåˆ°Nacosä¸­äº† 4.3ã€æœåŠ¡é›†ç¾¤æœåŠ¡è°ƒç”¨å°½å¯èƒ½é€‰æ‹©æœ¬åœ°é›†ç¾¤çš„æœåŠ¡ï¼Œè·¨é›†ç¾¤è°ƒç”¨å»¶è¿Ÿè¾ƒé«˜æœ¬åœ°é›†ç¾¤ä¸å¯è®¿é—®æ—¶ï¼Œå†å»è®¿é—®å…¶å®ƒé›†ç¾¤ ç°åœ¨æˆ‘ä»¬æ¥è®¾ç½®æœåŠ¡çš„é›†ç¾¤ é¦–å…ˆæˆ‘ä»¬åœ¨ymlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹çš„å†…å®¹ 12345spring: cloud: nacos: discovery: cluster-name: SH #cluster-nameå°±æ˜¯é›†ç¾¤çš„åç§° ç„¶åé‡æ–°è¿è¡Œå°±å¯ä»¥çœ‹åˆ°å˜åŒ– ç„¶ååœ¨order-serviceä¸­è®¾ç½®è´Ÿè½½å‡è¡¡çš„IRuleä¸ºNacosRuleï¼Œè¿™ä¸ªè§„åˆ™ä¼˜å…ˆä¼šå¯»æ‰¾ä¸è‡ªå·±åŒé›†ç¾¤çš„æœåŠ¡ 123userservice: ribbon: NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule # è´Ÿè½½å‡è¡¡è§„åˆ™ å½“æœ¬åœ°é›†ç¾¤æ­£å¸¸è¿è¡Œæ—¶ï¼ŒæœåŠ¡å°±ä¼šä¼˜å…ˆè°ƒç”¨æœ¬åœ°é›†ç¾¤çš„æœåŠ¡ï¼Œè€Œéšåå†è€ƒè™‘è¿œç¨‹é›†ç¾¤ 4.4ã€ç¯å¢ƒéš”ç¦» - namespaceNacosä¸­æœåŠ¡å­˜å‚¨å’Œæ•°æ®å­˜å‚¨çš„æœ€å¤–å±‚éƒ½æ˜¯ä¸€ä¸ªåä¸ºnamespaceçš„ä¸œè¥¿ï¼Œç”¨æ¥åšæœ€å¤–å±‚éš”ç¦» åœ¨nacosçš„æ§åˆ¶å¤ªæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ å¡«å†™å¥½å‘½åç©ºé—´çš„ä¿¡æ¯ï¼Œç„¶åå¤åˆ¶å‘½åç©ºé—´çš„ID ç„¶åä¿®æ”¹ymlæ–‡ä»¶ï¼Œæ·»åŠ å‘½åç©ºé—´çš„é…ç½®(æ·»åŠ æœ€åä¸€å¥) 1234567cloud: nacos: server-addr: localhost:8848 # nacosæœåŠ¡åœ°å€ discovery: cluster-name: HZ ephemeral: false namespace: 4d6ce343-9e1b-44df-a90f-2cf2b6b3d177 # devç¯å¢ƒ å¯åŠ¨æœåŠ¡å°±ä¼šçœ‹åˆ°ç›¸åº”çš„å˜åŒ– æ­¤æ—¶ä¸åŒç©ºé—´ä¸­çš„æœåŠ¡æ˜¯ä¸èƒ½ç›¸äº’è®¿é—®çš„ 5ã€Nacosé…ç½®ç®¡ç†5.1ã€Nacoså®ç°é…ç½®çš„ç®¡ç†Nacosæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥å°†ä¸ºæœåŠ¡çš„é…ç½®ç®¡ç†åˆ°è‡ªå·±çš„æ³¨å†Œä¸­å¿ƒå»ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿œç¨‹è°ƒç”¨ï¼Œæ¥ä½¿ç”¨è¿™äº›é…ç½®åœ¨è¿œç«¯çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯è¿™åˆæœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿç”¨å¤„å°±æ˜¯å½“æˆ‘ä»¬æœ‰ä¸€äº›éœ€è¦ä¿®æ”¹çš„å¼€å…³å‹é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä¿®æ”¹æ—¶ä¸å½±å“åˆ°ç¨‹åºçš„è¿è¡Œï¼Œåªè¦æˆ‘ä»¬å¯¹ç¨‹åºè¿›è¡Œäº†æ›´æ”¹ï¼Œå°±ä¼šè‡ªåŠ¨è¿›è¡Œé…ç½®ï¼Œä¹Ÿå«åšçƒ­éƒ¨ç½²ã€‚æ‰€ä»¥Nacosçš„é…ç½®ç®¡ç†å°±å¯ä»¥å®ç°è¿™æ ·çš„ä¸€ä¸ªåŠŸèƒ½ã€‚é‚£ä¹ˆè¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬è¿›å…¥åˆ°Nacosçš„é…ç½®ç®¡ç†ç•Œé¢ï¼Œæ‰“å¼€é…ç½®åˆ—è¡¨ï¼Œç‚¹å‡»å³ä¸Šè§’çš„+ åˆ›å»ºæ–°çš„é…ç½® å¦‚ä¸‹å›¾ä¸€æ ·é…ç½®å¥½æ–‡ä»¶ï¼Œç„¶åå¯ä»¥åœ¨ä¸‹é¢çš„é»‘è‰²è¾“å…¥æ¡†ä»¥yml æ–‡ä»¶çš„æ ¼å¼è¾“å…¥ä½ æƒ³è¦çš„é…ç½®å†…å®¹ï¼Œå®Œæˆä¹‹åç‚¹å‡»å‘å¸ƒå³å¯ ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å»javaä»£ç ä¸­è¿›è¡Œé…ç½®çš„æ‹‰å–äº† 5.2ã€é…ç½®çš„æ‹‰å–åˆ›å»ºå¥½äº†é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦å»javaä»£ç ä¸­å¯¹å…¶è¿›è¡Œæ‹‰å–ã€‚è€Œä»¥å¾€æˆ‘ä»¬è¿è¡Œå¾®æœåŠ¡æ—¶ç›´æ¥å°±ä¼šè¯»å– application.yml è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦‚ä½•åœ¨è¯»å–ä»–ä¹‹å‰å…ˆè¯»å–Nacosä¸Šçš„é…ç½®æ–‡ä»¶å‘¢ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ ä¸€ä¸ªä¼˜å…ˆçº§æ›´é«˜çš„é…ç½®æ–‡ä»¶bootstrap.yml ï¼Œåœ¨é‡Œé¢ç¼–å†™è¯»å–Nacosé…ç½®çš„é…ç½®ã€‚ é¦–å…ˆå¼•å…¥Nacosé…ç½®æ–‡ä»¶çš„ä¾èµ– 12345&lt;!--&lt;nacosé…ç½®ä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª bootstrap.yml ï¼Œé‡Œé¢å†™çš„æ˜¯æ‹‰å–è¿œç¨‹é…ç½®çš„ä»£ç  12345678910spring: application: name: userservice profiles: active: dev # ç¯å¢ƒ cloud: nacos: server-addr: localhost:8848 # nacosåœ°å€ config: file-extension: yaml # æ–‡ä»¶åç¼€å æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬è¯»å–äº† userservice-dev.yaml æ–‡ä»¶çš„å†…å®¹ ç„¶åæˆ‘ä»¬æ£€éªŒä¸€ä¸‹æ˜¯å¦èƒ½æ‹¿åˆ°è¿œç¨‹çš„é…ç½®ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„è¿œç¨‹é…ç½®æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„å†…å®¹ 12pattern: dateformat: yyyy/MM/dd HH:mm:ss ç„¶åæˆ‘ä»¬åœ¨Controlleræ–‡ä»¶ä¸­è·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œç„¶åè¾“å‡ºåˆ°å±å¹•ä¸Š 1234567@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)private String dateformat;@GetMapping(&quot;now&quot;)public String now()&#123; return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));&#125; å¦‚æœè¯»å–æˆåŠŸå±å¹•ä¸Šå°±ä¼šæŒ‰ç…§å‰é¢çš„æ ¼å¼è¾“å‡ºæ—¶é—´ 5.3ã€é…ç½®çƒ­æ›´æ–°æœ‰äº†é…ç½®æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨è¦æ¥é…ç½®çƒ­æ›´æ–°äº†ã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯é€šè¿‡æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡Œæ·»åŠ ï¼Œå°±æ˜¯ä»¥ä¸‹çš„è¿™ç§æ–¹æ³• åœ¨ @Value æ³¨å…¥çš„å˜é‡æ‰€åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ @RefreshScope å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨ @ConfigurationProperties æ³¨è§£æ¥å®ç°ã€‚ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª PatternProperties ç±»ï¼Œç„¶ååœ¨ä¸Šé¢æ ‡ä¸Š @ConfigurationProperties(prefix = &quot;pattern&quot;) ,@Component ,@Data ç­‰æ³¨è§£ã€‚ç„¶ååœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªç§æœ‰æˆå‘˜å˜é‡private String dateformat; ï¼Œç„¶åå…¶ä»–çš„æ§åˆ¶å™¨ä¸­å¯¹å…¶è¿›è¡Œæ³¨å…¥å¹¶è°ƒç”¨ï¼Œå°±å¯ä»¥å®ç°çƒ­æ›´æ–°ã€‚ 5.4ã€å¤šç¯å¢ƒé…ç½®å…±äº« è€Œåœ¨ä¸åŒå¾®æœåŠ¡ä¹‹é—´å¯ä»¥å…±äº«é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼š æ–¹å¼ä¸€123456789101112spring: application: name: userservice # æœåŠ¡åç§° profiles: active: dev # ç¯å¢ƒï¼Œ cloud: nacos: server-addr: localhost:8848 # Nacosåœ°å€ config: file-extension: yaml # æ–‡ä»¶åç¼€å shared-configs: # å¤šå¾®æœåŠ¡é—´å…±äº«çš„é…ç½®åˆ—è¡¨ - dataId: common.yaml # è¦å…±äº«çš„é…ç½®æ–‡ä»¶id æ–¹å¼äºŒ12345678910111213spring: application: name: userservice # æœåŠ¡åç§° profiles: active: dev # ç¯å¢ƒï¼Œ cloud: nacos: server-addr: localhost:8848 # Nacosåœ°å€ config: file-extension: yaml # æ–‡ä»¶åç¼€å extends-configs: # å¤šå¾®æœåŠ¡é—´å…±äº«çš„é…ç½®åˆ—è¡¨ - dataId: extend.yaml # è¦å…±äº«çš„é…ç½®æ–‡ä»¶id 5.5ã€Nacosé›†ç¾¤æ­å»ºä»¥ä¸‹æ˜¯æ•™ç¨‹ä¸­æ‰€è¦æ­å»ºçš„é›†ç¾¤ç»“æ„ ä¸‰ä¸ªnacosèŠ‚ç‚¹çš„åœ°å€ï¼š èŠ‚ç‚¹ ip port nacos1 192.168.150.1 8845 nacos2 192.168.150.1 8846 nacos3 192.168.150.1 8847 ç„¶åæˆ‘ä»¬ç°åœ¨å¼€å§‹æ­å»ºæˆ‘ä»¬çš„é›†ç¾¤ æ­å»ºé›†ç¾¤çš„åŸºæœ¬æ­¥éª¤ï¼š æ­å»ºæ•°æ®åº“ï¼Œåˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„ ä¸‹è½½nacoså®‰è£…åŒ… é…ç½®nacos å¯åŠ¨nacosé›†ç¾¤ nginxåå‘ä»£ç† åˆå§‹åŒ–æ•°æ®åº“ æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ•°æ®åº“ä¸­åˆ›å»ºå¥½ä¸€ä¸ªæˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®åº“ ç„¶åå®‰è£…åŒ…æˆ‘ä»¬å·²ç»ä¸‹è½½è¿‡äº†ï¼Œå°±å¯ä»¥ç›´æ¥è·³è¿‡ï¼Œç„¶åé…ç½®ä¸€ä¸‹nacos è¿›å…¥nacosçš„confç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶cluster.conf.exampleï¼Œé‡å‘½åä¸ºcluster.confï¼š ç„¶åæ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªåœ°å€ ç„¶åä¿®æ”¹application.propertiesæ–‡ä»¶ï¼Œæ·»åŠ æ•°æ®åº“é…ç½® 12345spring.datasource.platform=mysqldb.num=1db.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTCdb.user.0=rootdb.password.0=123 å¯åŠ¨ å°†nacosæ–‡ä»¶å¤¹å¤åˆ¶ä¸‰ä»½ï¼Œåˆ†åˆ«å‘½åä¸ºï¼šnacos1ã€nacos2ã€nacos3 ç„¶ååˆ†åˆ«ä¿®æ”¹ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ application.properties ï¼Œ nacos1: 1server.port=8845 nacos2: 1server.port=8846 nacos3: 1server.port=8847 ç„¶ååˆ†åˆ«å¯åŠ¨ä¸‰ä¸ªnacosèŠ‚ç‚¹ï¼š 1startup.cmd Nginxåå‘ä»£ç† å®‰è£…å¥½nginxä¹‹åï¼Œæ‰“å¼€æ–‡ä»¶å¤¹ã€‚ä¿®æ”¹conf/nginx.confæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š 1234567891011121314upstream nacos-cluster &#123; server 127.0.0.1:8845; server 127.0.0.1:8846; server 127.0.0.1:8847;&#125;server &#123; listen 80; server_name localhost; location /nacos &#123; proxy_pass http://nacos-cluster; &#125;&#125; ç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost/nacoså³å¯ã€‚ ä»£ç ä¸­application.ymlæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š 1234spring: cloud: nacos: server-addr: localhost:80 # Nacosåœ°å€ 6ã€å®¢æˆ·ç«¯FeignFeignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œå®˜æ–¹åœ°å€ï¼šhttps://github.com/OpenFeign/feignå…¶ä½œç”¨å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ 6.1ã€ä½¿ç”¨ å¼•å…¥ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; åœ¨order-serviceçš„å¯åŠ¨ç±»æ·»åŠ æ³¨è§£å¼€å¯Feignçš„åŠŸèƒ½ï¼š ç¼–å†™feignå®¢æˆ·ç«¯ 12345@FeignClient(&quot;userservice&quot;)public interface UserClient &#123; @GetMapping(&quot;/user/&#123;id&#125;&quot;) User findById(@PathVariable(&quot;id&quot;) Long id);&#125; ä¸»è¦æ˜¯åŸºäºSpringMVCçš„æ³¨è§£æ¥å£°æ˜è¿œç¨‹è°ƒç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š æœåŠ¡åç§°ï¼šuserservice è¯·æ±‚æ–¹å¼ï¼šGET è¯·æ±‚è·¯å¾„ï¼š/user/{id} è¯·æ±‚å‚æ•°ï¼šLong id è¿”å›å€¼ç±»å‹ï¼šUser ä½¿ç”¨è¿™ç§æ–¹å¼å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä»£æ›¿ä¹‹å‰çš„urlçš„è°ƒç”¨æ–¹å¼ï¼Œä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ç®€æ´ã€‚ä»¥ä¸‹å°±æ˜¯è°ƒç”¨çš„å†…å®¹ è°ƒç”¨ 6.2ã€è‡ªå®šä¹‰Feignçš„é…ç½®Feignè¿è¡Œè‡ªå®šä¹‰é…ç½®æ¥è¦†ç›–é»˜è®¤é…ç½®ï¼Œå¯ä»¥ä¿®æ”¹çš„é…ç½®å¦‚ä¸‹ï¼š ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä¿®æ”¹æ—¥å¿—çº§åˆ«,æœ€å¥½ç”¨basicæˆ–none 6.3ã€é…ç½®Feignçš„æ—¥å¿—é…ç½®æ—¥å¿—æ—¶æˆ‘ä»¬ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯javaä»£ç çš„æ–¹å¼ é…ç½®æ–‡ä»¶æ–¹å¼ 12345feign: client: config: default: # è¿™é‡Œç”¨defaultå°±æ˜¯å…¨å±€é…ç½®ï¼Œå¦‚æœæ˜¯å†™æœåŠ¡åç§°ï¼Œåˆ™æ˜¯é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½® loggerLevel: FULL # æ—¥å¿—çº§åˆ« javaä»£ç æ–¹å¼ é¦–å…ˆæˆ‘ä»¬å£°æ˜ä¸€ä¸ªBean 123456public class FeignClientConfiguration &#123; @Bean public Logger.Level feignLogLevel()&#123; return Logger.Level.BASIC; &#125;&#125; ç„¶åå¦‚æœæ˜¯å…¨å±€é…ç½®ï¼Œæˆ‘ä»¬å°±æ”¾åˆ° @EnableFeignClients è¿™ä¸ªæ³¨è§£ä¸­ 1@EnableFeignClients(defaultConfiguration = FeignClientConfiguration.class) å¦‚æœæ˜¯å±€éƒ¨é…ç½®ï¼Œæˆ‘ä»¬å°±æ”¾åˆ° @FeignClient è¿™ä¸ªæ³¨è§£ä¸­ 1@FeignClient(value = &quot;userservice&quot;, configuration = FeignClientConfiguration.class) 6.4ã€æ€§èƒ½ä¼˜åŒ–Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚å®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š URLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ±  Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ±  OKHttpï¼šæ”¯æŒè¿æ¥æ±  å› æ­¤æé«˜Feignçš„æ€§èƒ½ä¸»è¦æ‰‹æ®µå°±æ˜¯ä½¿ç”¨è¿æ¥æ± ä»£æ›¿é»˜è®¤çš„URLConnectionã€‚è¿™é‡Œæˆ‘ä»¬ç”¨Apacheçš„HttpClientæ¥æ¼”ç¤ºã€‚ å¼•å…¥ä¾èµ–åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­å¼•å…¥Apacheçš„HttpClientä¾èµ–ï¼š12345&lt;!--httpClientçš„ä¾èµ– --&gt;&lt;dependency&gt; &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt; &lt;artifactId&gt;feign-httpclient&lt;/artifactId&gt;&lt;/dependency&gt; é…ç½®è¿æ¥æ± 123456789feign: client: config: default: # defaultå…¨å±€çš„é…ç½® loggerLevel: BASIC # æ—¥å¿—çº§åˆ«ï¼ŒBASICå°±æ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯ httpclient: enabled: true # å¼€å¯feignå¯¹HttpClientçš„æ”¯æŒ max-connections: 200 # æœ€å¤§çš„è¿æ¥æ•° max-connections-per-route: 50 # æ¯ä¸ªè·¯å¾„çš„æœ€å¤§è¿æ¥æ•° ä¼˜åŒ–æ€»ç»“æ€»ç»“ï¼ŒFeignçš„ä¼˜åŒ–ï¼š 1.æ—¥å¿—çº§åˆ«å°½é‡ç”¨basic2.ä½¿ç”¨HttpClientæˆ–OKHttpä»£æ›¿URLConnectionâ‘  å¼•å…¥feign-httpClientä¾èµ–â‘¡ é…ç½®æ–‡ä»¶å¼€å¯httpClientåŠŸèƒ½ï¼Œè®¾ç½®è¿æ¥æ± å‚æ•° 6.5ã€æœ€ä½³å®è·µæ‰€è°“æœ€è¿‘å®è·µï¼Œå°±æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“çš„ç»éªŒï¼Œæœ€å¥½çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚è‡ªä¹ è§‚å¯Ÿå¯ä»¥å‘ç°ï¼ŒFeignçš„å®¢æˆ·ç«¯ä¸æœåŠ¡æä¾›è€…çš„controllerä»£ç éå¸¸ç›¸ä¼¼ï¼šfeignå®¢æˆ·ç«¯ï¼šUserControllerï¼š æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•æ¥ä¼˜åŒ–é‡å¤çš„ä»£ç ç¼–å†™ ç»§æ‰¿æ–¹å¼ æŠ½å–æ–¹å¼ é¦–å…ˆæ¥è¯´ä¸€ä¸‹ç»§æ‰¿æ–¹å¼ï¼šä¸€æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å…±äº«ï¼š1ï¼‰å®šä¹‰ä¸€ä¸ªAPIæ¥å£ï¼Œåˆ©ç”¨å®šä¹‰æ–¹æ³•ï¼Œå¹¶åŸºäºSpringMVCæ³¨è§£åšå£°æ˜ã€‚2ï¼‰Feignå®¢æˆ·ç«¯å’ŒControlleréƒ½é›†æˆè¿™ä¸ªæ¥å£ ä¼˜ç‚¹ï¼š ç®€å• å®ç°äº†ä»£ç å…±äº« ç¼ºç‚¹ï¼š æœåŠ¡æä¾›æ–¹ã€æœåŠ¡æ¶ˆè´¹æ–¹ç´§è€¦åˆ å‚æ•°åˆ—è¡¨ä¸­çš„æ³¨è§£æ˜ å°„å¹¶ä¸ä¼šç»§æ‰¿ï¼Œå› æ­¤Controllerä¸­å¿…é¡»å†æ¬¡å£°æ˜æ–¹æ³•ã€å‚æ•°åˆ—è¡¨ã€æ³¨è§£ ç„¶åæ˜¯æŠ½å–çš„æ–¹å¼å°†Feignçš„ClientæŠ½å–ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œå¹¶ä¸”æŠŠæ¥å£æœ‰å…³çš„POJOã€é»˜è®¤çš„Feigné…ç½®éƒ½æ”¾åˆ°è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæä¾›ç»™æ‰€æœ‰æ¶ˆè´¹è€…ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå°†UserClientã€Userã€Feignçš„é»˜è®¤é…ç½®éƒ½æŠ½å–åˆ°ä¸€ä¸ªfeign-apiåŒ…ä¸­ï¼Œæ‰€æœ‰å¾®æœåŠ¡å¼•ç”¨è¯¥ä¾èµ–åŒ…ï¼Œå³å¯ç›´æ¥ä½¿ç”¨ 6.6ã€åŸºäºæŠ½å–çš„æœ€ä½³å®è·µ é¦–å…ˆåˆ›å»ºä¸€ä¸ªå…¬å…±ç±» feign-api åœ¨è¿™ä¸ªç±»ä¸­å¼•å…¥ä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶åï¼Œorder-serviceä¸­ç¼–å†™çš„UserClientã€Userã€DefaultFeignConfigurationéƒ½å¤åˆ¶åˆ°feign-apié¡¹ç›®ä¸­ åœ¨order-serviceä¸­ä½¿ç”¨feign-apiï¼ˆå¼•å…¥apiçš„ä¾èµ–ï¼‰12345&lt;dependency&gt; &lt;groupId&gt;cn.itcast.demo&lt;/groupId&gt; &lt;artifactId&gt;feign-api&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt;&lt;/dependency&gt; ä¿®æ”¹order-serviceä¸­çš„æ‰€æœ‰ä¸ä¸Šè¿°ä¸‰ä¸ªç»„ä»¶æœ‰å…³çš„å¯¼åŒ…éƒ¨åˆ†ï¼Œæ”¹æˆå¯¼å…¥feign-apiä¸­çš„åŒ… æ­¤æ—¶å½“æˆ‘ä»¬é‡å¯æµ‹è¯•çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°å‡ºé”™äº†ï¼Œå‡ºé”™å†…å®¹å¦‚ä¸‹ è¿™æ˜¯å› ä¸ºUserClientç°åœ¨åœ¨cn.itcast.feign.clientsåŒ…ä¸‹ï¼Œè€Œorder-serviceçš„@EnableFeignClientsæ³¨è§£æ˜¯åœ¨cn.itcast.orderåŒ…ä¸‹ï¼Œä¸åœ¨åŒä¸€ä¸ªåŒ…ï¼Œæ— æ³•æ‰«æåˆ°UserClientã€‚7. è§£å†³æ‰«æåŒ…é—®é¢˜ æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ï¼šæŒ‡å®šFeignåº”è¯¥æ‰«æçš„åŒ… 1@EnableFeignClients(basePackages = &quot;cn.itcast.feign.clients&quot;) ä¸€ç§æ˜¯æŒ‡å®šè¦åŠ è½½çš„Clientçš„æ¥å£ 1@EnableFeignClients(clients = &#123;UserClient.class&#125;) è‡³æ­¤ï¼Œå°±è®¾ç½®å®Œæ¯•äº† 7ã€Gatewayç½‘å…³ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³ï¼Ÿç½‘å…³ç”¨æ¥å¹²å˜›ç½‘å…³å¯ä»¥ç”¨äºï¼š èº«ä»½è®¤è¯å’Œæƒé™æ ¡éªŒ æœåŠ¡è·¯ç”±ã€è´Ÿè½½å‡è¡¡ è¯·æ±‚é™æµ åœ¨SpringCloudä¸­æœ‰ä¸¤ç§ç½‘å…³æœåŠ¡ï¼Œä¸€ç§æ˜¯Gatewayï¼Œå¦ä¸€ç§æ˜¯Zuulè€Œä¸¤è€…çš„å·®åˆ«æ˜¯ï¼šZuulæ˜¯åŸºäºServletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚è€ŒSpringCloudGatewayåˆ™æ˜¯åŸºäºSpring5ä¸­æä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œå…·å¤‡æ›´å¥½çš„æ€§èƒ½ã€‚ 7.1ã€æ­å»ºä¸€ä¸ªGatewayç½‘å…³æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç½‘å…³çš„ç±»æ¥æ­å»ºä¸€ä¸ªç½‘å…³ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š åˆ›å»ºæ–°çš„moduleï¼Œå¼•å…¥SpringCloudGatewayçš„ä¾èµ–å’Œnacosçš„æœåŠ¡å‘ç°ä¾èµ– 12345678910&lt;!--ç½‘å…³ä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--nacosæœåŠ¡å‘ç°ä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶ååœ¨ç½‘å…³çš„ymlæ–‡ä»¶ä¸­ç¼–å†™è·¯ç”±é…ç½®åŠnacosåœ°å€ 123456789101112131415server: port: 10010 # ç½‘å…³ç«¯å£spring: application: name: gateway # æœåŠ¡åç§° cloud: nacos: server-addr: localhost:8848 # nacosåœ°å€ gateway: routes: # ç½‘å…³è·¯ç”±é…ç½® - id: user-service # è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯ # uri: http://127.0.0.1:8081 # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€ uri: lb://userservice # è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§° predicates: # è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶ - Path=/user/** # è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚ æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å…¥nacosçš„åœ°å€ï¼Œä»¥åŠåŠ ä¸Šæ–­è¨€ä¸­é…ç½®å¥½çš„è·¯å¾„è¿›è¡Œè®¿é—®ï¼Œå°±ä¼šè¢«ç½‘å…³å¸¦åˆ°åˆ¶å®šå¥½çš„ä½ç½®ã€‚æ¯”å¦‚è¯´æˆ‘è®¿é—®localhost:8848/user/nowï¼Œå°±ä¼šè¢«å¸¦åˆ°userserviceçš„nowæ–¹æ³•å»ï¼Œè¿™å°±æ˜¯ç½‘å…³çš„æœåŠ¡è·¯ç”±åŠŸèƒ½ï¼Œæ˜¯ä½¿ç”¨æ–­è¨€æ¥å®ç°çš„ã€‚ 7.2ã€æ–­è¨€å·¥å‚åœ¨ymlæ–‡ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªé…ç½®ï¼š 1predicatesï¼šè·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œç¬¦åˆåˆ™è½¬å‘åˆ°è·¯ç”±ç›®çš„åœ° æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„æ–­è¨€è§„åˆ™åªæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šè¢«Predicate Factoryè¯»å–å¹¶å¤„ç†ï¼Œè½¬å˜ä¸ºè·¯ç”±åˆ¤æ–­çš„æ¡ä»¶ä¾‹å¦‚ Path=/user/**æ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”±org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory ç±»æ¥å¤„ç†çš„åƒè¿™æ ·çš„æ–­è¨€å·¥å‚åœ¨SpringCloudGatewayè¿˜æœ‰åå‡ ä¸ª Springç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šç§Predicateå·¥å‚ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå¤šçš„è¿˜æ˜¯ Path è¿™ç§æ–¹å¼. 7.3ã€è·¯ç”±è¿‡æ»¤å™¨/è¿‡æ»¤å™¨å·¥å‚GatewayFilteræ˜¯ç½‘å…³ä¸­æä¾›çš„ä¸€ç§è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¯¹è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡è¿”å›çš„å“åº”åšå¤„ç†ï¼š Springæä¾›äº†31ç§ä¸åŒçš„è·¯ç”±è¿‡æ»¤å™¨å·¥å‚,ä¾‹å¦‚ï¼š ç°åœ¨æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®é™…åº”ç”¨ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ï¼šç»™æ‰€æœ‰çš„userserviceæ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´ 12345678910spring: cloud: gateway: routes: # ç½‘å…³è·¯ç”±é…ç½® - id: user-service uri: lb://userservice predicates: - Path=/user/** filters: # è¿‡æ»¤å™¨ - AddRequestHeader=Truth, GUET is freaking awesome! # æ·»åŠ è¯·æ±‚å¤´ æ­¤æ—¶æ‰€æœ‰çš„userserviceçš„è¯·æ±‚éƒ½åŠ ä¸Šäº†Truth, GUET is freaking awesome!è¿™ä¸ªè¯·æ±‚å¤´ã€‚ è€Œæ­¤æ—¶å…¶ä»–çš„ä¸å—å½±å“ï¼Œé‚£ä¹ˆæ€ä¹ˆæ ·æ‰èƒ½ä¿®æ”¹æ‰€æœ‰çš„è¯·æ±‚å¤´å‘¢ï¼Ÿæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ default-filtersä¾‹å­å¦‚ä¸‹ï¼š 123456789101112131415161718spring: application: name: gateway # æœåŠ¡åç§° cloud: nacos: server-addr: localhost:8848 # nacosåœ°å€ gateway: routes: # ç½‘å…³è·¯ç”±é…ç½® - id: user-service uri: lb://userservice predicates: - Path=/user/** - id: order-service uri: lb://orderservice predicates: - Path=/order/** default-filters: # é»˜è®¤è¿‡æ»¤å™¨ï¼Œä¼šå¯¹æ‰€æœ‰çš„è·¯ç”±è¯·æ±‚éƒ½ç”Ÿæ•ˆ - AddRequestHeader=Truth, GUET is freaking awesome! # æ·»åŠ è¯·æ±‚å¤´ æ­¤æ—¶ï¼Œè¿‡æ»¤å™¨å¹¶æ²¡æœ‰æŒ‡å®šåŠ è½½å“ªä¸€ä¸ªæœåŠ¡ä¸Šé¢ï¼Œè€Œæ˜¯åŠ åœ¨äº†routesçš„åŒä¸€çº§ä¸Šï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰çš„serviceæœåŠ¡ï¼Œæ‰€ä»¥ä»–çš„å«ä¹‰å°±æ˜¯ä¸ºæ‰€æœ‰çš„æœåŠ¡éƒ½ç»Ÿä¸€æ·»åŠ äº†è¿™æ ·çš„ä¸€ä¸ªè¯·æ±‚å¤´ 7.4ã€å…¨å±€è¿‡æ»¤å™¨å…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ã€‚è€ŒGlobalFilterçš„é€»è¾‘éœ€è¦è‡ªå·±å†™ä»£ç å®ç°ã€‚å®šä¹‰æ–¹å¼æ˜¯å®ç°GlobalFilteræ¥å£ã€‚ ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¸ªæ¡ˆä¾‹æ¥è¯´æ˜ï¼š éœ€æ±‚ï¼šå®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œåˆ¤æ–­è¯·æ±‚çš„å‚æ•°æ˜¯å¦æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼š å‚æ•°ä¸­æ˜¯å¦æœ‰ authorizationï¼Œ authorization å‚æ•°å€¼æ˜¯å¦ä¸ºadmin å¦‚æœåŒæ—¶æ»¡è¶³åˆ™æ”¾è¡Œï¼Œå¦åˆ™æ‹¦æˆª.æˆ‘ä»¬ç°åœ¨è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°FlobalFilteræ¥å£ 12345678910111213141516171819202122@Order(-1)@Componentpublic class AuthorizeFilter implements GlobalFilter &#123; @Override public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) &#123; // 1.è·å–è¯·æ±‚å‚æ•° MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams(); // 2.è·å–authorizationå‚æ•° String auth = params.getFirst(&quot;authorization&quot;); // 3.æ ¡éªŒ if (&quot;admin&quot;.equals(auth)) &#123; // æ”¾è¡Œ return chain.filter(exchange); &#125; // 4.æ‹¦æˆª // 4.1.ç¦æ­¢è®¿é—® exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN); // 4.2.ç»“æŸå¤„ç† return exchange.getResponse().setComplete(); &#125;&#125; æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨Orderæ³¨è§£ä¸­ï¼ŒåŒ…å«çš„å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼š æ¯ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªintç±»å‹çš„orderå€¼ï¼Œorderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰ã€‚ GlobalFilteré€šè¿‡å®ç°Orderedæ¥å£ï¼Œæˆ–è€…æ·»åŠ @Orderæ³¨è§£æ¥æŒ‡å®šorderå€¼ï¼Œç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®š è·¯ç”±è¿‡æ»¤å™¨å’ŒdefaultFilterçš„orderç”±SpringæŒ‡å®šï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºä»1é€’å¢ã€‚ å½“è¿‡æ»¤å™¨çš„orderå€¼ä¸€æ ·æ—¶ï¼Œä¼šæŒ‰ç…§ defaultFilter &gt; è·¯ç”±è¿‡æ»¤å™¨ &gt; GlobalFilterçš„é¡ºåºæ‰§è¡Œã€‚ 7.5ã€Corsè·¨åŸŸè·¨åŸŸï¼šåŸŸåä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼šåŸŸåä¸åŒï¼š www.taobao.com å’Œ www.taobao.org å’Œ www.jd.com å’Œ miaosha.jd.comåŸŸåç›¸åŒï¼Œç«¯å£ä¸åŒï¼šlocalhost:8080å’Œlocalhost8081è·¨åŸŸé—®é¢˜ï¼šæµè§ˆå™¨ç¦æ­¢è¯·æ±‚çš„å‘èµ·è€…ä¸æœåŠ¡ç«¯å‘ç”Ÿè·¨åŸŸajaxè¯·æ±‚ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªçš„é—®é¢˜è§£å†³æ–¹æ¡ˆï¼šCORS åªéœ€è¦ç®€å•é…ç½®å³å¯å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819spring: cloud: gateway: globalcors: # å…¨å±€çš„è·¨åŸŸå¤„ç† add-to-simple-url-handler-mapping: true # è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªé—®é¢˜ corsConfigurations: &#x27;[/**]&#x27;: allowedOrigins: # å…è®¸å“ªäº›ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ - &quot;http://localhost:8090&quot; - &quot;http://www.leyou.com&quot; allowedMethods: # å…è®¸çš„è·¨åŸŸajaxçš„è¯·æ±‚æ–¹å¼ - &quot;GET&quot; - &quot;POST&quot; - &quot;DELETE&quot; - &quot;PUT&quot; - &quot;OPTIONS&quot; allowedHeaders: &quot;*&quot; # å…è®¸åœ¨è¯·æ±‚ä¸­æºå¸¦çš„å¤´ä¿¡æ¯ allowCredentials: true # æ˜¯å¦å…è®¸æºå¸¦cookie maxAge: 360000 # è¿™æ¬¡è·¨åŸŸæ£€æµ‹çš„æœ‰æ•ˆæœŸ javaä»£ç å°±ä¼šæ ¹æ®ä¸Šé¢é…ç½®çš„å†…å®¹æ‰§è¡Œè·¨åŸŸçš„è¯·æ±‚ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringCloud","slug":"java/SpringCloud","permalink":"http://cyc0819.top/categories/java/SpringCloud/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://cyc0819.top/tags/SpringCloud/"}]},{"title":"ç®—æ³•å­¦ä¹ _æ ˆå®ç°é˜Ÿåˆ—ã€é˜Ÿåˆ—å®ç°æ ˆ","slug":"2021-10-01-ç®—æ³•å­¦ä¹ _æ ˆå®ç°é˜Ÿåˆ—ã€é˜Ÿåˆ—å®ç°æ ˆ","date":"2021-10-01T03:22:43.000Z","updated":"2021-12-08T09:29:50.776Z","comments":false,"path":"2021/10/01/2021-10-01-ç®—æ³•å­¦ä¹ _æ ˆå®ç°é˜Ÿåˆ—ã€é˜Ÿåˆ—å®ç°æ ˆ/","link":"","permalink":"http://cyc0819.top/2021/10/01/2021-10-01-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97%E3%80%81%E9%98%9F%E5%88%97%E5%AE%9E%E7%8E%B0%E6%A0%88/","excerpt":"","text":"æ ˆå®ç°é˜Ÿåˆ—ã€é˜Ÿåˆ—å®ç°æ ˆé¢˜ç›®1ã€ç”¨æ ˆæ¥å®ç°é˜Ÿåˆ—lettcode-232é¢˜éš¾åº¦ï¼šç®€å• 1.1ã€ è§£é¢˜æ€è·¯æ ˆæ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ï¼Œè€Œé˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¦ç”¨æ ˆæ¥å®ç°é˜Ÿåˆ—ï¼Œå°±å¿…é¡»è¦ç”¨åˆ°ä¸¤ä¸ªæ ˆï¼Œç¬¬ä¸€ä¸ªæ ˆå‡ºæ ˆåˆ°ç¬¬äºŒä¸ªæ ˆä¸­ï¼Œç¬¬äºŒä¸ªæ ˆå†è¿›è¡Œå‡ºæ ˆï¼Œå°±å¯ä»¥å®ç°é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºçš„åŠŸèƒ½ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ 1.2ã€å…·ä½“ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class MyQueue &#123; private Stack&lt;Integer&gt; a; private Stack&lt;Integer&gt; b; public MyQueue() &#123; a=new Stack&lt;&gt;(); b=new Stack&lt;&gt;(); &#125; /** * å…¥æ ˆ * @param x */ public void push(int x) &#123; a.push(x); &#125; /** * å‡ºæ ˆ * @return */ public int pop() &#123; if(b.isEmpty())&#123; while (!a.isEmpty())&#123; b.push(a.pop()); &#125; &#125; return b.pop(); &#125; /** * è¿”å›æ ˆé¡¶å…ƒç´  * @return */ public int peek() &#123; if(b.isEmpty())&#123; while (!a.isEmpty())&#123; b.push(a.pop()); &#125; &#125; return b.peek(); &#125; /** * åˆ¤æ–­æ ˆç©º * @return */ public boolean empty() &#123; return a.isEmpty()&amp;&amp;b.isEmpty(); &#125;&#125; é¢˜ç›®2ã€ç”¨é˜Ÿåˆ—æ¥å®ç°æ ˆlettcode-225é¢˜éš¾åº¦ï¼šç®€å• 2.1ã€è§£é¢˜æ€è·¯ä¸ä¸Šä¸€é¢˜ç›¸åŒï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªé˜Ÿåˆ—æ¥å®ç°ä¸€ä¸ªæ ˆ åˆ©ç”¨é˜Ÿåˆ—ä¸­çš„åŸºæœ¬æ–¹æ³•ä»¬å°±å¯ä»¥å®ç°æ ˆçš„å…ˆè¿›åå‡ºçš„æ“ä½œ ä»£ç å¦‚ä¸‹ï¼š 2.2ã€å…·ä½“ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class MyStack &#123; private Queue&lt;Integer&gt; a; private Queue&lt;Integer&gt; b; public MyStack() &#123; a=new LinkedList&lt;&gt;(); b=new LinkedList&lt;&gt;(); &#125; /** * å…¥æ ˆ * @param x */ public void push(int x) &#123; a.offer(x); // å°†bé˜Ÿåˆ—ä¸­å…ƒç´ å…¨éƒ¨è½¬ç»™aé˜Ÿåˆ— while(!b.isEmpty()) &#123; a.offer(b.poll()); &#125; // äº¤æ¢aå’Œb,ä½¿å¾—aé˜Ÿåˆ—æ²¡æœ‰åœ¨push()çš„æ—¶å€™å§‹ç»ˆä¸ºç©ºé˜Ÿåˆ— Queue temp = a; a = b; b = temp; &#125; /** * å‡ºæ ˆ * @return */ public int pop() &#123; return b.poll(); &#125; /** * è¿”å›æ ˆé¡¶å…ƒç´  * @return */ public int top() &#123; return b.peek(); &#125; /** * åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º * @return */ public boolean empty() &#123; return b.isEmpty(); &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•å­¦ä¹ _æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°","slug":"2021-10-01-ç®—æ³•å­¦ä¹ _æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°","date":"2021-10-01T02:53:20.000Z","updated":"2021-12-08T09:29:52.431Z","comments":false,"path":"2021/10/01/2021-10-01-ç®—æ³•å­¦ä¹ _æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°/","link":"","permalink":"http://cyc0819.top/2021/10/01/2021-10-01-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E6%9C%80%E8%BF%91%E7%9A%84%E8%AF%B7%E6%B1%82%E6%AC%A1%E6%95%B0/","excerpt":"","text":"æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°é¢˜ç›®lettcode-933é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯ä»é¢˜ç›®ä¸Šæ¥çœ‹ï¼Œä¸€æ—¶åŠä¼šçœ‹ä¸å‡ºæ¥æ˜¯ä»€ä¹ˆæ„æ€ã€‚ å…¶å®æ‰€è¾“å…¥çš„æ•°å­—tå°±æ˜¯ä¸€ä¸ªæ¯«ç§’æ•°ï¼Œæ ¹æ®è¿™ä¸ªæ•°æ¥åˆ¤æ–­3000æ¯«ç§’ä¹‹å‰çš„æ•°ï¼Œå¦‚æœå°äº3000æ¯«ç§’ä¹‹å‰çš„å°±åˆ é™¤å°äºçš„é‚£ä¸ªã€‚ æ‰€ä»¥å½“æˆ‘ä»¬è¾“å…¥3002æ—¶ï¼Œ3000-3000=2ï¼Œè€Œ1å°äº2ï¼Œæ‰€ä»¥1å°±ä¼šè¢«åˆ é™¤ã€‚ æ‰€ä»¥è¯´è¿™ä¸ªé¢˜æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é˜Ÿåˆ—æ¥å®ç°ã€‚ å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ å…·ä½“ä»£ç 1234567891011121314151617181920class RecentCounter &#123; //æ„é€ ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒLinkedListçš„é˜Ÿåˆ— Queue&lt;Integer&gt; queue; public RecentCounter() &#123; queue=new LinkedList&lt;&gt;(); &#125; public int ping(int t) &#123; //å°†è¾“å…¥çš„æ•°å€¼å…¥é˜Ÿ queue.add(t); //åˆ¤æ–­æ ˆé¡¶å…ƒç´ æ˜¯å¦å°äºt-3000 //å¦‚æœå°äºt-3000ï¼Œå°†å…¶å‡ºé˜Ÿ while (queue.peek()&lt;t-3000)&#123; queue.poll(); &#125; //è¿”å›é˜Ÿåˆ—çš„é•¿åº¦ return queue.size(); &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Redisä½¿ç”¨æ³¨è§£å®ç°äºŒçº§ç¼“å­˜","slug":"2021-09-29-Redisä½¿ç”¨æ³¨è§£å®ç°äºŒçº§ç¼“å­˜","date":"2021-09-29T09:34:06.000Z","updated":"2021-12-08T09:29:34.134Z","comments":false,"path":"2021/09/29/2021-09-29-Redisä½¿ç”¨æ³¨è§£å®ç°äºŒçº§ç¼“å­˜/","link":"","permalink":"http://cyc0819.top/2021/09/29/2021-09-29-Redis%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98/","excerpt":"","text":"Redisä½¿ç”¨æ³¨è§£å®ç°äºŒçº§ç¼“å­˜1ã€ä»‹ç»ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®ç°äºŒçº§ç¼“å­˜çš„æ–¹å¼æ˜¯é€šè¿‡javaä»£ç åˆ¤æ–­Redisæ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œç„¶åå†³å®šä»ä½•å¤„å–æ•°æ®ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•åœ¨æˆ‘ä»¬æœ‰å¤§é‡çš„éœ€è¦ç”¨åˆ°ç¼“å­˜çš„åœ°æ–¹çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å†—ä½™ä»£ç ï¼Œè€Œä¸”æœ‰å¤§é‡çš„åˆ¤æ–­è¯­å¥ï¼Œè®©æˆ‘ä»¬çš„ä»£ç ä¸èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡ä¸Šé¢ï¼Œè¿™æ ·å­æ˜¯ä¸å¤ªå¥½çš„ã€‚ æ‰€ä»¥åœ¨Springçš„3.1ç‰ˆæœ¬ä¹‹åå°±å¼•å…¥äº†å¯¹æ³¨è§£çš„æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç±»ä¸Šã€æ–¹æ³•ä¸Šæ ‡è®°æ³¨è§£æ¥å®ç°äºŒçº§ç¼“å­˜çš„å­˜å– å…¶ä¸‰ä¸ªæ³¨è§£åˆ†åˆ«ä¸ºï¼šCacheable ï¼ŒCacheEvictï¼ŒCachePut ä¸‹é¢æˆ‘ä¼šå°†ä¸‰ä¸ªæ³¨è§£åˆ†åˆ«å±•å¼€è¿›è¡Œç®€å•è§£é‡Š 2ã€Cacheableæ³¨è§£ @Cacheableå¯ä»¥æ ‡è®°åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥æ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šã€‚ å¯¹äºä¸€ä¸ªæ”¯æŒç¼“å­˜çš„æ–¹æ³•ï¼ŒSpringä¼šåœ¨å…¶è¢«è°ƒç”¨åå°†å…¶è¿”å›å€¼ç¼“å­˜èµ·æ¥ï¼Œä»¥ä¿è¯ä¸‹æ¬¡åˆ©ç”¨åŒæ ·çš„å‚æ•°æ¥æ‰§è¡Œè¯¥æ–¹æ³•æ—¶å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç»“æœï¼Œè€Œä¸éœ€è¦å†æ¬¡æ‰§è¡Œè¯¥æ–¹æ³•ã€‚ Springåœ¨ç¼“å­˜æ–¹æ³•çš„è¿”å›å€¼æ—¶æ˜¯ä»¥é”®å€¼å¯¹è¿›è¡Œç¼“å­˜çš„ï¼Œå€¼å°±æ˜¯æ–¹æ³•çš„è¿”å›ç»“æœã€‚ è‡³äºé”®çš„è¯ï¼ŒSpringåˆæ”¯æŒä¸¤ç§ç­–ç•¥ï¼Œé»˜è®¤ç­–ç•¥å’Œè‡ªå®šä¹‰ç­–ç•¥ï¼Œè¿™ä¸ªç¨åä¼šè¿›è¡Œè¯´æ˜ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯å½“ä¸€ä¸ªæ”¯æŒç¼“å­˜çš„æ–¹æ³•åœ¨å¯¹è±¡å†…éƒ¨è¢«è°ƒç”¨æ—¶æ˜¯ä¸ä¼šè§¦å‘ç¼“å­˜åŠŸèƒ½çš„ã€‚ @Cacheableå¯ä»¥æŒ‡å®šä¸‰ä¸ªå±æ€§ï¼Œvalueã€keyå’Œconditionã€‚ 2.1ã€valueå±æ€§valueå±æ€§æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼Œå…¶è¡¨ç¤ºå½“å‰æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¼šè¢«ç¼“å­˜åœ¨å“ªä¸ªCacheä¸Šçš„ï¼Œå¯¹åº”Cacheçš„åç§°ã€‚å…¶å¯ä»¥æ˜¯ä¸€ä¸ªCacheä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªCacheï¼Œå½“éœ€è¦æŒ‡å®šå¤šä¸ªCacheæ—¶å…¶æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼š 123456@RequestMapping(&quot;selectForAll&quot;)@Cacheable(value = &quot;MYBATIS:com.chen.mysqlredisdemo.StudentMapper::AllStudent&quot;)public List&lt;Student&gt; selectStudentForAll() &#123; List&lt;Student&gt; studentList = studentService.selectStudentForAll(); return studentList;&#125; 2.2ã€keyå±æ€§ keyå±æ€§æ˜¯ç”¨æ¥æŒ‡å®šSpringç¼“å­˜æ–¹æ³•çš„è¿”å›ç»“æœæ—¶å¯¹åº”çš„keyçš„ã€‚ è¯¥å±æ€§æ”¯æŒSpringELè¡¨è¾¾å¼ã€‚å½“æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šè¯¥å±æ€§æ—¶ï¼ŒSpringå°†ä½¿ç”¨é»˜è®¤ç­–ç•¥ç”Ÿæˆkeyã€‚ å®šä¹‰ç­–ç•¥æ˜¯æŒ‡æˆ‘ä»¬å¯ä»¥é€šè¿‡Springçš„ELè¡¨è¾¾å¼æ¥æŒ‡å®šæˆ‘ä»¬çš„keyã€‚è¿™é‡Œçš„ELè¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨æ–¹æ³•å‚æ•°åŠå®ƒä»¬å¯¹åº”çš„å±æ€§ã€‚ä½¿ç”¨æ–¹æ³•å‚æ•°æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨â€œ#å‚æ•°åâ€æˆ–è€…â€œ#på‚æ•°indexâ€ã€‚å¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼š123456@RequestMapping(&quot;/selectForOne/&#123;sId&#125;&quot;)@Cacheable(value = &quot;MYBATIS:com.chen.mysqlredisdemo.StudentMapper&quot;, key = &quot;#sId&quot;)public Student selectStudentForOne(@PathVariable int sId) &#123; Student student = studentService.selectStudentForOne(sId); return student;&#125; æ­¤æ—¶ï¼Œå¦‚æœæˆ‘æŸ¥è¯¢äº†ä¸€ä¸ªsIdä¸º1800710318çš„å­¦ç”Ÿé‚£ä¹ˆä¸Šé¢çš„æ–¹æ³•ä¸­æœ€åç¼“å­˜çš„é”®ä¸ºï¼šMYBATIS:com.chen.mysqlredisdemo.StudentMapper::1800710318 2.3ã€conditionå±æ€§ conditionå±æ€§å¯ä»¥ç”¨äºæŒ‡å®šç¼“å­˜å‘ç”Ÿçš„æ¡ä»¶ã€‚ æœ‰çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½å¹¶ä¸å¸Œæœ›ç¼“å­˜ä¸€ä¸ªæ–¹æ³•æ‰€æœ‰çš„è¿”å›ç»“æœï¼Œè¿™æ—¶å€™é€šè¿‡conditionå±æ€§å¯ä»¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚ conditionå±æ€§é»˜è®¤ä¸ºç©ºï¼Œè¡¨ç¤ºå°†ç¼“å­˜æ‰€æœ‰çš„è°ƒç”¨æƒ…å½¢ã€‚ å…¶å€¼æ˜¯é€šè¿‡SpringELè¡¨è¾¾å¼æ¥æŒ‡å®šçš„ï¼Œå½“ä¸ºtrueæ—¶è¡¨ç¤ºè¿›è¡Œç¼“å­˜å¤„ç†ï¼›å½“ä¸ºfalseæ—¶è¡¨ç¤ºä¸è¿›è¡Œç¼“å­˜å¤„ç†ï¼Œå³æ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶è¯¥æ–¹æ³•éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚å¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼š123456@RequestMapping(&quot;/selectForOne/&#123;sId&#125;&quot;)@Cacheable(value = &quot;MYBATIS:com.chen.mysqlredisdemo.StudentMapper&quot;, key = &quot;#sId&quot;,condition = &quot;#sId&gt;1800710301&quot;)public Student selectStudentForOne(@PathVariable int sId) &#123; Student student = studentService.selectStudentForOne(sId); return student;&#125; ä¸Šé¢çš„ä¾‹å­å°±è¡¨ç¤ºå½“æŸ¥è¯¢çš„sIdå¤§äº1800710318çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç¼“å­˜çš„æ“ä½œ 3ã€CachePutæ³¨è§£ åœ¨æ”¯æŒSpring Cacheçš„ç¯å¢ƒä¸‹ï¼Œå¯¹äºä½¿ç”¨@Cacheableæ ‡æ³¨çš„æ–¹æ³•ï¼ŒSpringåœ¨æ¯æ¬¡æ‰§è¡Œå‰éƒ½ä¼šæ£€æŸ¥Cacheä¸­æ˜¯å¦å­˜åœ¨ç›¸åŒkeyçš„ç¼“å­˜å…ƒç´ ï¼Œå¦‚æœå­˜åœ¨å°±ä¸å†æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç»“æœè¿›è¡Œè¿”å›ï¼Œå¦åˆ™æ‰ä¼šæ‰§è¡Œå¹¶å°†è¿”å›ç»“æœå­˜å…¥æŒ‡å®šçš„ç¼“å­˜ä¸­ã€‚ @CachePutä¹Ÿå¯ä»¥å£°æ˜ä¸€ä¸ªæ–¹æ³•æ”¯æŒç¼“å­˜åŠŸèƒ½ã€‚ ä¸@Cacheableä¸åŒçš„æ˜¯ä½¿ç”¨@CachePutæ ‡æ³¨çš„æ–¹æ³•åœ¨æ‰§è¡Œå‰ä¸ä¼šå»æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ä¹‹å‰æ‰§è¡Œè¿‡çš„ç»“æœï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¹¶å°†æ‰§è¡Œç»“æœä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å…¥æŒ‡å®šçš„ç¼“å­˜ä¸­ã€‚ @CachePutä¹Ÿå¯ä»¥æ ‡æ³¨åœ¨ç±»ä¸Šå’Œæ–¹æ³•ä¸Šã€‚ä½¿ç”¨@CachePutæ—¶æˆ‘ä»¬å¯ä»¥æŒ‡å®šçš„å±æ€§è·Ÿ@Cacheableæ˜¯ä¸€æ ·çš„ã€‚ ç®€è€Œè¨€ä¹‹å°±æ˜¯CachePutåªä¼šå¾€ç¼“å­˜ä¸­å†™æ•°æ®ï¼Œä¸ä¼šä»ç¼“å­˜ä¸­æ‹¿æ•°æ® 4ã€CacheEvictæ³¨è§£ @CacheEvictæ˜¯ç”¨æ¥æ ‡æ³¨åœ¨éœ€è¦æ¸…é™¤ç¼“å­˜å…ƒç´ çš„æ–¹æ³•æˆ–ç±»ä¸Šçš„ã€‚å½“æ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šæ—¶è¡¨ç¤ºå…¶ä¸­æ‰€æœ‰çš„æ–¹æ³•çš„æ‰§è¡Œéƒ½ä¼šè§¦å‘ç¼“å­˜çš„æ¸…é™¤æ“ä½œã€‚ @CacheEvictå¯ä»¥æŒ‡å®šçš„å±æ€§æœ‰valueã€keyã€conditionã€allEntrieså’ŒbeforeInvocationã€‚ å…¶ä¸­valueã€keyå’Œconditionçš„è¯­ä¹‰ä¸@Cacheableå¯¹åº”çš„å±æ€§ç±»ä¼¼ã€‚å³valueè¡¨ç¤ºæ¸…é™¤æ“ä½œæ˜¯å‘ç”Ÿåœ¨å“ªäº›Cacheä¸Šçš„ï¼ˆå¯¹åº”Cacheçš„åç§°ï¼‰ï¼›keyè¡¨ç¤ºéœ€è¦æ¸…é™¤çš„æ˜¯å“ªä¸ªkeyï¼Œå¦‚æœªæŒ‡å®šåˆ™ä¼šä½¿ç”¨é»˜è®¤ç­–ç•¥ç”Ÿæˆçš„keyï¼›conditionè¡¨ç¤ºæ¸…é™¤æ“ä½œå‘ç”Ÿçš„æ¡ä»¶ã€‚ ä¸å‰é¢ä¸åŒçš„ä¸åŒçš„æ˜¯æœ‰äº†ä¸¤ä¸ªå¤šå‡ºæ¥çš„å±æ€§ï¼šallEntrieså’ŒbeforeInvocation 4.1ã€allEntrieså±æ€§ allEntriesæ˜¯booleanç±»å‹ï¼Œè¡¨ç¤ºæ˜¯å¦éœ€è¦æ¸…é™¤ç¼“å­˜ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ é»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºä¸éœ€è¦ã€‚å½“æŒ‡å®šäº†allEntriesä¸ºtrueæ—¶ï¼ŒSpring Cacheå°†å¿½ç•¥æŒ‡å®šçš„keyã€‚ æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦Cacheä¸€ä¸‹æ¸…é™¤æ‰€æœ‰çš„å…ƒç´ ï¼Œè¿™æ¯”ä¸€ä¸ªä¸€ä¸ªæ¸…é™¤å…ƒç´ æ›´æœ‰æ•ˆç‡ã€‚ 4.2ã€beforeInvocationå±æ€§ æ¸…é™¤æ“ä½œé»˜è®¤æ˜¯åœ¨å¯¹åº”æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè§¦å‘çš„ï¼Œå³æ–¹æ³•å¦‚æœå› ä¸ºæŠ›å‡ºå¼‚å¸¸è€Œæœªèƒ½æˆåŠŸè¿”å›æ—¶ä¹Ÿä¸ä¼šè§¦å‘æ¸…é™¤æ“ä½œã€‚ ä½¿ç”¨beforeInvocationå¯ä»¥æ”¹å˜è§¦å‘æ¸…é™¤æ“ä½œçš„æ—¶é—´ï¼Œå½“æˆ‘ä»¬æŒ‡å®šè¯¥å±æ€§å€¼ä¸ºtrueæ—¶ï¼ŒSpringä¼šåœ¨è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰æ¸…é™¤ç¼“å­˜ä¸­çš„æŒ‡å®šå…ƒç´ ã€‚ 5ã€Cachingæ³¨è§£@Cachingæ³¨è§£å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–¹æ³•æˆ–è€…ç±»ä¸ŠåŒæ—¶æŒ‡å®šå¤šä¸ªSpring Cacheç›¸å…³çš„æ³¨è§£ã€‚å…¶æ‹¥æœ‰ä¸‰ä¸ªå±æ€§ï¼šcacheableã€putå’Œevictï¼Œåˆ†åˆ«ç”¨äºæŒ‡å®š@Cacheableã€@CachePutå’Œ@CacheEvictã€‚ å…¶ä¾‹å­å¦‚ä¸‹ 1234 @Caching(cacheable = @Cacheable(&quot;users&quot;), evict = &#123; @CacheEvict(&quot;cache2&quot;), @CacheEvict(value = &quot;cache3&quot;, allEntries = true) &#125;)public User find(Integer id) &#123; returnnull;&#125; ä¸Šé¢çš„ä¾‹å­é€šè¿‡ä¸€ä¸ªCachingæ³¨è§£ï¼Œå®ç°äº†ä¸‰ç§æ³¨è§£åŒäº‹çš„é…ç½®ï¼Œç›¸å½“äºä¸€ä¸ªå¤§é›†åˆ 6ã€æ€»ç»“SpringBootä¸­å¤§é‡ä½¿ç”¨äº†æ³¨è§£ã€æ›¿ä»£äº†åŸæœ‰çš„é…ç½®æ–‡ä»¶ã€‚å¤§å¤§å‡å°‘äº†å†—ä½™ä»£ç ï¼Œæ–¹ä¾¿åœ°å®ç°äº†æ³¨è§£ä¸­æ‰€è®¾ç½®å¥½çš„åŠŸèƒ½ã€‚ä½¿å¾—æˆ‘ä»¬çš„ä»£ç ç®€æ´æ˜“æ‡‚ã€‚é™¤äº†å®˜æ–¹é»˜è®¤çš„æ³¨è§£ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰å¾ˆå¤šæ³¨è§£ï¼Œæå¤§æ–¹ä¾¿äº†æˆ‘ä»¬çš„ä½¿ç”¨ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"redis","slug":"java/redis","permalink":"http://cyc0819.top/categories/java/redis/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"redis","slug":"redis","permalink":"http://cyc0819.top/tags/redis/"}]},{"title":"Rediså…¥é—¨ä½¿ç”¨","slug":"2021-09-29-Redisçš„å…¥é—¨ä½¿ç”¨","date":"2021-09-28T17:01:06.000Z","updated":"2021-12-08T09:29:20.075Z","comments":false,"path":"2021/09/29/2021-09-29-Redisçš„å…¥é—¨ä½¿ç”¨/","link":"","permalink":"http://cyc0819.top/2021/09/29/2021-09-29-Redis%E7%9A%84%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/","excerpt":"","text":"Rediså…¥é—¨ä½¿ç”¨1ã€Redisç®€ä»‹ ç®€ä»‹Redis æ˜¯å®Œå…¨å¼€æºçš„ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ key-value æ•°æ®åº“ã€‚Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚ Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚ ä¼˜åŠ¿ æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚ ä¸°å¯Œçš„æ•°æ®ç±»å‹ â€“ Redisæ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚ åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish/subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚ 2ã€Rediså®‰è£…2.1ã€windowå®‰è£…ä¸‹è½½åœ°å€ï¼šhttps://github.com/tporadowski/redis/releasesã€‚** æ ¹æ®è‡ªå·±ç”µè„‘æ˜¯32ä½æˆ–è€…64ä½çš„ä¸‹è½½ç›¸å¯¹åº”å¾—ç‰ˆæœ¬ï¼Œå°±å¯ä»¥è¿›è¡Œå®‰è£…ä½¿ç”¨ **è§£å‹æ–‡ä»¶å¤¹ä¹‹åè¿›å…¥æ–‡ä»¶å¤¹å¾—ç›®å½•ä¸‹æ‰“å¼€cmdè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥è¿è¡Œredisredis-server.exe redis.windows.confé‡æ–°æ‰“å¼€ä¸€ä¸ªcmdï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥è¿›è¡Œæ•°æ®åº“æ“ä½œredis-cli.exe -h 127.0.0.1 -p 6379 2.2ã€Linuxå®‰è£…ä¸‹è½½åœ°å€ï¼šhttp://redis.io/download ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚åœ¨linuxä¸­å¯¹å‹ç¼©åŒ…è¿›è¡Œè§£å‹ä¹‹åè¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹è¿›è¡Œmakeæ“ä½œ 1234# wget http://download.redis.io/releases/redis-6.0.8.tar.gz# tar xzf redis-6.0.8.tar.gz# cd redis-6.0.8# make makeä¹‹åï¼Œsrcç›®å½•ä¸‹é¢å°±ä¼šå‡ºç°ä¸€ä¸ªredis-serverçš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å¯åŠ¨Redisï¼Œå¦‚ä¸‹ 12# cd src# ./redis-server é™¤æ­¤ä¹‹å¤–ï¼ŒRedisè¿˜ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹Redisçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶è¿è¡Œï¼Œå¦‚ä¸‹ 12# cd src# ./redis-server ../redis.conf 2.3ã€Ubuntu apt å‘½ä»¤å®‰è£…Ubuntuç³»ç»Ÿä¸åƒå…¶ä»–çš„linuxç³»ç»Ÿï¼Œå®ƒå¯ä»¥é€šè¿‡å‘½ä»¤æ¥åœ¨çº¿å®‰è£…åœ¨ Ubuntu ç³»ç»Ÿå®‰è£… Redis å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: 12# sudo apt update# sudo apt install redis-server ç„¶åå¯ä»¥å¯åŠ¨ 1# redis-server 3ã€Redisçš„æ•°æ®ç±»å‹3.1ã€Stringç±»å‹å­—ç¬¦ä¸²ç±»å‹ï¼Œæ˜¯ä¸€ç§æˆ‘ä»¬å¹³å¸¸æœ€å¸¸è§åˆ°çš„ä¸€ç§æ•°æ®ç±»å‹ä¹‹ä¸€æˆ‘ä»¬ä½¿ç”¨setå’Œgetå­˜å–æ•°æ®æ—¶ï¼Œä¸€èˆ¬å°±æ˜¯Stringçš„ç±»å‹ï¼Œå¦‚ä¸‹ 1234redis 127.0.0.1:6379&gt; SET name &quot;é™ˆç›Šè´¢&quot;OKredis 127.0.0.1:6379&gt; GET name&quot;é™ˆç›Šè´¢&quot; å…¶ä¸­ï¼Œnameå°±æ˜¯keyï¼Œâ€é™ˆç›Šè´¢â€å°±æ˜¯æ‰€å¯¹åº”çš„å€¼ 3.2ã€Hashç±»å‹Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=&gt;value)å¯¹é›†åˆã€‚Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ä¾‹å­å¦‚ä¸‹ï¼š 123456redis 127.0.0.1:6379&gt; HMSET names name1 &quot;chenyicai&quot; name1 &quot;George&quot;&quot;OK&quot;redis 127.0.0.1:6379&gt; HGET names name1&quot;Hello&quot;redis 127.0.0.1:6379&gt; HGET names name1&quot;World&quot; 3.3ã€Listç±»å‹Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚ä¾‹å­å¦‚ä¸‹ï¼š 1234567891011redis 127.0.0.1:6379&gt; lpush chen redis(integer) 1redis 127.0.0.1:6379&gt; lpush chen mongodb(integer) 2redis 127.0.0.1:6379&gt; lpush chen rabbitmq(integer) 3redis 127.0.0.1:6379&gt; lrange chen 0 101) &quot;rabbitmq&quot;2) &quot;mongodb&quot;3) &quot;redis&quot;redis 127.0.0.1:6379&gt; å…¶ä¸­lpushè¡¨ç¤ºå­˜æ•°æ®ï¼Œè€Œlrangeè¡¨ç¤ºå–æ•°æ® 3.4ã€setç±»å‹Redis çš„ Set æ˜¯ string ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ä¾‹å­å¦‚ä¸‹ï¼š 12345678910111213redis 127.0.0.1:6379&gt; sadd chen redis(integer) 1redis 127.0.0.1:6379&gt; sadd chen mongodb(integer) 1redis 127.0.0.1:6379&gt; sadd chen rabbitmq(integer) 1redis 127.0.0.1:6379&gt; sadd chen rabbitmq(integer) 0redis 127.0.0.1:6379&gt; smembers chen1) &quot;redis&quot;2) &quot;rabbitmq&quot;3) &quot;mongodb&quot; å…¶ä¸­saddè¡¨ç¤ºæ·»åŠ æ•°æ®ï¼Œsmembersè¡¨ç¤ºå–å‡ºæ•°æ®æ³¨æ„ï¼šä»¥ä¸Šå®ä¾‹ä¸­ rabbitmq æ·»åŠ äº†ä¸¤æ¬¡ï¼Œä½†æ ¹æ®é›†åˆå†…å…ƒç´ çš„å”¯ä¸€æ€§ï¼Œç¬¬äºŒæ¬¡æ’å…¥çš„å…ƒç´ å°†è¢«å¿½ç•¥ 3.5ã€zsetç±»å‹Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚ä¾‹å­Â·å¦‚ä¸‹ï¼š 123456789101112redis 127.0.0.1:6379&gt; zadd chen 0 redis(integer) 1redis 127.0.0.1:6379&gt; zadd chen 0 mongodb(integer) 1redis 127.0.0.1:6379&gt; zadd chen 0 rabbitmq(integer) 1redis 127.0.0.1:6379&gt; zadd chen 0 rabbitmq(integer) 0redis 127.0.0.1:6379&gt; ZRANGEBYSCORE chen 0 10001) &quot;mongodb&quot;2) &quot;rabbitmq&quot;3) &quot;redis&quot; å…¶ä¸­zaddè¡¨ç¤ºå­˜æ•°æ®ï¼ŒZRANGEBYSCOREè¡¨ç¤ºå–æ•°æ®ä¸”è™½ç„¶å­˜äº†ä¸¤æ¬¡ç›¸åŒçš„å­—ç¬¦ï¼Œä½†æ˜¯ä¹Ÿæ˜¯åªä¼šä¿ç•™ä¸€ä¸ª 4ã€åœ¨javaä¸­ä½¿ç”¨Redisä½¿ç”¨Redisæ›´å¤šçš„æƒ…å†µæ˜¯åœ¨javaç¯å¢ƒä¸‹é¢ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦æŒæ¡å¦‚ä½•åœ¨javaä¸­å¯¹Redisè¿›è¡Œæ“ä½œRediså®˜æ–¹ç»™æˆ‘ä»¬æä¾›äº†å¾ˆæ–¹ä¾¿çš„å·¥å…·æ¥è¿›è¡ŒRedisçš„æ“ä½œï¼šJedis é¦–å…ˆä½ éœ€è¦ä¸‹è½½é©±åŠ¨åŒ… ä¸‹è½½ jedis.jarï¼Œç¡®ä¿ä¸‹è½½æœ€æ–°é©±åŠ¨åŒ…ã€‚ 4.1ã€è¿æ¥åˆ°Redisé…ç½®å®Œæˆä¹‹åæˆ‘ä»¬å°±å¯ä»¥è¿æ¥åˆ°Redisäº†ã€‚ä¾‹å­å¦‚ä¸‹ï¼š 12345678910111213import redis.clients.jedis.Jedis; public class RedisJava &#123; public static void main(String[] args) &#123; //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); // å¦‚æœ Redis æœåŠ¡è®¾ç½®äº†å¯†ç ï¼Œéœ€è¦ä¸‹é¢è¿™è¡Œï¼Œæ²¡æœ‰å°±ä¸éœ€è¦ // jedis.auth(&quot;123456&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot;+jedis.ping()); &#125;&#125; å¦‚æœæ˜¯å¯ä»¥è¿æ¥æˆåŠŸçš„ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªPONGè¡¨ç¤ºå›åº” 4.2ã€Stringç±»å‹çš„å­˜å‚¨12345678910111213import redis.clients.jedis.Jedis; public class RedisStringJava &#123; public static void main(String[] args) &#123; //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //è®¾ç½® redis å­—ç¬¦ä¸²æ•°æ® jedis.set(&quot;name&quot;, &quot;chenyicai&quot;); // è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º System.out.println(&quot;redis å­˜å‚¨çš„å­—ç¬¦ä¸²ä¸º: &quot;+ jedis.get(&quot;name&quot;)); &#125;&#125; æˆåŠŸä¹‹åæ§åˆ¶å°å°±ä¼šæ˜¾ç¤ºnameæ‰€å¯¹åº”çš„å€¼ï¼šchenyicai 4.3ã€Listç±»å‹çš„å­˜å‚¨12345678910111213141516171819import java.util.List;import redis.clients.jedis.Jedis; public class RedisListJava &#123; public static void main(String[] args) &#123; //è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡ Jedis jedis = new Jedis(&quot;localhost&quot;); System.out.println(&quot;è¿æ¥æˆåŠŸ&quot;); //å­˜å‚¨æ•°æ®åˆ°åˆ—è¡¨ä¸­ jedis.lpush(&quot;site-list&quot;, &quot;Baidu&quot;); jedis.lpush(&quot;site-list&quot;, &quot;Google&quot;); jedis.lpush(&quot;site-list&quot;, &quot;Taobao&quot;); // è·å–å­˜å‚¨çš„æ•°æ®å¹¶è¾“å‡º List&lt;String&gt; list = jedis.lrange(&quot;site-list&quot;, 0 ,2); for(int i=0; i&lt;list.size(); i++) &#123; System.out.println(&quot;åˆ—è¡¨é¡¹ä¸º: &quot;+list.get(i)); &#125; &#125;&#125; æˆåŠŸä¹‹åæ§åˆ¶å°å°±ä¼šè¿”å›ä¿¡æ¯ 123åˆ—è¡¨é¡¹ä¸º: Taobaoåˆ—è¡¨é¡¹ä¸º: Googleåˆ—è¡¨é¡¹ä¸º: Baidu 5ã€åœ¨SpringBootä¸­ä½¿ç”¨Redisä¸€èˆ¬åœ¨SpringBootä¸­ä½¿ç”¨Redisæ—¶æˆ‘ä»¬ä¼šç”¨æ¥åšMysqlæ•°æ®åº“çš„äºŒçº§ç¼“å­˜ï¼Œè¿™æ ·å­åœ¨æˆ‘ä»¬è·å–æ•°æ®çš„æ—¶å€™å°±ä¸éœ€è¦æ¯æ¬¡éƒ½åˆ°æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œå¤§å¤§æé«˜äº†æŸ¥è¯¢çš„æ•ˆç‡ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨mavenä¸­å¼•å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; ç„¶ååœ¨ymlé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®Redisçš„ç›¸å…³é…ç½®æ–‡ä»¶ 123456789101112spring: redis: database: 0 host: localhost port: 6379 password: timeout: 500 pool: max-active: 8 max-idle: 8 min-idle: 0 max-wait: -1 æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªConfigç±»æ¥å¤„ç†æ•°æ®çš„åºåˆ—åŒ–ï¼Œå¦åˆ™åŒæ–¹å¯èƒ½ä¼šå‡ºç°ä¹±ç çš„æƒ…å†µ 1234567891011121314151617181920212223242526272829303132333435363738@Configurationpublic class RedisConfig &#123; private RedisConnectionFactory redisConnectionFactory; public RedisConfig(RedisConnectionFactory redisConnectionFactory) &#123; this.redisConnectionFactory = redisConnectionFactory; &#125; /** * redisTemplate åºåˆ—åŒ–ä½¿ç”¨çš„jdkSerializeable, å­˜å‚¨äºŒè¿›åˆ¶å­—èŠ‚ç , æ‰€ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–ç±» * * @return */ @Bean public RedisTemplate&lt;Object, Object&gt; redisTemplate() &#123; RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;(); redisTemplate.setConnectionFactory(redisConnectionFactory); // ä½¿ç”¨Jackson2JsonRedisSerialize æ›¿æ¢é»˜è®¤åºåˆ—åŒ– Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class); ObjectMapper objectMapper = new ObjectMapper(); objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY); objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); jackson2JsonRedisSerializer.setObjectMapper(objectMapper); // è®¾ç½®valueçš„åºåˆ—åŒ–è§„åˆ™å’Œ keyçš„åºåˆ—åŒ–è§„åˆ™ redisTemplate.setKeySerializer(new StringRedisSerializer()); redisTemplate.setValueSerializer(jackson2JsonRedisSerializer); redisTemplate.setHashKeySerializer(new StringRedisSerializer()); redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer); redisTemplate.afterPropertiesSet(); return redisTemplate; &#125;&#125; åˆ›å»ºä¸€ä¸ªcacheçš„å®ç°ç±»ç”¨äºå°†æŸ¥å‡ºæ¥çš„æ•°æ®æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œå¹¶è®¾ç½®ä¸€äº›ç¼“å­˜çš„é…ç½®,é‡Œé¢åŒ…æ‹¬äº†ä¸€äº›æœ‰å…³å¢åˆ æ”¹çš„é…ç½®æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121public class MybatisRedisCache implements Cache &#123; private Object key; private String id; private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock(); private RedisTemplate&lt;Object, Object&gt; redisTemplate; private final String COMMON_CACHE_KEY = &quot;MYBATIS:&quot;; /** * é»˜è®¤ç¼“å­˜å¯¹è±¡çš„ç¼“å­˜æ—¶é—´ä¸º 1 åˆ†é’Ÿ **/ private static final long EXPRIRE_TIME_IN_MINUT = 30; public MybatisRedisCache(String id) &#123; if (id == null) &#123; throw new IllegalArgumentException(&quot;ç¼“å­˜å¯¹è±¡idæ˜¯ä¸èƒ½ä¸ºç©ºçš„&quot;); &#125; this.id = id; &#125; private RedisTemplate&lt;Object, Object&gt; getRedisTemplate() &#123; if (redisTemplate == null) &#123; redisTemplate = ApplicationContextHolder.getBean(&quot;redisTemplate&quot;); &#125; return redisTemplate; &#125; @Override public String getId() &#123; return id; &#125; @Override public void putObject(Object key, Object value) &#123; try &#123; RedisTemplate redisTemplate = getRedisTemplate(); //ä½¿ç”¨redisTemplateå¾—åˆ°å€¼æ“ä½œå¯¹è±¡ ValueOperations operation = redisTemplate.opsForValue(); //ä½¿ç”¨å€¼æ“ä½œå¯¹è±¡operationè®¾ç½®ç¼“å­˜å¯¹è±¡ operation.set(getKey(key), value, EXPRIRE_TIME_IN_MINUT, TimeUnit.MINUTES);// System.out.println(&quot;ç¼“å­˜å¯¹è±¡ä¿å­˜æˆåŠŸ&quot;); &#125; catch (Throwable t) &#123; System.err.println(&quot;ç¼“å­˜å¯¹è±¡ä¿å­˜å¤±è´¥&quot; + t); &#125; &#125; public Object getKey() &#123; return key; &#125; public void setKey(Object key) &#123; this.key = key; &#125; @Override public Object getObject(Object key) &#123; try &#123; setKey(key); RedisTemplate redisTemplate = getRedisTemplate(); ValueOperations operations = redisTemplate.opsForValue(); Object result = operations.get(getKey(key));// System.out.println(&quot;è·å–ç¼“å­˜å¯¹è±¡æˆåŠŸ&quot;); return result; &#125; catch (Throwable t) &#123; System.err.println(&quot;ç¼“å­˜å¯¹è±¡è·å–å¤±è´¥&quot; + t); return null; &#125; &#125; @Override public Object removeObject(Object key) &#123; try &#123; RedisTemplate redisTemplate = getRedisTemplate(); redisTemplate.delete(getKey(key));// System.out.println(&quot;åˆ é™¤ç¼“å­˜å¯¹è±¡æˆåŠŸï¼&quot;+key); &#125; catch (Throwable t) &#123; System.err.println(&quot;åˆ é™¤ç¼“å­˜å¯¹è±¡å¤±è´¥ï¼&quot; + t); &#125; return null; &#125; @Override public void clear() &#123; try &#123; RedisTemplate redisTemplate = getRedisTemplate(); Set&lt;String&gt; keys = redisTemplate.keys(getKeys()); redisTemplate.delete(keys); System.out.println(&quot;å‡ºç°æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼Œæ¸…ç©ºå¯¹åº”Mapperç¼“å­˜======&gt;&quot; + keys.size()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; /** * æŒ‰ç…§ä¸€å®šè§„åˆ™æ ‡è¯†key */ private String getKey(Object key) &#123; String k=COMMON_CACHE_KEY + this.id + &quot;:&quot; + DigestUtils.md5DigestAsHex(String.valueOf(key).getBytes()); return k; &#125; /** * æ‰€æœ‰key */ private String getKeys() &#123; return COMMON_CACHE_KEY + this.id + &quot;:*&quot;; &#125; @Override public int getSize() &#123; Long size = getRedisTemplate().boundHashOps(getId()).size(); return size == null ? 0 : size.intValue(); &#125; @Override public ReadWriteLock getReadWriteLock() &#123; return readWriteLock; &#125;&#125; ç„¶åæˆ‘ä»¬åœ¨æ•°æ®åº“æŸ¥è¯¢çš„mapper.xmlä¸Šæ·»åŠ ä¸Šä»¥ä¸‹çš„é…ç½®ï¼Œè¡¨ç¤ºå¼€å¯äº†æ•°æ®åº“çš„äºŒçº§ç¼“å­˜ 1&lt;cache type=&quot;com.chen.mysqlredisdemo.cache.MybatisRedisCache&quot;&gt;&lt;/cache&gt; ç„¶ååœ¨Controlleræ–‡ä»¶ä¸­æ³¨å…¥åˆšæ‰å†™å¥½çš„æ–¹æ³• 1234@AutowiredStringRedisTemplate stringRedisTemplate;@AutowiredRedisTemplate redisTemplate; æœ€ååœ¨æ–¹æ³•ä¸­åˆ¤æ–­Redisä¸­æ˜¯å¦æœ‰ç¼“å­˜ï¼Œå¦‚æœæœ‰å°±ä»Redisä¸­å–æ•°æ®ï¼Œå¦åˆ™å°±åˆ°æ•°æ®åº“è¿›è¡ŒæŸ¥æ‰¾ 123456789101112131415@RequestMapping(&quot;/selectForOne/&#123;sId&#125;&quot;) public Student selectStudentForOne(@PathVariable int sId)&#123; String key = &quot;MYBATIS:&quot; + &quot;com.chen.mysqlredisdemo.StudentMapper:&quot;+sId; ValueOperations&lt;String, Student&gt; operations = redisTemplate.opsForValue(); boolean hasKey = redisTemplate.hasKey(key); if (hasKey) &#123; System.out.println(&quot;ç¼“å­˜è¾“å‡º&quot;); Student student = operations.get(key); return student; &#125;else &#123; Student student = studentService.selectStudentForOne(sId); operations.set(key, student);//æŠŠæ•°æ®æ”¾å…¥ç¼“å­˜ return student; &#125; &#125;","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"redis","slug":"java/redis","permalink":"http://cyc0819.top/categories/java/redis/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"redis","slug":"redis","permalink":"http://cyc0819.top/tags/redis/"}]},{"title":"ç®—æ³•å­¦ä¹ _è®¾è®¡æœ‰åºæµ","slug":"2021-09-26-ç®—æ³•å­¦ä¹ _è®¾è®¡æœ‰åºæµ","date":"2021-09-26T13:47:00.000Z","updated":"2021-12-08T09:29:11.997Z","comments":false,"path":"2021/09/26/2021-09-26-ç®—æ³•å­¦ä¹ _è®¾è®¡æœ‰åºæµ/","link":"","permalink":"http://cyc0819.top/2021/09/26/2021-09-26-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E8%AE%BE%E8%AE%A1%E6%9C%89%E5%BA%8F%E6%B5%81/","excerpt":"","text":"è®¾è®¡æœ‰åºæµé¢˜ç›®lettcode-1656é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯æ—¢ç„¶æ˜¯ä¸€ä¸ªæœ‰åºæµï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†å…¶å­˜å‚¨åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åé€šè¿‡æ•°ç»„ä¸‹æ ‡å¯¹æ‰€åœ¨çš„å€¼è¿›è¡Œè®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºn+1çš„æ•°ç»„ï¼Œå°†valueçš„å€¼å­˜åœ¨å…¶ä¸­ã€‚å°†ä¸‹æ ‡æŒ‡é’ˆçš„å€¼è®¾ç½®ä¸º1ï¼Œç„¶ååœ¨æ‰§è¡Œæ—¶è¿›è¡Œå¾ªç¯åŠ 1 æ¥ä¸‹æ¥å°±æ˜¯å¾ªç¯è¯»å–çš„è¿‡ç¨‹ï¼šå½“æˆ‘ä»¬åœ¨æ•°ç»„ä¸­æ’å…¥ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå°±åˆ¤æ–­ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡æ˜¯å¦å°äºnï¼Œä»¥åŠå½“å‰ä¸‹æ ‡å¤„çš„valueå€¼æ˜¯å¦ä¸ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºæˆ‘ä»¬å°±è¿›å…¥å¾ªç¯ï¼Œå°†å…¶å­˜åˆ°ä¸€ä¸ªæ–°çš„é›†åˆä¸­ï¼Œå¹¶å°†å…¶è¾“å‡ºã€‚å¦‚æœä¸ºç©ºçš„æ—¶å€™å°±ä¸æ‰§è¡Œæ–¹æ³•ï¼Œç»§ç»­å¾€æ•°ç»„ä¸­æ·»åŠ valueç›´åˆ°ä¸‹æ ‡ä¸å°äºnä¸ºæ­¢ å…·ä½“ä»£ç 1234567891011121314151617181920212223242526272829class OrderedStream &#123; private String[] arr; private int n; private int ptr; // æ„é€ å‡½æ•° public OrderedStream(int n) &#123; //å› ä¸ºæ•°ç»„çš„ä¸‹æ ‡nä»0å¼€å§‹ï¼Œæ‰€ä»¥æ•°ç»„çš„é•¿åº¦ä¸ºn+1 this.arr=new String[n+1]; this.n=n; this.ptr=1; &#125; public List&lt;String&gt; insert(int idKey, String value) &#123; //å°†valueå­˜åˆ°æ•°ç»„ä¸­ arr[idKey]=value; //åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ List&lt;String&gt; res=new ArrayList&lt;&gt;(); //å¾ªç¯è¯»å–arræ•°ç»„ï¼Œå°†å…¶ä¸­çš„å€¼å†™åˆ°resæ•°ç»„ä¸­ //å½“arr[]ä¸ºnullæ—¶ï¼Œä¸è¿›å…¥å¾ªç¯ while (ptr&lt;=n&amp;&amp;arr[ptr]!=null)&#123; res.add(arr[ptr]); ptr++; &#125; return res; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ç®—æ³•å­¦ä¹ _è®¾è®¡åœè½¦ç³»ç»Ÿ","slug":"2021-09-26-ç®—æ³•å­¦ä¹ _è®¾è®¡åœè½¦ç³»ç»Ÿ","date":"2021-09-26T06:06:30.000Z","updated":"2021-12-08T09:29:00.477Z","comments":false,"path":"2021/09/26/2021-09-26-ç®—æ³•å­¦ä¹ _è®¾è®¡åœè½¦ç³»ç»Ÿ/","link":"","permalink":"http://cyc0819.top/2021/09/26/2021-09-26-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E8%AE%BE%E8%AE%A1%E5%81%9C%E8%BD%A6%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"è®¾è®¡åœè½¦ç³»ç»Ÿé¢˜ç›®lettcode-1603é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯æ¯ç§è½¦éƒ½æœ‰æ¯ç§è½¦æ‰€å¯¹åº”çš„ä¸€ä¸ªè½¦ä½ï¼Œè€Œä¸”ä¸èƒ½åœåˆ°å…¶ä»–è½¦çš„è½¦ä½ä¸Šé¢å»ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬éœ€è¦ä¸‰ä¸ªå˜é‡å°†æ¯ç§è½¦çš„è½¦ä½æ•°é‡å­˜èµ·æ¥ã€‚ç„¶ååœ¨æœ‰æ–°è½¦è¿›æ¥æ—¶ï¼Œåˆ¤æ–­è½¦è¾†çš„ç±»å‹ï¼Œç„¶åæŸ¥æ‰¾ç›¸åº”çš„åœè½¦ä½ï¼Œå¦‚æœæœ‰è½¦ä½å°±è¿”å›ä¸€ä¸ªtrueï¼Œç›¸å½“äºåœè½¦æˆåŠŸï¼Œç„¶åè¯¥ç±»å‹çš„è½¦ä½å‡å»ä¸€ä¸ªï¼Œå¦‚æœè½¦ä½ä¸º0ï¼Œåˆ™ä¸å…è®¸åœè½¦ï¼Œè¿”å›false å…·ä½“ä»£ç 1234567891011121314151617181920212223242526272829303132class ParkingSystem &#123; int big; int medium; int small; // æ„é€ å‡½æ•° public ParkingSystem(int big, int medium, int small) &#123; this.big=big; this.medium=medium; this.small=small; &#125; public boolean addCar(int carType) &#123; if (carType==1)&#123; if (this.big&gt;0)&#123; this.big--; return true; &#125; &#125;else if (carType==2)&#123; if (this.medium&gt;0)&#123; this.medium--; return true; &#125; &#125;else if (carType==3)&#123; if (this.small&gt;0)&#123; this.small--; return true; &#125; &#125; return false; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"javaæ ˆ","slug":"2021-09-25-javaæ ˆ","date":"2021-09-25T05:40:27.000Z","updated":"2021-12-08T09:32:42.817Z","comments":false,"path":"2021/09/25/2021-09-25-javaæ ˆ/","link":"","permalink":"http://cyc0819.top/2021/09/25/2021-09-25-java%E6%A0%88/","excerpt":"","text":"javaæ ˆæ ˆæ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ï¼Œæƒ³è¦è‡ªå·±å®ç°ä¸€ä¸ªæ ˆï¼Œè¦æ±‚è¿™ä¸ªæ ˆå…·æœ‰push()ï¼Œpop()â€”â€”è¿”å›æ ˆé¡¶å¹¶å‡ºæ ˆï¼Œpeek()â€”â€”è¿”å›æ ˆé¡¶ä¸å‡ºæ ˆï¼ŒisEmpty()ç­‰æ–¹æ³•ã€‚ 1.1ã€æ‰‹åŠ¨å®ç°ä¸€ä¸ªæ ˆçš„å¤šç§æ–¹å¼ é‡‡ç”¨æ•°ç»„æ¥å®ç°æ ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677import java.util.Arrays;/** * @author George * @project testDemo * @package abc * @date 2021/9/25 19:59 * @since 1.0 */class Stack1&lt;T&gt; &#123; // å®ç°æ ˆçš„æ•°ç»„ private Object[] stack; // æ•°ç»„å¤§å° private int size; Stack1()&#123; stack=new Object[10]; &#125; // åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º public boolean isEmpty()&#123; if (size==0)&#123; return true; &#125;else&#123; return false; &#125; &#125; // è¿”å›æ ˆé¡¶å…ƒç´  public T peek()&#123; T t=null; if (size&gt;0)&#123; t= (T) stack[size-1]; &#125; return t; &#125; // è¿”å›æ ˆé¡¶å¹¶å‡ºæ ˆ public T pop()&#123; T t=peek(); if(size&gt;0)&#123; stack[size-1]=null; size--; &#125; return t; &#125; // æ‰©å®¹ public void expandCapacity(int size)&#123; int len=stack.length; if (size&gt;len)&#123; size=size*3/2+1; stack= Arrays.copyOf(stack,size); &#125; &#125; public void push(T t)&#123; expandCapacity(size+1); stack[size]=t; size++; &#125;&#125;public class ArrayStack &#123; public static void main(String[] args) &#123; Stack1&lt;String&gt; stringStack1=new Stack1&lt;&gt;(); System.out.println(stringStack1.peek()); System.out.println(stringStack1.isEmpty()); stringStack1.push(&quot;java&quot;); stringStack1.push(&quot;chenyc2021@qq.com&quot;); stringStack1.push(&quot;gogogo&quot;); System.out.println(stringStack1.pop()); System.out.println(stringStack1.isEmpty()); System.out.println(stringStack1.peek()); &#125;&#125; é‡‡ç”¨é“¾è¡¨æ¥å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677/** * @author George * @project testDemo * @package abc * @date 2021/9/26 0:49 * @since 1.0 */class Stack2&lt;T&gt; &#123; // å®šä¹‰ä¸€ä¸ªé“¾è¡¨ class Node&lt;T&gt; &#123; private T t; private Node next; &#125; private Node&lt;T&gt; head; // æ„é€ å‡½æ•° Stack2() &#123; head = null; &#125; // å…¥æ ˆ public void push(T t) &#123; if (t == null) &#123; throw new NullPointerException(&quot;å‚æ•°ä¸èƒ½ä¸ºç©º&quot;); &#125; if (head == null) &#123; head = new Node&lt;T&gt;(); head.t = t; head.next = null; &#125; else &#123; Node&lt;T&gt; temp = head; head = new Node&lt;T&gt;(); head.t = t; head.next = temp; &#125; &#125; // å‡ºæ ˆ public T pop() &#123; T t = head.t; head = head.next; return t; &#125; // æ ˆé¡¶å…ƒç´  public T peek() &#123; T t = head.t; return t; &#125; //åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º public boolean isEmpty() &#123; if (head == null) &#123; return true; &#125; else &#123; return false; &#125; &#125;&#125;public class LinkStack &#123; public static void main(String[] args) &#123; Stack2 stack = new Stack2(); System.out.println(stack.isEmpty()); stack.push(&quot;Java&quot;); stack.push(&quot;is&quot;); stack.push(&quot;beautiful&quot;); System.out.println(stack.peek()); System.out.println(stack.peek()); System.out.println(stack.pop()); System.out.println(stack.pop()); System.out.println(stack.isEmpty()); System.out.println(stack.pop()); System.out.println(stack.isEmpty()); &#125;&#125; é‡‡ç”¨LinkedListå®ç°æ ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253 import java.util.LinkedList;/** * @author George * @project testDemo * @package abc * @date 2021/9/26 9:39 * @since 1.0 */class Stack3&lt;T&gt;&#123; // æ„å»ºä¸€ä¸ªlinkedLIsté›†åˆ private LinkedList&lt;T&gt; ll=new LinkedList&lt;&gt;(); // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º public boolean isEmpty()&#123; return ll.isEmpty(); &#125; // å…¥æ ˆ public void push(T t)&#123; ll.addFirst(t); &#125; //å‡ºæ ˆ public T pop()&#123; return ll.removeFirst(); &#125; // æ ˆé¡¶å…ƒç´  public T peek()&#123; T t=null; if (!ll.isEmpty())&#123; t=ll.getFirst(); &#125; return t; &#125;&#125;public class LinkedStack &#123; public static void main(String[] args) &#123; Stack3&lt;String&gt; stringStack3=new Stack3&lt;&gt;(); System.out.println(stringStack3.isEmpty()); System.out.println(stringStack3.peek()); stringStack3.push(&quot;java&quot;); stringStack3.push(&quot;is&quot;); stringStack3.push(&quot;beautiful&quot;); System.out.println(stringStack3.peek()); System.out.println(stringStack3.pop()); System.out.println(stringStack3.isEmpty()); System.out.println(stringStack3.peek()); &#125;&#125; 1.2ã€æ ˆçš„åº”ç”¨åœ¨javaä¸­ï¼Œæ ˆæ˜¯ä¸€ç§å¾ˆé‡è¦çš„æ•°æ®ç»“æ„ï¼Œå¦‚ä»¥ä¸‹çš„å¾ˆå¤šåœºæ™¯éƒ½åº”ç”¨åˆ°äº†æ ˆ ç¬¦å·åŒ¹é… ä¸­ç¼€è¡¨è¾¾å¼å˜ä¸ºåç¼€è¡¨è¾¾å¼ è®¡ç®—åç¼€è¡¨è¾¾å¼ å®ç°å‡½æ•°çš„åµŒå¥—è°ƒç”¨ HTMLå’ŒXMLä¸­çš„æ ‡ç­¾åŒ¹é… ç½‘é¡µæµè§ˆå™¨ä¸­ä»¥è®¿é—®ç•Œé¢çš„å†å²è®°å½• ä¾‹å¦‚ï¼š ç¬¦å·åŒ¹é…åœ¨ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¯¸å¦‚åœ†æ‹¬å·â€œ()â€ä¸èŠ±æ‹¬å·â€œ{}â€ï¼Œè¿™äº›ç¬¦å·éƒ½å¿…é¡»æ˜¯å·¦å³åŒ¹é…çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç¬¦åˆåŒ¹é…ç±»å‹ï¼Œå½“ç„¶ç¬¦åˆä¸ä»…éœ€è¦ä¸ªæ•°ç›¸ç­‰ï¼Œè€Œä¸”éœ€è¦å…ˆå·¦åå³çš„ä¾æ¬¡å‡ºç°ï¼Œå¦åˆ™å°±ä¸ç¬¦åˆåŒ¹é…è§„åˆ™ï¼Œå¦‚â€œ)(â€ï¼Œæ˜æ˜¾æ˜¯é”™è¯¯çš„åŒ¹é…ï¼Œè€Œâ€œ()â€æ‰æ˜¯æ­£ç¡®çš„åŒ¹é…ã€‚æœ‰æ—¶å€™ç¬¦åˆå¦‚æ‹¬å·è¿˜ä¼šåµŒå¥—å‡ºç°ï¼Œå¦‚â€œ9-(5+(5+1))â€,è€ŒåµŒå¥—çš„åŒ¹é…åŸåˆ™æ˜¯ä¸€ä¸ªå³æ‹¬å·ä¸å…¶å‰é¢æœ€è¿‘çš„ä¸€ä¸ªæ‹¬å·åŒ¹é…ï¼Œäº‹å®ä¸Šç¼–è¯‘å™¨å¸®æˆ‘æ£€æŸ¥è¯­æ³•é”™è¯¯æ˜¯ä¹Ÿæ˜¯æ‰§è¡Œä¸€æ ·çš„åŒ¹é…åŸç†ï¼Œè€Œè¿™ä¸€ç³»åˆ—æ“ä½œéƒ½éœ€è¦å€ŸåŠ©æ ˆæ¥å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨æ ˆæ¥å®ç°æ‹¬å·â€()â€æ˜¯å¦åŒ¹é…çš„æ£€æµ‹ã€‚åˆ¤æ–­åŸåˆ™å¦‚ä¸‹ï¼ˆstr=â€((5-3)*8-2)â€ï¼‰ï¼š a.è®¾ç½®stræ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œä»å·¦åˆ°å³ä¾æ¬¡å¯¹å­—ç¬¦ä¸²strä¸­çš„æ¯ä¸ªå­—ç¬¦charè¿›è¡Œè¯­æ³•æ£€æµ‹ï¼Œå¦‚æœcharæ˜¯ï¼Œå·¦æ‹¬å·åˆ™å…¥æ ˆï¼Œå¦‚æœcharæ˜¯å³æ‹¬å·åˆ™å‡ºæ ˆ(æœ‰ä¸€å¯¹åŒ¹é…å°±å¯ä»¥å»åŒ¹é…ä¸€ä¸ªå·¦æ‹¬å·ï¼Œå› æ­¤å¯ä»¥å‡ºæ ˆ)ï¼Œè‹¥æ­¤æ—¶å‡ºæ ˆçš„å­—ç¬¦charä¸ºå·¦æ‹¬å·ï¼Œåˆ™è¯´æ˜è¿™ä¸€å¯¹æ‹¬å·åŒ¹é…æ­£å¸¸ï¼Œå¦‚æœæ­¤æ—¶æ ˆä¸ºç©ºæˆ–è€…å‡ºæ ˆå­—ç¬¦ä¸ä¸ºå·¦æ‹¬å·ï¼Œåˆ™è¡¨ç¤ºç¼ºå°‘ä¸charåŒ¹é…çš„å·¦æ‹¬å·ï¼Œå³ç›®å‰ä¸å®Œæ•´ã€‚ b.é‡å¤æ‰§è¡Œaæ“ä½œï¼Œç›´åˆ°stræ£€æµ‹ç»“æŸï¼Œå¦‚æœæ­¤æ—¶æ ˆä¸ºç©ºï¼Œåˆ™å…¨éƒ¨æ‹¬å·åŒ¹é…ï¼Œå¦‚æœæ ˆä¸­è¿˜æœ‰å·¦æ‹¬å·ï¼Œæ˜¯è¯´æ˜ç¼ºå°‘å³æ‹¬å·ã€‚ å®ç°ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233public class CheckExpression &#123; public static String isValid(String expstr) &#123; //åˆ›å»ºæ ˆ LinkedStack&lt;String&gt; stack = new LinkedStack&lt;&gt;(); int i=0; while(i&lt;expstr.length()) &#123; char ch=expstr.charAt(i); i++; switch(ch) &#123; case &#x27;(&#x27;: stack.push(ch+&quot;&quot;);//å·¦æ‹¬å·ç›´æ¥å…¥æ ˆ break; case &#x27;)&#x27;: if (stack.isEmpty() || !stack.pop().equals(&quot;(&quot;)) //é‡è§å³æ‹¬å·å·¦æ‹¬å·ç›´æ¥å‡ºæ ˆ return &quot;(&quot;; &#125; &#125; //æœ€åæ£€æµ‹æ˜¯å¦ä¸ºç©º,ä¸ºç©ºåˆ™æ£€æµ‹é€šè¿‡ if(stack.isEmpty()) return &quot;check pass!&quot;; else return &quot;check exception!&quot;; &#125; public static void main(String args[]) &#123; String expstr=&quot;((5-3)*8-2)&quot;; System.out.println(expstr+&quot; &quot;+isValid(expstr)); &#125;&#125;","categories":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://cyc0819.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://cyc0819.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å‡†å¤‡é˜…è¯»å°ç±³åå¹´çºªå¿µã€Šä¸€å¾€æ— å‰ã€‹","slug":"2021-08-27-å‡†å¤‡é˜…è¯»å°ç±³åå¹´çºªå¿µã€Šä¸€å¾€æ— å‰ã€‹","date":"2021-08-26T16:46:22.000Z","updated":"2021-12-08T10:34:53.458Z","comments":false,"path":"2021/08/27/2021-08-27-å‡†å¤‡é˜…è¯»å°ç±³åå¹´çºªå¿µã€Šä¸€å¾€æ— å‰ã€‹/","link":"","permalink":"http://cyc0819.top/2021/08/27/2021-08-27-%E5%87%86%E5%A4%87%E9%98%85%E8%AF%BB%E5%B0%8F%E7%B1%B3%E5%8D%81%E5%B9%B4%E7%BA%AA%E5%BF%B5%E3%80%8A%E4%B8%80%E5%BE%80%E6%97%A0%E5%89%8D%E3%80%8B/","excerpt":"","text":"å‡†å¤‡é˜…è¯»å°ç±³åå¹´çºªå¿µã€Šä¸€å¾€æ— å‰ã€‹ä½œä¸ºä¸€ä¸ªä¸å¤ªèµ„æ·±çš„è€ç±³ç²‰ï¼Œè‡ªä»å°ç±³å‘å¸ƒæ–°ä¹¦ã€Šä¸€å¾€æ— å‰ã€‹ä»¥æ¥ä¸€ç›´æƒ³é˜…è¯»ä¸€ä¸‹ï¼Œæ„Ÿå—ä¸€ä¸‹å¤§å‚å‘å±•çš„å¿ƒè·¯å†ç¨‹ï¼Œä½†æ˜¯ä¸€ç›´éƒ½æ²¡æœ‰æä¸Šæ—¥ç¨‹ï¼Œè€Œä»Šå¤©å†³å®šæ­£å¼å¼€å§‹é˜…è¯»æ­¤ä¹¦ï¼Œä½†æ˜¯å¯èƒ½è€—æ—¶ä¼šè¾ƒé•¿ï¼Œç°åœ¨è¿™é‡Œåšä¸€ä¸ªæ ‡è®°ï¼Œé˜…è¯»å®Œæ¯•åŠ¡å¿…å®Œæˆä¸€ç¯‡è¯»åæ„Ÿã€‚ 2021.09.21 å› ä¸ºä¸€ç›´éƒ½åœ¨é¢è¯•ï¼Œæ‰€ä»¥é˜…è¯»è®¡åˆ’å¾—å¾€åæ¨è¿Ÿä¸€ç‚¹äº†ã€‚","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/tags/%E9%9A%8F%E7%AC%94/"}]},{"title":"å¯¹SpringIOCçš„ç†è§£","slug":"2021-08-26-å¯¹SpringIOCçš„ç†è§£","date":"2021-08-26T01:45:01.000Z","updated":"2021-12-08T10:35:12.596Z","comments":false,"path":"2021/08/26/2021-08-26-å¯¹SpringIOCçš„ç†è§£/","link":"","permalink":"http://cyc0819.top/2021/08/26/2021-08-26-%E5%AF%B9SpringIOC%E7%9A%84%E7%90%86%E8%A7%A3/","excerpt":"","text":"å¯¹SpringIOCçš„ç†è§£1ã€ä½•ä¸ºIOCâ€‹ IOCâ€”Inversion of Controlï¼Œå³â€œæ§åˆ¶åè½¬â€ï¼Œä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚åœ¨Javaå¼€å‘ä¸­ï¼ŒIOCæ„å‘³ç€å°†ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åœ¨ä½ çš„å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶ã€‚å¦‚ä½•ç†è§£å¥½IOCå‘¢ï¼Ÿç†è§£å¥½Iocçš„å…³é”®æ˜¯è¦æ˜ç¡®â€œè°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆï¼Œä¸ºä½•æ˜¯åè½¬ï¼ˆæœ‰åè½¬å°±åº”è¯¥æœ‰æ­£è½¬äº†ï¼‰ï¼Œå“ªäº›æ–¹é¢åè½¬äº†â€ï¼Œé‚£æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ 1.1 è°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆâ€‹ ä¼ ç»ŸJavaç¨‹åºè®¾è®¡ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡newè¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç¨‹åºä¸»åŠ¨å»åˆ›å»ºä¾èµ–å¯¹è±¡ï¼›è€ŒIOCæ˜¯æœ‰ä¸“é—¨ä¸€ä¸ªå®¹å™¨æ¥åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œå³ç”±IOCå®¹å™¨æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼›è°æ§åˆ¶è°ï¼Ÿå½“ç„¶æ˜¯IOC å®¹å™¨æ§åˆ¶äº†å¯¹è±¡ï¼›æ§åˆ¶ä»€ä¹ˆï¼Ÿé‚£å°±æ˜¯ä¸»è¦æ§åˆ¶äº†å¤–éƒ¨èµ„æºè·å–ï¼ˆä¸åªæ˜¯å¯¹è±¡åŒ…æ‹¬æ¯”å¦‚æ–‡ä»¶ç­‰ï¼‰ 1.2 ä¸ºä½•æ˜¯åè½¬ï¼Œå“ªäº›æ–¹é¢åè½¬äº†â€‹ æœ‰åè½¬å°±æœ‰æ­£è½¬ï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºæ˜¯ç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡ä¸­ä¸»åŠ¨æ§åˆ¶å»ç›´æ¥è·å–ä¾èµ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ­£è½¬ï¼›è€Œåè½¬åˆ™æ˜¯ç”±å®¹å™¨æ¥å¸®å¿™åˆ›å»ºåŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼›ä¸ºä½•æ˜¯åè½¬ï¼Ÿå› ä¸ºç”±å®¹å™¨å¸®æˆ‘ä»¬æŸ¥æ‰¾åŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œå¯¹è±¡åªæ˜¯è¢«åŠ¨çš„æ¥å—ä¾èµ–å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯åè½¬ï¼›å“ªäº›æ–¹é¢åè½¬äº†ï¼Ÿä¾èµ–å¯¹è±¡çš„è·å–è¢«åè½¬äº†ã€‚ 1.3 å›¾ä¾‹è¯´æ˜ä¼ ç»Ÿç¨‹åºè®¾è®¡ä¸‹å›¾ï¼Œéƒ½æ˜¯ä¸»åŠ¨å»åˆ›å»ºç›¸å…³å¯¹è±¡ç„¶åå†ç»„åˆèµ·æ¥ï¼š å½“æœ‰äº†IoC/DIçš„å®¹å™¨åï¼Œåœ¨å®¢æˆ·ç«¯ç±»ä¸­ä¸å†ä¸»åŠ¨å»åˆ›å»ºè¿™äº›å¯¹è±¡äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2ã€IOCèƒ½åšä»€ä¹ˆâ€‹ IOC ä¸æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œåªæ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ä¸ªé‡è¦çš„é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ³•åˆ™ï¼Œå®ƒèƒ½æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•è®¾è®¡å‡ºæ¾è€¦åˆã€æ›´ä¼˜è‰¯çš„ç¨‹åºã€‚ä¼ ç»Ÿåº”ç”¨ç¨‹åºéƒ½æ˜¯ç”±æˆ‘ä»¬åœ¨ç±»å†…éƒ¨ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œä»è€Œå¯¼è‡´ç±»ä¸ç±»ä¹‹é—´é«˜è€¦åˆï¼Œéš¾äºæµ‹è¯•ï¼›æœ‰äº†IOCå®¹å™¨åï¼ŒæŠŠåˆ›å»ºå’ŒæŸ¥æ‰¾ä¾èµ–å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™äº†å®¹å™¨ï¼Œç”±å®¹å™¨è¿›è¡Œæ³¨å…¥ç»„åˆå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´æ˜¯æ¾æ•£è€¦åˆï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿æµ‹è¯•ï¼Œåˆ©äºåŠŸèƒ½å¤ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯ä½¿å¾—ç¨‹åºçš„æ•´ä¸ªä½“ç³»ç»“æ„å˜å¾—éå¸¸çµæ´»ã€‚ å…¶å®IOCå¯¹ç¼–ç¨‹å¸¦æ¥çš„æœ€å¤§æ”¹å˜ä¸æ˜¯ä»ä»£ç ä¸Šï¼Œè€Œæ˜¯ä»æ€æƒ³ä¸Šï¼Œå‘ç”Ÿäº†â€œä¸»ä»æ¢ä½â€çš„å˜åŒ–ã€‚åº”ç”¨ç¨‹åºåŸæœ¬æ˜¯è€å¤§ï¼Œè¦è·å–ä»€ä¹ˆèµ„æºéƒ½æ˜¯ä¸»åŠ¨å‡ºå‡»ï¼Œä½†æ˜¯åœ¨IOC/DIæ€æƒ³ä¸­ï¼Œåº”ç”¨ç¨‹åºå°±å˜æˆè¢«åŠ¨çš„äº†ï¼Œè¢«åŠ¨çš„ç­‰å¾…IOCå®¹å™¨æ¥åˆ›å»ºå¹¶æ³¨å…¥å®ƒæ‰€éœ€è¦çš„èµ„æºäº†ã€‚ IOCå¾ˆå¥½çš„ä½“ç°äº†é¢å‘å¯¹è±¡è®¾è®¡æ³•åˆ™ä¹‹ä¸€â€”â€” å¥½è±åæ³•åˆ™ï¼šâ€œåˆ«æ‰¾æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ‰¾ä½ â€ï¼›å³ç”±IOCå®¹å™¨å¸®å¯¹è±¡æ‰¾ç›¸åº”çš„ä¾èµ–å¯¹è±¡å¹¶æ³¨å…¥ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡ä¸»åŠ¨å»æ‰¾ã€‚ 3ã€IOCå’ŒDIâ€‹ DIâ€”Dependency Injectionï¼Œå³â€œä¾èµ–æ³¨å…¥â€ï¼šç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œå½¢è±¡çš„è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚ä¾èµ–æ³¨å…¥çš„ç›®çš„å¹¶éä¸ºè½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸ºäº†æå‡ç»„ä»¶é‡ç”¨çš„é¢‘ç‡ï¼Œå¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚ ç†è§£DIçš„å…³é”®æ˜¯ï¼šâ€œè°ä¾èµ–è°ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼Œè°æ³¨å…¥è°ï¼Œæ³¨å…¥äº†ä»€ä¹ˆâ€ï¼Œé‚£æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼š è°ä¾èµ–äºè°ï¼šå½“ç„¶æ˜¯åº”ç”¨ç¨‹åºä¾èµ–äºIOCå®¹å™¨ï¼› ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼šåº”ç”¨ç¨‹åºéœ€è¦IOCå®¹å™¨æ¥æä¾›å¯¹è±¡éœ€è¦çš„å¤–éƒ¨èµ„æºï¼› è°æ³¨å…¥è°ï¼šå¾ˆæ˜æ˜¾æ˜¯IOCå®¹å™¨æ³¨å…¥åº”ç”¨ç¨‹åºæŸä¸ªå¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºä¾èµ–çš„å¯¹è±¡ï¼› æ³¨å…¥äº†ä»€ä¹ˆï¼šå°±æ˜¯æ³¨å…¥æŸä¸ªå¯¹è±¡æ‰€éœ€è¦çš„å¤–éƒ¨èµ„æºï¼ˆåŒ…æ‹¬å¯¹è±¡ã€èµ„æºã€å¸¸é‡æ•°æ®ï¼‰ã€‚ IOCå’ŒDIç”±ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå…¶å®å®ƒä»¬æ˜¯åŒä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒè§’åº¦æè¿°ï¼Œç”±äºæ§åˆ¶åè½¬æ¦‚å¿µæ¯”è¾ƒå«ç³Šï¼ˆå¯èƒ½åªæ˜¯ç†è§£ä¸ºå®¹å™¨æ§åˆ¶å¯¹è±¡è¿™ä¸€ä¸ªå±‚é¢ï¼Œå¾ˆéš¾è®©äººæƒ³åˆ°è°æ¥ç»´æŠ¤å¯¹è±¡å…³ç³»ï¼‰ï¼Œæ‰€ä»¥2004å¹´å¤§å¸ˆçº§äººç‰©Martin Fowleråˆç»™å‡ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼šâ€œä¾èµ–æ³¨å…¥â€ï¼Œç›¸å¯¹IOCè€Œè¨€ï¼Œâ€œä¾èµ–æ³¨å…¥â€æ˜ç¡®æè¿°äº†â€œè¢«æ³¨å…¥å¯¹è±¡ä¾èµ–IoCå®¹å™¨é…ç½®ä¾èµ–å¯¹è±¡â€ã€‚ 4ã€å¯¹IOCå’ŒDIçš„ç†è§£4.1ã€IoC(æ§åˆ¶åè½¬) é¦–å…ˆæƒ³è¯´è¯´IoCï¼ˆInversion of Controlï¼Œæ§åˆ¶åè½¬ï¼‰ã€‚è¿™æ˜¯springçš„æ ¸å¿ƒï¼Œè´¯ç©¿å§‹ç»ˆã€‚æ‰€è°“IoCï¼Œå¯¹äºspringæ¡†æ¶æ¥è¯´ï¼Œå°±æ˜¯ç”±springæ¥è´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡é—´çš„å…³ç³»ã€‚è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•æ‰¾å¥³æœ‹å‹çš„ï¼Ÿå¸¸è§çš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬åˆ°å¤„å»çœ‹å“ªé‡Œæœ‰é•¿å¾—æ¼‚äº®èº«æåˆå¥½çš„mmï¼Œç„¶åæ‰“å¬å¥¹ä»¬çš„å…´è¶£çˆ±å¥½ã€qqå·ã€ç”µè¯å·ã€ipå·ã€iqå·â€¦â€¦â€¦ï¼Œæƒ³åŠæ³•è®¤è¯†å¥¹ä»¬ï¼ŒæŠ•å…¶æ‰€å¥½é€å…¶æ‰€è¦ï¼Œç„¶åå˜¿å˜¿â€¦â€¦è¿™ä¸ªè¿‡ç¨‹æ˜¯å¤æ‚æ·±å¥¥çš„ï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±è®¾è®¡å’Œé¢å¯¹æ¯ä¸ªç¯èŠ‚ã€‚ä¼ ç»Ÿçš„ç¨‹åºå¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨å¦å¤–çš„å¯¹è±¡ï¼Œå°±å¿…é¡»å¾—åˆ°å®ƒï¼ˆè‡ªå·±newä¸€ä¸ªï¼Œæˆ–è€…ä»JNDIä¸­æŸ¥è¯¢ä¸€ä¸ªï¼‰ï¼Œä½¿ç”¨å®Œä¹‹åè¿˜è¦å°†å¯¹è±¡é”€æ¯ï¼ˆæ¯”å¦‚Connectionç­‰ï¼‰ï¼Œå¯¹è±¡å§‹ç»ˆä¼šå’Œå…¶ä»–çš„æ¥å£æˆ–ç±»è—•åˆèµ·æ¥ã€‚ é‚£ä¹ˆIoCæ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿæœ‰ç‚¹åƒé€šè¿‡å©šä»‹æ‰¾å¥³æœ‹å‹ï¼Œåœ¨æˆ‘å’Œå¥³æœ‹å‹ä¹‹é—´å¼•å…¥äº†ä¸€ä¸ªç¬¬ä¸‰è€…ï¼šå©šå§»ä»‹ç»æ‰€ã€‚å©šä»‹ç®¡ç†äº†å¾ˆå¤šç”·ç”·å¥³å¥³çš„èµ„æ–™ï¼Œæˆ‘å¯ä»¥å‘å©šä»‹æå‡ºä¸€ä¸ªåˆ—è¡¨ï¼Œå‘Šè¯‰å®ƒæˆ‘æƒ³æ‰¾ä¸ªä»€ä¹ˆæ ·çš„å¥³æœ‹å‹ï¼Œæ¯”å¦‚é•¿å¾—åƒæå˜‰æ¬£ï¼Œèº«æåƒæ—ç†™é›·ï¼Œå”±æ­Œåƒå‘¨æ°ä¼¦ï¼Œé€Ÿåº¦åƒå¡æ´›æ–¯ï¼ŒæŠ€æœ¯åƒé½è¾¾å†…ä¹‹ç±»çš„ï¼Œç„¶åå©šä»‹å°±ä¼šæŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚ï¼Œæä¾›ä¸€ä¸ªmmï¼Œæˆ‘ä»¬åªéœ€è¦å»å’Œå¥¹è°ˆæ‹çˆ±ã€ç»“å©šå°±è¡Œäº†ã€‚ç®€å•æ˜äº†ï¼Œå¦‚æœå©šä»‹ç»™æˆ‘ä»¬çš„äººé€‰ä¸ç¬¦åˆè¦æ±‚ï¼Œæˆ‘ä»¬å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸å†ç”±æˆ‘è‡ªå·±æ§åˆ¶ï¼Œè€Œæ˜¯æœ‰å©šä»‹è¿™æ ·ä¸€ä¸ªç±»ä¼¼å®¹å™¨çš„æœºæ„æ¥æ§åˆ¶ã€‚Springæ‰€å€¡å¯¼çš„å¼€å‘æ–¹å¼å°±æ˜¯å¦‚æ­¤ï¼Œæ‰€æœ‰çš„ç±»éƒ½ä¼šåœ¨springå®¹å™¨ä¸­ç™»è®°ï¼Œå‘Šè¯‰springä½ æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œä½ éœ€è¦ä»€ä¹ˆä¸œè¥¿ï¼Œç„¶åspringä¼šåœ¨ç³»ç»Ÿè¿è¡Œåˆ°é€‚å½“çš„æ—¶å€™ï¼ŒæŠŠä½ è¦çš„ä¸œè¥¿ä¸»åŠ¨ç»™ä½ ï¼ŒåŒæ—¶ä¹ŸæŠŠä½ äº¤ç»™å…¶ä»–éœ€è¦ä½ çš„ä¸œè¥¿ã€‚æ‰€æœ‰çš„ç±»çš„åˆ›å»ºã€é”€æ¯éƒ½ç”± springæ¥æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å¯¹è±¡ç”Ÿå­˜å‘¨æœŸçš„ä¸å†æ˜¯å¼•ç”¨å®ƒçš„å¯¹è±¡ï¼Œè€Œæ˜¯springã€‚å¯¹äºæŸä¸ªå…·ä½“çš„å¯¹è±¡è€Œè¨€ï¼Œä»¥å‰æ˜¯å®ƒæ§åˆ¶å…¶ä»–å¯¹è±¡ï¼Œç°åœ¨æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½è¢«springæ§åˆ¶ï¼Œæ‰€ä»¥è¿™å«æ§åˆ¶åè½¬ã€‚ 4.2ã€DI(ä¾èµ–æ³¨å…¥) IoCçš„ä¸€ä¸ªé‡ç‚¹æ˜¯åœ¨ç³»ç»Ÿè¿è¡Œä¸­ï¼ŒåŠ¨æ€çš„å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡ã€‚è¿™ä¸€ç‚¹æ˜¯é€šè¿‡DIï¼ˆDependency Injectionï¼Œä¾èµ–æ³¨å…¥ï¼‰æ¥å®ç°çš„ã€‚æ¯”å¦‚å¯¹è±¡Aéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œä»¥å‰æˆ‘ä»¬æ€»æ˜¯è¦åœ¨Aä¸­è‡ªå·±ç¼–å†™ä»£ç æ¥è·å¾—ä¸€ä¸ªConnectionå¯¹è±¡ï¼Œæœ‰äº† springæˆ‘ä»¬å°±åªéœ€è¦å‘Šè¯‰springï¼ŒAä¸­éœ€è¦ä¸€ä¸ªConnectionï¼Œè‡³äºè¿™ä¸ªConnectionæ€ä¹ˆæ„é€ ï¼Œä½•æ—¶æ„é€ ï¼ŒAä¸éœ€è¦çŸ¥é“ã€‚åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ï¼Œspringä¼šåœ¨é€‚å½“çš„æ—¶å€™åˆ¶é€ ä¸€ä¸ªConnectionï¼Œç„¶ååƒæ‰“é’ˆä¸€æ ·ï¼Œæ³¨å°„åˆ°Aå½“ä¸­ï¼Œè¿™æ ·å°±å®Œæˆäº†å¯¹å„ä¸ªå¯¹è±¡ä¹‹é—´å…³ç³»çš„æ§åˆ¶ã€‚Aéœ€è¦ä¾èµ– Connectionæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œè¿™ä¸ªConnectionæ˜¯ç”±springæ³¨å…¥åˆ°Aä¸­çš„ï¼Œä¾èµ–æ³¨å…¥çš„åå­—å°±è¿™ä¹ˆæ¥çš„ã€‚é‚£ä¹ˆDIæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ Java 1.3ä¹‹åä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯åå°„ï¼ˆreflectionï¼‰ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€çš„ç”Ÿæˆå¯¹è±¡ã€æ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•ã€æ”¹å˜å¯¹è±¡çš„å±æ€§ï¼Œspringå°±æ˜¯é€šè¿‡åå°„æ¥å®ç°æ³¨å…¥çš„ã€‚ ç†è§£äº†IoCå’ŒDIçš„æ¦‚å¿µåï¼Œä¸€åˆ‡éƒ½å°†å˜å¾—ç®€å•æ˜äº†ï¼Œå‰©ä¸‹çš„å·¥ä½œåªæ˜¯åœ¨springçš„æ¡†æ¶ä¸­å †ç§¯æœ¨è€Œå·²ã€‚ 5ã€åŸæ–‡åœ°å€https://www.iteye.com/blog/jinnianshilongnian-1413846","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"}]},{"title":"æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å­¦ä¹ æ€»ç»“","slug":"2021-08-20-æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å­¦ä¹ æ€»ç»“","date":"2021-08-19T17:16:32.000Z","updated":"2021-12-10T04:44:18.207Z","comments":false,"path":"2021/08/20/2021-08-20-æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å­¦ä¹ æ€»ç»“/","link":"","permalink":"http://cyc0819.top/2021/08/20/2021-08-20-%E6%9C%80%E8%BF%91%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/","excerpt":"","text":"æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å­¦ä¹ æ€»ç»“é¡¹ç›®éƒ¨åˆ† å®Œæˆäº†å­¦ç”Ÿå®¿èˆç³»ç»Ÿçš„ç­”è¾© æˆåŠŸå°†å­¦ç”Ÿå®¿èˆä¸ºç³»ç»Ÿéƒ¨ç½²åˆ°äº†æœåŠ¡å™¨ä¸Š å‡†å¤‡è¿›è¡Œå­¦ç”Ÿå®¿èˆç³»ç»Ÿçš„å°ç¨‹åºçš„è®¾è®¡ï¼Œä½†æ˜¯å®åœ¨æ˜¯æ²¡æœ‰æ—¶é—´ å®Œæˆäº†å›½åŒ»å ‚å°ç¨‹åºçš„å¼€å‘(React+Taro+Taro UI) å®Œæˆäº†å°ç¨‹åºAPIçš„å¼€å‘(Vue+SpringBoot+MyBatis-Plus) å›½åŒ»å ‚å°ç¨‹åºåå°å¼€å‘å®Œæ¯•(VUE+SpringBoot+MyBatis-Plus+Element-UI) å‡†å¤‡è¿›è¡Œä¸­åŒ»è¯é—¨æˆ·æˆ–è€…æ¡‚æ—åŒ»å­¦é™¢æŠ¥ä¿®ç³»ç»Ÿå¼€å‘ç¯å¢ƒçš„æ­å»º æ¡†æ¶éƒ¨åˆ† å­¦ä¹ äº†SpringSecurityï¼Œå¹¶å®Œæˆäº†Sessionä»¥åŠTokenä¸¤ç§æƒ…å†µä¸‹çš„åº”ç”¨Demo MyBatis-Plusé€†å‘å·¥ç¨‹(ä»£ç ç”Ÿæˆå™¨) Shiroçš„åŸºæœ¬ä½¿ç”¨ å…¥é—¨Activiti(å·¥ä½œæµ) å‡†å¤‡å­¦äº›RabbitMQã€ MyBatis-Plusé€†å‘å·¥ç¨‹3.5.0ç‰ˆæœ¬ä¹‹ä¹‹å‰æ˜¯settingæ¨¡å¼ï¼Œä¹‹åæ˜¯buildingæ¨¡å¼ å…¥é—¨äº†Reactä»¥åŠVueä¸¤ä¸ªæœ‰åçš„å‰ç«¯æ¡†æ¶çš„ä½¿ç”¨ ElementUIï¼ŒLayUIï¼ŒBootstrapç­‰UIçš„ä½¿ç”¨ åŸºç¡€çŸ¥è¯† å¤ä¹ äº†ä¸‹AOPæ€æƒ³ï¼Œå¹¶å‡†å¤‡ä½¿ç”¨åˆ°æ—¥å¿—ä¸­ HashMapå’ŒHashTableçš„åŒºåˆ« æœåŠ¡å™¨ æ‰‹åŠ¨å°†webé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š å¤ä¹ äº†Linuxçš„æŒ‡ä»¤ å¤‡æ³¨çœ‹åˆ°åŒå­¦é¢è¯•äº¬ä¸œæ‰€å›ç­”çš„é—®é¢˜ï¼Œä»¥åŠå…¶ä»–åŒå­¦æ‰€æ€»ç»“çš„çŸ¥è¯†ç‚¹ï¼Œæ„Ÿè§‰è‡ªå·±å’Œåˆ«äººç›¸æ¯”æœ‰å¾ˆå¤§çš„è¿›æ­¥ç©ºé—´","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/"},{"name":"å­¦ä¹ æ€»ç»“","slug":"éšç¬”/å­¦ä¹ æ€»ç»“","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"}],"tags":[{"name":"å­¦ä¹ æ€»ç»“","slug":"å­¦ä¹ æ€»ç»“","permalink":"http://cyc0819.top/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"}]},{"title":"shiroå®‰å…¨æ¡†æ¶","slug":"2021-08-01-shiroå®‰å…¨æ¡†æ¶","date":"2021-08-01T12:19:41.000Z","updated":"2021-12-08T10:35:27.747Z","comments":false,"path":"2021/08/01/2021-08-01-shiroå®‰å…¨æ¡†æ¶/","link":"","permalink":"http://cyc0819.top/2021/08/01/2021-08-01-shiro%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/","excerpt":"","text":"shiroå®‰å…¨æ¡†æ¶1ã€ç®€è¿°shiroæ˜¯apacheå…¬å¸æ‰€å‡ºå“çš„å¼€æºå®‰å…¨æ¡†æ¶å…¶å¯ä»¥ç”¨äºï¼š å¤„ç†èº«ä»½è®¤è¯ æˆæƒ ä¼ä¸šä¼šè¯ç®¡ç†å’ŒåŠ å¯† ç›¸å¯¹äºSpring securityæ¥è¯´æ›´åŠ ç®€å•ï¼Œä½¿ç”¨ä¹Ÿæ›´åŠ çµæ´» åœ¨ä½¿ç”¨shiroçš„æ—¶å€™å¯ä»¥ä¸ä¾èµ–äºä»»ä½•å®¹å™¨ï¼Œæ—¢å¯ä»¥åœ¨javaSEä¸‹ä½¿ç”¨ï¼ŒåŒæ ·å¯ä»¥åœ¨JavaEEä¸‹ä½¿ç”¨ 2ã€æ¶æ„ ä½¿ç”¨ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯æ„å»ºä»¤ç‰Œ12UsernamePasswordToken token = new UsernamePasswordToken(username, password); tokenå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç”¨æˆ·ä»¤ç‰Œï¼Œç­‰äºçš„è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºshiroæ£€éªŒç”¨æˆ·ä»¤ç‰Œæ˜¯å¦å…·æœ‰åˆæ³•çš„èº«ä»½ä»¥åŠç›¸å…³çš„æƒé™ æ‰§è¡Œç™»å½• 123SecurityUtils.setSecurityManager(securityManager); // æ³¨å…¥SecurityManagerSubject subject = SecurityUtils.getSubject(); // è·å–Subjectå•ä¾‹å¯¹è±¡subject.login(token); // æ‰§è¡Œç™»å½• shiroä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±æ˜¯securityMangerï¼Œå®ƒä¸»è¦è´Ÿè´£å®‰å…¨è®¤è¯å’Œæˆæƒã€‚å½“æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªæ¡†æ¶çš„æ—¶å€™ï¼Œshiroå·²ç»å°†ä¸€åˆ‡çš„æ“ä½œå°è£…æˆä¸€ä¸ªç›’å­äº†ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªé»‘ç›’æ¥è¿›è¡Œä½¿ç”¨ã€‚SecurityUtilså¯¹è±¡ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå·¥å‚ç±»ä¼¼Springä¸­çš„ApplicationContextã€‚Subjectï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯é¡¹ç›®çš„æ„æ€ï¼Œä»–æ˜¯ä¸€ä¸ªéœ€è¦é€šè¿‡shiroä¿æŠ¤çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚é€šè¿‡1ä»¤ç‰Œå’Œé¡¹ç›®çš„ç™»å½•å…³ç³»ï¼Œä¿è¯äº†æˆ‘ä»¬çš„å®‰å…¨ã€‚ åˆ¤æ–­ç”¨æˆ· è¿™ä¸€æ­¥ä¸­çš„å†…å®¹shiroæ— æ³•å¸®æˆ‘ä»¬è¿›è¡Œå®ç°ï¼Œæˆ‘ä»¬åªæœ‰é€šè¿‡æœ€åŸå§‹çš„æ‰‹æ®µæ¥å®ç°ç™»å½•ç”¨æˆ·çš„åˆ¤æ–­ï¼Œå°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ã€‚ ä¾‹å¦‚ï¼š 123456if (!token.getUsername().equals(name)) &#123; //shiroåº•å±‚ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ return null;&#125;//åˆ¤æ–­å¯†ç return new SimpleAuthenticationInfo(&quot;&quot;, password, &quot;&quot;); ç¬¬ä¸€ä¸ªifè¯­å¥ä¸­é¦–å…ˆä¼šåˆ¤æ–­æ•°æ®åº“ä¸­æŸ¥åˆ°çš„nameäºè¾“å…¥çš„ç”¨æˆ·å2æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ç„¶åSimpleAuthenticationInfoä¸­å¯ä»¥ç”¨äºåˆ¤æ–­å¯†ç çš„æ­£ç¡®æ€§ï¼ŒåŒæ ·æ˜¯ä»æ•°æ®åº“æŸ¥å‡ºæ¥çš„æ•°æ®åšå¯¹æ¯”ã€‚ 3ã€å®ç°Realm åˆ›å»ºä¸€ä¸ªRealm Realmå³é¢†åŸŸï¼Œç›¸å½“äºdatasourceæ•°æ®æºï¼ŒsecurityManagerè¿›è¡Œå®‰å…¨è®¤è¯éœ€è¦é€šè¿‡Realmè·å–ç”¨æˆ·æƒé™æ•°æ®ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·èº«ä»½æ•°æ®åœ¨æ•°æ®åº“é‚£ä¹ˆrealmå°±éœ€è¦ä»æ•°æ®åº“è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä½†æ˜¯Realmå¹¶ä¸æ­¢å±€é™äºæ•°æ®çš„å­˜å–ï¼Œå…¶ä¸­è¿˜æœ‰å¾ˆå¤šè®¤è¯æˆæƒæ ¡éªŒç›¸å…³çš„ä»£ç æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªMyRealmï¼Œç”¨äºæˆ‘ä»¬çš„é¡¹ç›®ä¹‹ä¸­ï¼Œä½†æ˜¯å‰ææ˜¯è¿™ä¸ªç±»å¿…é¡»ç»§æ‰¿äºAuthorizingRealmçˆ¶ç±»ï¼Œç„¶åå®ç°ä¸¤ä¸ªæ–¹æ³•AuthorizationInfo doGetAuthorizationInfoä»¥åŠAuthenticationInfo doGetAuthenticationInfoAuthenticationInfoä»£è¡¨äº†ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯é›†åˆï¼ŒAuthorizationInfoä»£è¡¨äº†è§’è‰²çš„æƒé™ä¿¡æ¯é›†åˆã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå½“è®¾è®¡äººå‘˜å¯¹é¡¹ç›®ä¸­çš„æŸä¸€ä¸ªurlè·¯å¾„è®¾ç½®äº†åªå…è®¸æŸä¸ªè§’è‰²æˆ–å…·æœ‰æŸç§æƒé™æ‰å¯ä»¥è®¿é—®çš„æ§åˆ¶çº¦æŸçš„æ—¶å€™ï¼ŒShiroå°±å¯ä»¥é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªå¯¹è±¡æ¥åˆ¤æ–­ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•çœ‹ä½œï¼šdoGetAuthenticationInfo() æ–¹æ³•ï¼šç”¨æ¥éªŒè¯å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œè·å–è®¤è¯ä¿¡æ¯ã€‚doGetAuthorizationInfo() æ–¹æ³•ï¼šä¸ºå½“å‰ç™»å½•æˆåŠŸçš„ç”¨æˆ·æˆäºˆæƒé™å’Œåˆ†é…è§’è‰²ã€‚ ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ® åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢ç™»é™†äººä¿¡æ¯çš„æ—¶å€™ï¼Œä»…ä»…éœ€è¦æŸ¥è¯¢ç”¨æˆ·çš„idï¼Œè¿™æ—¶è¿˜æœªæ¶‰åŠåˆ°å¯†ç ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿ç”¨æˆ·è¾“å…¥çš„å¯†ç ä¸æ­£ç¡®ï¼Œç…§æ ·å¯ä»¥æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·ã€‚ç„¶åï¼Œå°†è¯¥ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯å°è£…åˆ°authcInfoä¸­å¹¶è¿”å›ç»™Shiroæ¥ä¸‹æ¥å°±è¯¥Shiroä¸Šåœºäº†ï¼Œå°†å°è£…çš„ç”¨æˆ·ä¿¡æ¯ä¸ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯ï¼ˆç”¨æˆ·åã€å¯†ç ï¼‰è¿›è¡Œå¯¹æ¯”ã€æ ¡éªŒï¼ˆæ³¨æ„ï¼Œè¿™é‡Œå¯¹å¯†ç ä¹Ÿè¦è¿›è¡Œæ ¡éªŒï¼‰ã€‚æ ¡éªŒé€šè¿‡åˆ™å…è®¸ç”¨æˆ·ç™»å½•ï¼Œå¦åˆ™è·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚ 4ã€Shiroé…ç½® åœ¨ShiroConfigä¸­é…ç½®Realm 1234@Bean(name=&quot;MyRealm&quot;) public MyRealm myRealm() &#123; return new MyRealm(); &#125; é…ç½®å®‰å…¨ç®¡ç†å™¨SecurityManager 1234567@Bean(name=&quot;securityManager&quot;) public DefaultWebSecurityManager getDefaultWebSecurityManager(@Qualifier(&quot;MyRealm&quot;) MyRealm myRealm) &#123; DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager(); //å…³è”Realm securityManager.setRealm(myRealm); return securityManager; &#125; å½“æˆ‘ä»¬é…ç½®å®‰å…¨ç®¡ç†å™¨çš„æ—¶å€™ï¼Œéœ€è¦å°†å‰é¢çš„Realmæ·»åŠ è¿›æ¥ï¼Œè¿™æ ·å­æ‰å¯ä»¥è®¿é—®åˆ°Realm é…ç½®Shiroè¿‡æ»¤å™¨ shiroä¸­è‡ªå¸¦å¥½äº†é…ç½®çš„è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å°†å…¶è¿›è¡Œå¯¼å…¥ 1234567891011121314151617181920ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();//è®¾ç½®å®‰å…¨ç®¡ç†å™¨shiroFilterFactoryBean.setSecurityManager(securityManager);//æ·»åŠ Shiroå†…ç½®è¿‡æ»¤å™¨/*Shiroå†…ç½®è¿‡æ»¤å™¨ï¼Œå¯ä»¥å®ç°æƒé™ç›¸å…³çš„æ‹¦æˆªå™¨å¸¸ç”¨çš„æœ‰ï¼šanonï¼šæ— éœ€è®¤è¯å°±èƒ½è®¿é—®authcï¼šå¿…é¡»è®¤è¯æ‰èƒ½è®¿é—®userï¼šå¿…é¡»æ‹¥æœ‰ â€œè®°ä½æˆ‘â€ åŠŸèƒ½æ‰èƒ½ä½¿ç”¨permsï¼šæ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®roleï¼š æ‹¥æœ‰å¯¹æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®*/LinkedHashMap&lt;String, String&gt; filterMap = new LinkedHashMap&lt;String,String&gt;();//è¿™é‡Œæˆ‘ä»¬è¦å°†ä¸è¿›è¡Œæ‹¦æˆªçš„æ”¾åœ¨å‰é¢filterMap.put(&quot;/login&quot;, &quot;anon&quot;);filterMap.put(&quot;/*&quot;, &quot;authc&quot;);//æœ€åè®¾ç½®éªŒè¯å¤±è´¥çš„æ—¶å€™æ‰€è·³è½¬çš„ç•Œé¢shiroFilterFactoryBean.setLoginUrl(&quot;/toLogin&quot;); æ­¤æ—¶å½“æˆ‘ä»¬æœªç™»é™†çš„æ—¶å€™ï¼Œç‚¹å‡»è¢«æ‹¦æˆªçš„æ¨¡å—ï¼Œå°±ä¼šè·³åˆ°æˆ‘ä»¬æ‰€æŒ‡å®šçš„ç½‘é¡µï¼Œè€Œæ²¡æœ‰æ‹¦æˆªçš„ç½‘é¡µåˆ™å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚","categories":[{"name":"shiro","slug":"shiro","permalink":"http://cyc0819.top/categories/shiro/"}],"tags":[{"name":"shiro","slug":"shiro","permalink":"http://cyc0819.top/tags/shiro/"}]},{"title":"springboot+mybatisæ•´åˆæ”¯ä»˜å®æ”¯ä»˜","slug":"2021-07-22-springboot+mybatisæ•´åˆæ”¯ä»˜å®æ”¯ä»˜","date":"2021-07-22T04:13:22.000Z","updated":"2021-12-08T09:27:41.547Z","comments":false,"path":"2021/07/22/2021-07-22-springboot+mybatisæ•´åˆæ”¯ä»˜å®æ”¯ä»˜/","link":"","permalink":"http://cyc0819.top/2021/07/22/2021-07-22-springboot+mybatis%E6%95%B4%E5%90%88%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/","excerpt":"","text":"springboot+mybatisæ•´åˆæ”¯ä»˜å®æ”¯ä»˜å‡†å¤‡æ”¯ä»˜å®æ²™ç®±ç¯å¢ƒ éœ€è¦ä¸‰ä¸ªç½‘ç«™æ¥å‡†å¤‡æ”¯ä»˜å®çš„æ²™ç®±ç¯å¢ƒï¼š æ”¯ä»˜å®å¼€æ”¾å¹³å° å¼€æ”¾å¹³å°-æ²™ç®±ç¯å¢ƒ miniUç ”å‘å·¥ä½œå®¤ å…·ä½“é…ç½®è¿‡ç¨‹ç™¾åº¦å³å¯beanç±»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485package cn.edu.guet.bean;/** * @author George * @project DormitorySystem * @package cn.edu.guet.bean * @date 2021/7/22 11:35 * @since 1.0 */public class AlipayBean &#123; /** * å•†æˆ·è®¢å•å·ï¼Œå¿…å¡« * */ private String out_trade_no; /** * è®¢å•åç§°ï¼Œå¿…å¡« */ private String subject; /** * ä»˜æ¬¾é‡‘é¢ï¼Œå¿…å¡« * æ ¹æ®æ”¯ä»˜å®æ¥å£åè®®ï¼Œå¿…é¡»ä½¿ç”¨ä¸‹åˆ’çº¿ */ private String total_amount; /** * å•†å“æè¿°ï¼Œå¯ç©º */ private String body; /** * è¶…æ—¶æ—¶é—´å‚æ•° */ private String timeout_express= &quot;10m&quot;; /** * äº§å“ç¼–å· */ private String product_code= &quot;FAST_INSTANT_TRADE_PAY&quot;; public String getOut_trade_no() &#123; return out_trade_no; &#125; public void setOut_trade_no(String out_trade_no) &#123; this.out_trade_no = out_trade_no; &#125; public String getSubject() &#123; return subject; &#125; public void setSubject(String subject) &#123; this.subject = subject; &#125; public String getTotal_amount() &#123; return total_amount; &#125; public void setTotal_amount(String total_amount) &#123; this.total_amount = total_amount; &#125; public String getBody() &#123; return body; &#125; public void setBody(String body) &#123; this.body = body; &#125; public String getTimeout_express() &#123; return timeout_express; &#125; public void setTimeout_express(String timeout_express) &#123; this.timeout_express = timeout_express; &#125; public String getProduct_code() &#123; return product_code; &#125; public void setProduct_code(String product_code) &#123; this.product_code = product_code; &#125;&#125; alipayConfigç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package cn.edu.guet.config;import java.io.FileWriter;import java.io.IOException;/** * @author George * @project DormitorySystem * @package cn.edu.guet.config * @date 2021/7/22 13:16 * @since 1.0 */public class AlipayConfig &#123;//â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“è¯·åœ¨è¿™é‡Œé…ç½®æ‚¨çš„åŸºæœ¬ä¿¡æ¯â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“ // åº”ç”¨ID,æ‚¨çš„APPIDï¼Œæ”¶æ¬¾è´¦å·æ—¢æ˜¯æ‚¨çš„APPIDå¯¹åº”æ”¯ä»˜å®è´¦å· public static String app_id = &quot;2021000117643373&quot;; // å•†æˆ·ç§é’¥ï¼Œæ‚¨çš„PKCS8æ ¼å¼RSA2ç§é’¥ public static String merchant_private_key = &quot;&quot;; // æ”¯ä»˜å®å…¬é’¥,æŸ¥çœ‹åœ°å€ï¼šhttps://openhome.alipay.com/platform/keyManage.htm å¯¹åº”APPIDä¸‹çš„æ”¯ä»˜å®å…¬é’¥ã€‚ public static String alipay_public_key = &quot;&quot;; // æœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥é¡µé¢è·¯å¾„ éœ€http://æ ¼å¼çš„å®Œæ•´è·¯å¾„ï¼Œä¸èƒ½åŠ ?id=123è¿™ç±»è‡ªå®šä¹‰å‚æ•°ï¼Œå¿…é¡»å¤–ç½‘å¯ä»¥æ­£å¸¸è®¿é—® public static String notify_url = &quot;http://localhost:8082&quot;; // é¡µé¢è·³è½¬åŒæ­¥é€šçŸ¥é¡µé¢è·¯å¾„ éœ€http://æ ¼å¼çš„å®Œæ•´è·¯å¾„ï¼Œä¸èƒ½åŠ ?id=123è¿™ç±»è‡ªå®šä¹‰å‚æ•°ï¼Œå¿…é¡»å¤–ç½‘å¯ä»¥æ­£å¸¸è®¿é—® public static String return_url = &quot;http://localhost:8082&quot;; // ç­¾åæ–¹å¼ public static String sign_type = &quot;RSA2&quot;; // å­—ç¬¦ç¼–ç æ ¼å¼ public static String charset = &quot;utf-8&quot;; // æ”¯ä»˜å®ç½‘å…³ public static String gatewayUrl = &quot;https://openapi.alipaydev.com/gateway.do&quot;; // æ”¯ä»˜å®ç½‘å…³ public static String log_path = &quot;C:\\\\&quot;;//â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘è¯·åœ¨è¿™é‡Œé…ç½®æ‚¨çš„åŸºæœ¬ä¿¡æ¯â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘ /** * å†™æ—¥å¿—ï¼Œæ–¹ä¾¿æµ‹è¯•ï¼ˆçœ‹ç½‘ç«™éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥æ”¹æˆæŠŠè®°å½•å­˜å…¥æ•°æ®åº“ï¼‰ * @param sWord è¦å†™å…¥æ—¥å¿—é‡Œçš„æ–‡æœ¬å†…å®¹ */ public static void logResult(String sWord) &#123; FileWriter writer = null; try &#123; writer = new FileWriter(log_path + &quot;alipay_log_&quot; + System.currentTimeMillis()+&quot;.txt&quot;); writer.write(sWord); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; if (writer != null) &#123; try &#123; writer.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; controlleræ§åˆ¶å™¨æ”¯ä»˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051@Controllerpublic class AlipayController &#123; @RequestMapping(&quot;/pay&quot;) @ResponseBody public void payController(HttpServletRequest request, HttpServletResponse response) throws IOException, AlipayApiException &#123; // è·å–åˆå§‹åŒ–çš„AliPayClient AlipayClient alipayClient = new DefaultAlipayClient( AlipayConfig.gatewayUrl, AlipayConfig.app_id, AlipayConfig.merchant_private_key, &quot;json&quot;, AlipayConfig.charset, AlipayConfig.alipay_public_key, AlipayConfig.sign_type); // è®¾ç½®è¯·æ±‚å‚æ•° AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest(); alipayRequest.setReturnUrl(AlipayConfig.return_url); alipayRequest.setNotifyUrl(AlipayConfig.notify_url); //å•†æˆ·è®¢å•å·ï¼Œå•†æˆ·ç½‘ç«™è®¢å•ç³»ç»Ÿä¸­å”¯ä¸€è®¢å•å·ï¼Œå¿…å¡« String out_trade_no = new String(request.getParameter(&quot;WIDout_trade_no&quot;).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); //ä»˜æ¬¾é‡‘é¢ï¼Œå¿…å¡« String total_amount = new String(request.getParameter(&quot;WIDtotal_amount&quot;).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); //è®¢å•åç§°ï¼Œå¿…å¡« String subject = new String(request.getParameter(&quot;WIDsubject&quot;).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); //å•†å“æè¿°ï¼Œå¯ç©º String body = new String(request.getParameter(&quot;WIDbody&quot;).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); alipayRequest.setBizContent(&quot;&#123;\\&quot;out_trade_no\\&quot;:\\&quot;&quot;+ out_trade_no +&quot;\\&quot;,&quot; + &quot;\\&quot;total_amount\\&quot;:\\&quot;&quot;+ total_amount +&quot;\\&quot;,&quot; + &quot;\\&quot;subject\\&quot;:\\&quot;&quot;+ subject +&quot;\\&quot;,&quot; + &quot;\\&quot;body\\&quot;:\\&quot;&quot;+ body +&quot;\\&quot;,&quot; + &quot;\\&quot;product_code\\&quot;:\\&quot;FAST_INSTANT_TRADE_PAY\\&quot;&#125;&quot;); //è‹¥æƒ³ç»™BizContentå¢åŠ å…¶ä»–å¯é€‰è¯·æ±‚å‚æ•°ï¼Œä»¥å¢åŠ è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´å‚æ•°timeout_expressæ¥ä¸¾ä¾‹è¯´æ˜ //alipayRequest.setBizContent(&quot;&#123;\\&quot;out_trade_no\\&quot;:\\&quot;&quot;+ out_trade_no +&quot;\\&quot;,&quot; // + &quot;\\&quot;total_amount\\&quot;:\\&quot;&quot;+ total_amount +&quot;\\&quot;,&quot; // + &quot;\\&quot;subject\\&quot;:\\&quot;&quot;+ subject +&quot;\\&quot;,&quot; // + &quot;\\&quot;body\\&quot;:\\&quot;&quot;+ body +&quot;\\&quot;,&quot; // + &quot;\\&quot;timeout_express\\&quot;:\\&quot;10m\\&quot;,&quot; // + &quot;\\&quot;product_code\\&quot;:\\&quot;FAST_INSTANT_TRADE_PAY\\&quot;&#125;&quot;); //è¯·æ±‚å‚æ•°å¯æŸ¥é˜…ã€ç”µè„‘ç½‘ç«™æ”¯ä»˜çš„APIæ–‡æ¡£-alipay.trade.page.pay-è¯·æ±‚å‚æ•°ã€‘ç« èŠ‚ //è¯·æ±‚ String result = alipayClient.pageExecute(alipayRequest).getBody(); //è¾“å‡º response.setContentType(&quot;text/html;charset=&quot;+AlipayConfig.charset); response.getWriter().write(result); response.getWriter().flush(); response.getWriter().close(); &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"},{"name":"MyBatis","slug":"java/SpringBoot/MyBatis","permalink":"http://cyc0819.top/categories/java/SpringBoot/MyBatis/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://cyc0819.top/tags/SpringBoot/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://cyc0819.top/tags/MyBatis/"}]},{"title":"SpringBootå°†å›¾ç‰‡å­˜å‚¨åˆ°æ•°æ®åº“","slug":"2021-07-21-Springbootå­˜å‚¨å›¾ç‰‡åˆ°æ•°æ®åº“","date":"2021-07-21T12:19:41.000Z","updated":"2021-12-08T09:27:29.556Z","comments":false,"path":"2021/07/21/2021-07-21-Springbootå­˜å‚¨å›¾ç‰‡åˆ°æ•°æ®åº“/","link":"","permalink":"http://cyc0819.top/2021/07/21/2021-07-21-Springboot%E5%AD%98%E5%82%A8%E5%9B%BE%E7%89%87%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"SpringBootå°†å›¾ç‰‡å­˜å‚¨åˆ°æ•°æ®åº“å­˜å‚¨æ–¹å¼å°†å›¾ç‰‡è½¬åŒ–ä¸ºblobçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œç„¶åå­˜å‚¨åˆ°æ•°æ®åº“å³å¯ï¼Œä»æ•°æ®ä¸­å–å‡ºæ—¶ï¼Œå°†blobæ ¼å¼çš„äºŒè¿›åˆ¶æ–‡å­—ä»æ•°æ®åº“ä¸­å–å‡ºï¼Œç”¨Objectçš„æ–¹å¼æ¥è·å–ï¼Œç„¶åè½¬åŒ–ä¸ºå›¾ç‰‡çš„æ ¼å¼ï¼Œå³å¯åœ¨å±å¹•ä¸Šæ˜¾ç¤º ä¸Šä¼ å›¾ç‰‡Controllerå±‚ 12345678910111213@PostMapping(&quot;/add/image&quot;)@ResponseBodypublic String addImage(@RequestParam(&quot;file&quot;) MultipartFile file,@RequestParam(&quot;id&quot;) Integer id) throws Exception&#123; if(!file.isEmpty())&#123; BASE64Encoder encoder = new BASE64Encoder(); String image = encoder.encode(file.getBytes()); TestPo testPo = new TestPo(); testPo.setId(id); testPo.setImage(image); testService.addImage(testPo); &#125; return &quot;ok&quot;;&#125; Controolerå±‚ä¸»è¦å¯¹ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œå½“ä¸Šä¼ çš„å›¾ç‰‡ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œå®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²åŠ å¯†ç®—æ³•ï¼Œç„¶åå°†æ–‡ä»¶çš„å­—èŠ‚ç¼–ç è¿›è¡ŒåŠ å¯†ï¼Œå†å®šä¹‰ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡ï¼Œå°†idä»¥åŠåŠ å¯†ä¹‹åçš„æ–‡ä»¶å‘é€ç»™ä¸šåŠ¡å±‚ã€‚ Serviceå±‚ 1234public String addImage(TestPo testPo)&#123; testMapper.insertImage(testPo); return &quot;ok&quot;;&#125; æ¥å—Controllerçš„è¯·æ±‚å¹¶è¿”å›å¯¹åº”çš„ç±»å‹ Mapperæ¥å£ 1234@Mapperpublic interface TestMapper &#123; void insertImage(TestPo testPo);&#125; Mapper.xml 123&lt;insert id = &quot;insertImage&quot; parameterType=&quot;cn.edu.guet.bean.TestPo&quot;&gt; insert into image(id,image) values(#&#123;id&#125;,#&#123;image&#125;)&lt;/insert&gt; æ‰§è¡Œsqlè¯­å¥ï¼Œè¿›è¡Œæ–‡ä»¶çš„å­˜å‚¨ï¼Œå­˜å‚¨ä¸ºBLOBæ ¼å¼ã€‚ htmlé¡µé¢ 1234567891011121314&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;http://localhost:8081/add/image&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;id&quot; /&gt;&lt;br/&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;&lt;br/&gt; &lt;input type=&quot;submit&quot; name=&quot;&quot; id=&quot;&quot; value=&quot;æäº¤&quot; /&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; è¯»å–å›¾ç‰‡Controllerå±‚ 12345@GetMapping(&quot;/get/image&quot;)@ResponseBodypublic void getImage(@RequestParam(&quot;id&quot;) Integer id, HttpServletResponse response) throws Exception&#123; testService.getImage(id,response);&#125; ä¸»è¦æ˜¯æ¥æ”¶urlè¯·æ±‚ï¼Œæ ¹æ®idç»™servceå±‚å‘é€è¯·æ±‚ Serviceå±‚ 1234567891011121314151617181920212223public String getImage(Integer id, HttpServletResponse response)&#123; try &#123; TestPo testPo = testMapper.selectImageById(id); byte[] image = (byte[])testPo.getImage(); String value = new String(image,&quot;UTF-8&quot;); BASE64Decoder decoder = new BASE64Decoder(); byte[] bytes = decoder.decodeBuffer(value); for(int i=0;i&lt;bytes.length;i++)&#123; if(bytes[i]&lt;0)&#123; bytes[i]+=256; &#125; &#125; response.setContentType(&quot;image/jpeg&quot;); ServletOutputStream out = response.getOutputStream(); out.write(bytes); out.flush(); out.close(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; return &quot;ok&quot;;&#125; serviceå±‚å¯¹è¯»å–å‡ºæ¥çš„äºŒè¿›åˆ¶è¿›è¡Œå¤„ç†ï¼Œç”¨byte[]æ•°æ®ç±»å‹å­˜å‚¨ï¼Œç„¶åå°†å…¶è½¬ç æˆUTF-8çš„æ ¼å¼ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å¾—åˆ°æƒ³è¦çš„BASe64å­—èŠ‚ç ï¼Œæ¥ç€å°†å…¶è§£ç æˆä¸ºbyte[]æ ¼å¼ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½ç”Ÿæˆå›¾ç‰‡ï¼ŒsetContentTypeç”¨äºè®¾ç½®ç”Ÿæˆçš„å›¾ç‰‡çš„æ ¼å¼ï¼Œç„¶åé€šè¿‡æµæ“ä½œï¼Œå°†å›¾ç‰‡å‘é€åˆ°Controllerå±‚ï¼Œæœ€ååœ¨å‰ç«¯æ˜¾ç¤ºå‡ºæ¥ Maoopperæ¥å£ 1234@Mapperpublic interface TestMapper &#123; TestPo selectImageById(Integer id);&#125; Mapper.xml 123&lt;select id=&quot;selectImageById&quot; parameterType=&quot;Integer&quot; resultType=&quot;cn.edu.guet.bean.TestPo&quot;&gt; select * from image where id = #&#123;id&#125;&lt;/select&gt; htmlç•Œé¢ 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&quot;http://localhost:8081/get/image?id=2&quot; alt=&quot;Responsive image&quot;&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://cyc0819.top/tags/SpringBoot/"}]},{"title":"è¿‡æ»¤å™¨(Filter)åœ¨Webä¸­çš„åº”ç”¨","slug":"2021-07-01-è¿‡æ»¤å™¨(Filter)åœ¨Webä¸­çš„åº”ç”¨","date":"2021-07-01T13:17:51.000Z","updated":"2021-12-08T09:27:20.943Z","comments":false,"path":"2021/07/01/2021-07-01-è¿‡æ»¤å™¨(Filter)åœ¨Webä¸­çš„åº”ç”¨/","link":"","permalink":"http://cyc0819.top/2021/07/01/2021-07-01-%E8%BF%87%E6%BB%A4%E5%99%A8(Filter)%E5%9C%A8Web%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/","excerpt":"","text":"Java Webä¹‹è¿‡æ»¤å™¨(Filter)è¿‡æ»¤å™¨(Filter)è¿‡æ»¤å™¨ï¼Œä»å­—é¢æ„æ€ä¸Šç†è§£ï¼Œå°±æ˜¯ç”¨äºè¿‡æ»¤ä½œç”¨çš„å·¥å…·ã€‚åœ¨Java webä¸­ï¼Œè¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯å¯¹Webèµ„æºè¿›è¡Œæ‹¦æˆªï¼Œç»è¿‡å¤„ç†ä¹‹åï¼Œå†äº¤ç»™ä¸‹ä¸€æ­¥è¿›è¡Œå¤„ç†ï¼›è€Œä¸‹ä¸€æ­¥å¯ä»¥æ˜¯ä¸€ä¸ªæ–°çš„è¿‡æ»¤å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªservice","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"}]},{"title":"ç®—æ³•å­¦ä¹ _ç½—é©¬æ•°å­—è½¬æ•´æ•°","slug":"2021-06-28-ç®—æ³•å­¦ä¹ _ç½—é©¬æ•°å­—è½¬æ•´æ•°","date":"2021-06-28T06:08:30.000Z","updated":"2021-12-08T09:27:05.747Z","comments":false,"path":"2021/06/28/2021-06-28-ç®—æ³•å­¦ä¹ _ç½—é©¬æ•°å­—è½¬æ•´æ•°/","link":"","permalink":"http://cyc0819.top/2021/06/28/2021-06-28-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0_%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97%E8%BD%AC%E6%95%B4%E6%95%B0/","excerpt":"","text":"ç½—é©¬æ•°å­—è½¬æ•´æ•°é¢˜ç›®lettcode-13é¢˜éš¾åº¦ï¼šç®€å• è§£é¢˜æ€è·¯å¯¹äºæ¯ä¸ªç½—é©¬ç¬¦å·æ‰€å¯¹åº”çš„æ•°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨ä¸€ä¸ªHashMapå­˜èµ·æ¥ï¼Œå°†å…¶å­—ç¬¦ä½œä¸ºkeyï¼Œä»¥åŠæ•°å€¼ä¸ºç›¸åº”çš„value åœ¨æ–¹æ³•ä¸­å¯¹è¾“å…¥çš„å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦è¿›è¡Œéå†ï¼Œgetåˆ°æ‰€å¯¹åº”çš„å€¼ï¼Œå¹¶æ‹¿åˆ°å®ƒçš„åä¸€ä½æ•°çš„å€¼ï¼Œå¦‚æœå½“å‰ç¬¦å·çš„å€¼å¤§äºåä¸€ä½ç¬¦å·çš„å€¼ï¼Œåˆ™è¿›è¡Œï¼‹è¿ç®—ï¼Œå¦åˆ™-è¿ç®—ã€‚ å…·ä½“ä»£ç 123456789101112131415161718192021222324//leetcodeé¡¹ç›®class Solution &#123; Map&lt;Character,Integer&gt; map=new HashMap&lt;Character,Integer&gt;(); public int romanToInt(String s) &#123; map.put(&#x27;I&#x27;,1); map.put(&#x27;V&#x27;,5); map.put(&#x27;X&#x27;,10); map.put(&#x27;L&#x27;,50); map.put(&#x27;C&#x27;,100); map.put(&#x27;D&#x27;,500); map.put(&#x27;M&#x27;,1000); int ans = 0; int n = s.length(); for (int i = 0; i &lt; n; ++i) &#123; int value = map.get(s.charAt(i)); if (i &lt; n - 1 &amp;&amp; value &lt; map.get(s.charAt(i + 1))) &#123; ans -= value; &#125; else &#123; ans += value; &#125; &#125; return ans; &#125;&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"},{"name":"HashMap","slug":"ç®—æ³•/HashMap","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/HashMap/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"},{"name":"HashMap","slug":"HashMap","permalink":"http://cyc0819.top/tags/HashMap/"}]},{"title":"è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(äºŒ)","slug":"2021-06-24-è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(äºŒ)","date":"2021-06-24T02:02:55.000Z","updated":"2021-12-08T10:26:14.634Z","comments":false,"path":"2021/06/24/2021-06-24-è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(äºŒ)/","link":"","permalink":"http://cyc0819.top/2021/06/24/2021-06-24-%E8%AE%B0%E5%BD%95%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A1%B5%E7%9A%84%E6%90%AD%E5%BB%BA(%E4%BA%8C)/","excerpt":"","text":"è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(äºŒ)å®Œæˆä¸Šç¯‡æ–‡ç« çš„æ‰€æœ‰æ­¥éª¤ä¸»é¢˜æ˜¯ä¸ªæ€§åŒ–ä¸ªäººåšå®¢çš„å¾ˆé‡è¦çš„ä¸€ä¸ªæ¨¡å—ï¼Œå½“ç„¶hexoé»˜è®¤ä¹Ÿæœ‰ä¸€ä¸ªä¸»é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ°hexoçš„ä¸»é¢˜å•†åŸä¸­ä¸‹è½½æ›´å¤šæˆ‘ä»¬å–œæ¬¢çš„ä¸»é¢˜ã€‚ é€‰æ‹©æƒ³è¦çš„ä¸»é¢˜ç‚¹å‡»å¤§å›¾å¯ä»¥è¿›è¡Œé¢„è§ˆï¼Œç‚¹å‡»åç§°å°±å¯ä»¥è¿›å…¥ä¸»é¢˜çš„GitHubä»“åº“ï¼Œå°±å¯ä»¥è¿›è¡Œcloneäº† ç„¶ååœ¨æœ¬åœ°cloneä¸»é¢˜çš„ä»“åº“ï¼Œæ”¾åˆ°hexoç›®å½•çš„themesæ–‡ä»¶å¤¹ä¸­ï¼Œå†å»ä¿®æ”¹_config.ymlæ–‡ä»¶ï¼Œå°±å¯ä»¥åº”ç”¨è¿™ä¸ªä¸»é¢˜äº† å°†themeåé¢çš„åç§°æ”¹ä¸ºåˆšæ‰cloneçš„æ–‡ä»¶å¤¹åç§°ï¼Œå°±å¯ä»¥åº”ç”¨ä¸»é¢˜äº† 1234# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: hexo-theme-aircloud åˆ›å»ºæ ‡ç­¾ä»¥åŠå­˜æ¡£é»˜è®¤çš„ä¸»é¢˜æ˜¯ä¸å¸¦æœ‰æ ‡ç­¾å’Œä»‹ç»çš„ï¼Œè¿™æ—¶å€™éœ€è¦åœ¨åšå®¢æ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹å»ºç«‹tagsæ–‡ä»¶å¤¹å’Œaboutæ–‡ä»¶å¤¹ã€‚ æ³¨ï¼šå»ºè®®ä¸è¦ç›´æ¥æ–°å»ºæ–‡ä»¶ï¼Œè€Œæ˜¯é‡‡ç”¨ hexo çš„ hexo new page tags å’Œ hexo new page about çš„æ–¹å¼æ–°å»ºæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥è¢« hexo ç´¢å¼•åˆ°ã€‚ åˆ›å»ºå¥½ä¹‹ååœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„index.mdä¸­åˆ†åˆ«è¾“å…¥ä»¥ä¸‹å†…å®¹ 1234---layout: &quot;tags&quot;title: &quot;Tags&quot;--- 123456---layout: &quot;about&quot;title: &quot;About&quot;date: 2016-04-21 04:48:33comments: true--- å†æ¬¡æ‰“å¼€ä¸»é¡µå°±ä¼šçœ‹åˆ°ç”Ÿæˆäº†ä¸¤ä¸ªæ–°çš„åˆ—è¡¨ æ›´æ¢å¤´åƒä»¥åŠç½‘ç«™logoåœ¨åšå®¢æ ¹ç›®å½•çš„ source æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ img æ–‡ä»¶å¤¹*é‡‡ç”¨ hexo çš„ hexo new page img * ç„¶åå¹¶å°†å¤´åƒæ–‡ä»¶å‘½åä¸ºavatar.jpgï¼Œlogoæ–‡ä»¶å‘½åä¸ºfavicon.ico ç„¶åä¿®æ”¹_config.ymlæ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹å†…å®¹ 1sidebar-avatar: img/avatar.jpg å°±å¯ä»¥äº† ç½‘ç«™æ ‡é¢˜åœ¨ _config.yml æ–‡ä»¶ä¸­ï¼Œå¢åŠ ä»¥ä¸‹å†…å®¹ 1SEOTitle: George&#x27;blog å†’å·åé¢ä¿®æ”¹æˆä½ æƒ³è¦çš„åå­—å°±å¯ä»¥äº† ç­¾åæ¯”å¦‚æœ€é¡¶ç«¯çš„ç­¾åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥è‡ªå®šä¹‰ åªè¦åœ¨_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹å³å¯ 1subtitle: ä½ æƒ³è¦çš„ç­¾å æœç´¢åŠŸèƒ½æœç´¢åŠŸèƒ½åŒæ ·æ˜¯ä¸è‡ªå¸¦çš„ï¼Œæˆ‘ä»¬åœ¨å®‰è£…æœç´¢åŠŸèƒ½ä¹‹å‰ï¼Œé¦–å…ˆè¦å®‰è£…ä¸€ä¸ªæ’ä»¶åœ¨gitä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£… 1npm i hexo-generator-search --save ç„¶ååœ¨_config.ymlæ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹å³å¯ 123search: path: search.json field: post ç¤¾äº¤ç½‘ç»œåº•éƒ¨çš„ç¤¾äº¤ç½‘ç»œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œä½†æ˜¯åªèƒ½åœ¨å®˜æ–¹é™åˆ¶çš„èŒƒå›´å†…è¿›è¡Œä¿®æ”¹ç¼–è¾‘æ ¹ç›®å½•çš„ _config.yml æ–‡ä»¶ï¼Œå¢åŠ ï¼š 123456# SNS settings# ä¸€äº›ç¤¾äº¤å¹³å°åœ°å€ï¼Œæ”¯æŒä»¥ä¸‹å‡ ç§ï¼šweibo_username: 5676314204zhihu_username: swaggy-chengithub_username: chenyicai0819twitter_username: George chan è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç¤¾äº¤ç½‘ç»œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ èµèµåŠŸèƒ½æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨æˆ‘ä»¬çš„åšå®¢ä¸­æ·»åŠ ä¸€ä¸ªèµèµåŠŸèƒ½åªè¦åœ¨imgæ–‡ä»¶å¤¹ä¸­å¢åŠ æ”¶æ¬¾ç å›¾ç‰‡ï¼Œå¹¶å‘½åä¸ºdonate.jpgç„¶ååœ¨ _config.yml æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼Œå³å¯åœ¨åœ¨æ¯ç¯‡æ–‡ç« ä¸‹é¢å¢åŠ ä¸€ä¸ªèµèµåŠŸèƒ½ 123donate: img: img/donate.jpg content: æ„Ÿè°¢é¼“åŠ± ä¿®æ”¹ç”¨æˆ·ååªéœ€ä¿®æ”¹ _config.yml æ–‡ä»¶ï¼Œä¸­ä»¥ä¸‹å†…å®¹ï¼Œå³å¯ä¿®æ”¹ç”¨æˆ·å 1author: ä½ çš„ç”¨æˆ·å å®Œæˆä¸»é¢˜æ›´æ¢è‡³æ­¤ï¼ŒåŸºæœ¬çš„å†¤æ­»å°±å·²ç»è®¾ç½®å®Œæ¯•äº†ï¼ŒåŸºæœ¬ä¸Šåªè¦ä¿®æ”¹ _config.yml æ–‡ä»¶ï¼Œå°±å¯ä»¥æ§åˆ¶ç½‘ç«™ä¸­æ‰€æœ‰çš„å…ƒç´ äº†ï¼Œè€Œå®˜æ–¹çš„å¸®åŠ©æ–‡æ¡£ä¹Ÿå†™çš„å¾ˆæ¸…æ¥šå¦‚ä½•å¯¹å„ä¸ªæ¨¡å—è¿›è¡Œè®¾ç½® æˆ‘çš„è¿™ç¯‡æ–‡ç« åªæ˜¯é’ˆå¯¹æˆ‘çš„è®¾ç½®è¿›è¡Œäº†ä¸€ä¸ªè®°å½•ï¼Œæ‰€ä»¥éœ€è¦æ›´å¤šèµ„æ–™çš„å¯ä»¥å»å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£ï¼ŒåŸºæœ¬ä¸Šæ˜¯å†™çš„éå¸¸æ˜ç™½äº† éƒ¨ç½²åˆ°GitHubè·Ÿä¹‹å‰ä¸€æ ·ï¼Œå®Œæˆä¿®æ”¹ä¹‹åè¦éƒ¨ç½²åˆ°githubï¼Œåªéœ€è¦ä»¥ä¸‹å‡ è¡Œå‘½ä»¤ 123hexo clean //æ¸…é™¤ç¼“å­˜æ–‡ä»¶db.jsonå’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶publichexo g //ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶åˆ°é»˜è®¤è®¾ç½®çš„publicæ–‡ä»¶å¤¹hexo d //éƒ¨ç½²ç½‘ç«™åˆ°è®¾å®šçš„ä»“åº“ éƒ¨ç½²å®Œæˆä¹‹åç¨ç­‰ä¸€ä¼šï¼Œå°±å¯ä»¥çœ‹åˆ°ä¿®æ”¹ä¹‹åçš„å†…å®¹äº† ç›¸å…³é“¾æ¥å®˜æ–¹æ–‡æ¡£ ä¸»é¢˜å•†åŸ","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"Hexo","slug":"åšå®¢/Hexo","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://cyc0819.top/tags/Hexo/"},{"name":"è®°å½•","slug":"è®°å½•","permalink":"http://cyc0819.top/tags/%E8%AE%B0%E5%BD%95/"}]},{"title":"è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(ä¸€)","slug":"2021-06-24-è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(ä¸€)","date":"2021-06-23T17:01:05.000Z","updated":"2021-12-08T10:26:18.724Z","comments":false,"path":"2021/06/24/2021-06-24-è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(ä¸€)/","link":"","permalink":"http://cyc0819.top/2021/06/24/2021-06-24-%E8%AE%B0%E5%BD%95%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A1%B5%E7%9A%84%E6%90%AD%E5%BB%BA(%E4%B8%80)/","excerpt":"","text":"è®°å½•åšå®¢ä¸»é¡µçš„æ­å»º(ä¸€)1.å¿ƒè¡€æ¥æ½®æœ‰ä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™ï¼Œæ˜¯æˆ‘å¿ƒä¸­ä¸€ç›´å­˜åœ¨çš„ä¸€ä¸ªæƒ³æ³•ï¼Œå› æœ€è¿‘å­¦ä¸šå‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œç¢°å·§çœ‹åˆ°é˜¿é‡Œäº‘çš„åŸŸåé¦–å¹´ç‰¹æƒ åªè¦ä¸€å…ƒï¼Œå°±é¡ºä¾¿ä¹°äº†ä¸€ä¸ªåŸŸåï¼Œå‡†å¤‡ç€æ‰‹æ­å»ºä¸ªäººç½‘ç«™ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å¯¹åšå®¢ç½‘ç«™å‡ ä¹æ˜¯æ²¡æœ‰è¿‡äº†è§£ï¼Œæ‰€ä»¥åœ¨æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ä¹‹åï¼Œä»¥Hexo+Github Pageçš„æ–¹å¼è¿›è¡Œæˆ‘çš„ç½‘ç«™çš„æ­å»ºï¼Œä»¥ä¸‹å°±æ˜¯å…·ä½“çš„è¿‡ç¨‹ã€‚ 2.æ­å»ºè¿‡ç¨‹ç›¸å…³çš„æ­å»ºè¿‡ç¨‹ç½‘ä¸Šéšä¾¿ä¸€æ‰¾å°±æœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œåªæ˜¯å¯¹æˆ‘å»ºç«™çš„è¿‡ç¨‹è¿›è¡Œè®°å½•ï¼Œå…·æœ‰ä¸€å®šå‚è€ƒä»·å€¼ã€‚ 2.1 ä¸‹è½½node.jsä»¥åŠgitå¹¶å®‰è£…åœ¨ä½¿ç”¨Hexoæ¡†æ¶è¿›è¡Œæ­å»ºç½‘ç«™ä¹‹å‰ï¼Œé¦–å…ˆè¦ä¸‹è½½å®‰è£…node.jså’Œgitï¼Œä»¥ä¾¿äºå®‰è£…Hexoä»¥åŠä»£ç çš„ç®¡ç†ã€‚ å…·ä½“çš„å®‰è£…æ³¨æ„äº‹é¡¹ Node.js ç‰ˆæœ¬éœ€ä¸ä½äº 10.13ï¼Œå»ºè®®ä½¿ç”¨ Node.js 12.0 åŠä»¥ä¸Šç‰ˆæœ¬ ä½¿ç”¨ Node.js å®˜æ–¹å®‰è£…ç¨‹åºæ—¶ï¼Œè¯·ç¡®ä¿å‹¾é€‰ Add to PATH é€‰é¡¹ï¼ˆé»˜è®¤å·²å‹¾é€‰ï¼‰ å¯¹äºä¸­å›½å¤§é™†åœ°åŒºç”¨æˆ·ï¼Œå¯ä»¥å‰å¾€å®˜ç½‘æˆ–è€…æ·˜å®Git for Windowsé•œåƒä¸‹è½½ git å®‰è£…åŒ…ï¼ˆä»…é’ˆå¯¹Windowsï¼‰ å®‰è£…å®Œæ¯•ä»¥ä¸Šä¸¤ä¸ªè½¯ä»¶ä¹‹åå°±å¯ä»¥è¿›è¡ŒHexoçš„å®‰è£…äº†2.2 å®‰è£…Hexoåœ¨æƒ³è¦å®‰è£…Hexoçš„ä½ç½®å³é”®æ‰“å¼€Git Bash Hereé€šè¿‡å‘½ä»¤è¡Œæ¥è¿›è¡Œå®‰è£…ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤1npm install -g hexo-cli ç‚¹å‡»å›è½¦å³å¯è¿›è¡Œå®‰è£…ï¼Œç„¶åå®‰è£…å®Œæˆä¹‹åè¿›è¡Œä¸€ä¸‹åˆå§‹åŒ–12hexo initnpm install åˆ†åˆ«è¾“å…¥ä»¥ä¸Šä¸¤å¥å¹¶å›è½¦ï¼Œå°±ä¼šç”Ÿæˆåˆå§‹çš„èœå•ï¼Œå¤§æ¦‚çš„ç›®å½•æ˜¯è¿™æ ·å­çš„12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes ä¸‹é¢æ˜¯å„ä¸ªç›®å½•çš„å…·ä½“åŠŸèƒ½ï¼š config.ymlç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚åé¢å‘å¸ƒåˆ°githubä¸Šé¢æ—¶ï¼Œæœ‰ç”¨åˆ°è¿™ä¸ªæ–‡ä»¶ï¼›package.jsonåº”ç”¨ç¨‹åºçš„ä¿¡æ¯sourceæ˜¯ç½‘ç«™ä¸­ä¸€ä¸‹èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œåšå®¢å†…å®¹ä¹Ÿéƒ½æ”¾åœ¨è¿™é‡Œthemesç½‘ç«™ä¸»é¢˜çš„æ”¾ç½®çš„ä½ç½® å…¶ä»–æ›´å…·ä½“çš„ä»‹ç»å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ 2.3 é¢„è§ˆHexoåšå®¢æ­¤æ—¶å°±å¯ä»¥é¢„è§ˆè‡ªå·±æ­å»ºçš„åšå®¢äº†ï¼Œä½†æ˜¯æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯åˆå§‹çš„ï¼Œè¾“å…¥ä»¥ä¸‹çš„å‘½ä»¤å³å¯ 12npm install hexo-server --savehexo server ä»¥ä¸Šå‘½ä»¤åŒæ ·æ˜¯åœ¨Git Bash Hereä¸­è¾“å…¥ç„¶ååœ¨æµè§ˆå™¨ç½‘å€æ è¾“å…¥localhost:4000å¦‚æœä»¥ä¸Šé¡¹ç›®èƒ½å¯åŠ¨å°±è¯´æ˜æˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥å°†é¡¹ç›®æ­å»ºåˆ°GitHubä¸Šé¢ 2.4 å°†é¡¹ç›®éƒ¨ç½²åˆ°GitHub åœ¨GitHubä¸­æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œç„¶åå‘½åä¸ºç”¨æˆ·å.github.ioï¼Œåªæœ‰è¿™æ ·å­GitHubæ‰ä¼šå°†å…¶è®¾ç½®ä¸ºç”¨æˆ·çš„åšå®¢ å› ä¸ºæˆ‘å·²ç»æœ‰ä¸€ä¸ªåº“äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºé”™è¯¯ å°†æœ¬åœ°æ­å»ºå¥½çš„hexoå‘å¸ƒåˆ°githubä¸Š é¦–å…ˆè¾“å…¥ä»¥ä¸‹ä»£ç å®‰è£…ä¸€ä¸ªæ’ä»¶ 1npm install hexo-deployer-git --save ä¿®æ”¹ç½‘ç«™é…ç½®æ–‡ä»¶_config.yml,æ·»åŠ deployä¿¡æ¯ 1234deploy: type: git repo: git@github.com:ç”¨æˆ·å/ç”¨æˆ·å.github.io.git branch: master(ä¹Ÿå°±æ˜¯æƒ³è¦ä¸Šä¼ çš„åˆ†æ”¯) ç”ŸæˆSSH key åœ¨gitä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ 1ssh-keygen -t rsa -C &quot;your_email@example.com&quot; ç„¶åä¼šæç¤ºè¾“å…¥passphraseï¼ˆæœ¬æ­¥éª¤å¯ä»¥è·³è¿‡ï¼‰ï¼Œç›¸å½“äºè®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œä¹‹åè·Ÿgithubè¿›è¡Œæ“ä½œæ—¶éƒ½ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œé¿å…è¯¯æ“ä½œç„¶åå°†æ–°ç”Ÿæˆçš„keyæ·»åŠ åˆ°ssh-agentä¸­ 1ssh-add ~/.ssh/id_rsa å°±å¯ä»¥åœ¨ä¸Šé¢çš„è·¯å¾„ä¸‹æ‰¾åˆ°sshçš„æ–‡ä»¶äº† å°†sshæ·»åŠ åˆ°GitHubä¸­ æ‰“å¼€id_rsa.pubæ–‡ä»¶å°†ä¸€æ•´ä¸²å…¬é’¥æ‹·è´ä¸‹æ¥æ‰“å¼€GitHubçš„ä¸ªäººè®¾ç½®ç•Œé¢ï¼ŒæŒ‰ç…§ä»¥ä¸‹å›¾ç‰‡çš„æ­¥éª¤è¿›è¡Œæ·»åŠ ssh titleéšæ„ï¼Œkeyå¡«id_rsa.pubæ–‡ä»¶ä¸­å†…å®¹ï¼Œç„¶åä¿å­˜å³å¯ã€‚è‡³æ­¤ï¼Œå°±æˆåŠŸå°†sshæ·»åŠ åˆ°githubä¸­äº† æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ 1ssh -T git@github.com å¦‚æœå‡ºç°ä»¥ä¸‹æ–‡å­—å°±è¯´æ˜è¿æ¥æˆåŠŸäº† 1Hi wispyoureyes! You&#x27;ve successfully authenticated, but GitHub does not provide shell access. ä¸Šä¼ é™æ€æ–‡ä»¶ æˆåŠŸä¸GitHubå»ºç«‹è¿æ¥ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆé™æ€æ–‡ä»¶ä¸Šä¼ åˆ°githubä¸­äº† 123hexo clean //æ¸…é™¤ç¼“å­˜æ–‡ä»¶db.jsonå’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶publichexo g //ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶åˆ°é»˜è®¤è®¾ç½®çš„publicæ–‡ä»¶å¤¹hexo d //éƒ¨ç½²ç½‘ç«™åˆ°è®¾å®šçš„ä»“åº“ ç„¶åå†ç½‘å€æ è¾“å…¥GitHubä»“åº“çš„åç§°å°±å¯ä»¥è®¿é—®äº† 3.ç»‘å®šåŸŸå é¦–å…ˆåˆ°é˜¿é‡Œäº‘æˆ–è€…å…¶ä»–çš„äº‘æœåŠ¡å•†è´­ä¹°ä¸€ä¸ªåŸŸå ç„¶åè¿›è¡ŒåŸŸåè§£æ ç™»é™†é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œé€‰æ‹©åŸŸåé€‰é¡¹ï¼Œæ·»åŠ ä¸¤æ¡CNAMEè§£æ ç„¶ååœ¨GitHubçš„ä»“åº“è®¾ç½®ä¸­ï¼Œä¸‹æ»‘æ‰¾åˆ°Github Pages ï¼Œç‚¹å‡»è¿›å»ï¼Œåœ¨Custom domainé‡Œå¡«å…¥ä½ çš„åŸŸåï¼Œç„¶åç‚¹å‡»Saveï¼Œç¨ç­‰ä¸€ä¼šå°±å¥½äº†ã€‚ ç„¶åå°±å¯ä»¥é€šè¿‡ä½ çš„åŸŸåæ¥è¿›å…¥åšå®¢äº† å…³äºå¤‡æ¡ˆï¼Œå¦‚æœè¦éƒ¨ç½²åˆ°å›½å†…çš„æœåŠ¡å™¨ä¸Šé¢éœ€è¦è¿›è¡Œå¤‡æ¡ˆï¼Œä»å“ªé‡Œä¹°çš„åŸŸåå°±ä»å“ªé‡Œå¤‡æ¡ˆGitHubå±äºå›½å¤–çš„æœåŠ¡å™¨ï¼Œæ˜¯ä¸ç”¨è¿›è¡Œå¤‡æ¡ˆçš„ 4.ç›¸å…³é“¾æ¥ç”Ÿæˆssh Hexoå®˜æ–¹æ–‡æ¡£ é˜¿é‡Œäº‘ æ·˜å®git for windows é•œåƒ æ·˜å®node.jsé•œåƒ","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"Hexo","slug":"åšå®¢/Hexo","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://cyc0819.top/tags/Hexo/"},{"name":"è®°å½•","slug":"è®°å½•","permalink":"http://cyc0819.top/tags/%E8%AE%B0%E5%BD%95/"}]},{"title":"åŸºäºSwingçš„ç®€æ˜“ç‚¹é¤ç³»ç»Ÿ","slug":"2021-06-21-åŸºäºSwingçš„ç®€æ˜“ç‚¹é¤ç³»ç»Ÿ","date":"2021-06-21T08:58:12.000Z","updated":"2021-12-08T09:35:19.433Z","comments":false,"path":"2021/06/21/2021-06-21-åŸºäºSwingçš„ç®€æ˜“ç‚¹é¤ç³»ç»Ÿ/","link":"","permalink":"http://cyc0819.top/2021/06/21/2021-06-21-%E5%9F%BA%E4%BA%8ESwing%E7%9A%84%E7%AE%80%E6%98%93%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"åŸºäºSwingçš„å»ºè®®ç‚¹é¤ç³»ç»Ÿ1. åº”ç”¨æŠ€æœ¯1Swingã€JDBCã€Oracleæ•°æ®åº“ã€JavaåŸºç¡€ 2.é¡¹ç›®åŠŸèƒ½12å·¥ä½œäººå‘˜ï¼šèœå“çš„å¢åˆ æ”¹æŸ¥ã€å·¥ä½œäººå‘˜ç‚¹é¤ã€ä¸ºé¡¾å®¢è¿›è¡Œæ’å·å«å·ã€åˆ©æ¶¦æŸ¥è¯¢ã€ç»“è´¦ã€‚é¡¾å®¢ï¼šé¡¾å®¢ç‚¹é¤ã€æŸ¥çœ‹ç§¯åˆ†ã€æŸ¥çœ‹èœå•ã€è‡ªåŠ©ç»“è´¦ã€‚ 3.é¡¹ç›®å†ç¨‹3.1 é¡¹ç›®å‡†å¤‡æ€»æ‰€å‘¨çŸ¥ï¼ŒSwingå¯¹äºJavaæ¥è¯´å·²ç»æ˜¯ä¸€ä¸ªä¸å†ä½¿ç”¨çš„æŠ€æœ¯äº†ï¼Œç›¸å¯¹äºå¾®è½¯çš„C#è¯­è¨€ï¼ŒJavaçš„ä¼˜åŠ¿æ›´åœ¨äºWebç«¯çš„åº”ç”¨ï¼Œä½†æ˜¯åº”æ•™å­¦çš„è¦æ±‚ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç»ƒä¹ JDBCä»¥åŠPL/SQLçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†SwingæŠ€æœ¯é…åˆæ•°æ®åº“ä½¿ç”¨ï¼Œåˆ¶ä½œäº†ä¸€ä¸ªç®€æ˜“çš„ç‚¹é¤ç³»ç»Ÿï¼Œæ—¨åœ¨ç†Ÿæ‚‰ä¸€ä¸ªé¡¹ç›®çš„åˆ¶ä½œæµç¨‹ï¼Œä»é¡¹ç›®éœ€æ±‚åˆ†æåˆ°é¡¹ç›®å¼€å‘åˆ°æœ€åçš„ç»´æŠ¤å‘å¸ƒï¼Œæˆ‘ä½œä¸ºå°ç»„é•¿ï¼Œå¸¦é¢†äº†å›¢é˜Ÿä¸€å…±7ä½é˜Ÿå‘˜åœ¨è€å¸ˆçš„æŒ‡å¯¼ä¹‹ä¸‹ï¼Œå®Œæˆäº†é¡¹ç›®çš„å¼€å‘ã€‚ 3.2 é¡¹ç›®å¼€å‘èƒŒæ™¯æ®äº†è§£ï¼Œå­¦æ ¡å‘¨å›´éƒ¨åˆ†é¤é¦†ä»å¤„äºäººå·¥ç‚¹é¤ã€æ‰‹å·¥è®°è´¦çš„é˜¶æ®µï¼Œè¿™æ ·å­ä¸ä»…å®¹æ˜“åœ¨ç‚¹é¤æ—¶å‡ºç°é”™è®°è¯¯è®°çš„æƒ…å†µï¼Œåœ¨æœ€åè®°å½•æ—¶å¤§é‡çš„æ•°æ®ä¹Ÿä¼šååˆ†ç¹çï¼Œè®¡ç®—æœºè½¯ä»¶ç»Ÿä¸€çš„å¤„ç†æ–¹å¼å¯ä»¥å°†ä»¥ä¸Šçš„è¿‡ç¨‹å…¨éƒ½è‡ªåŠ¨åŒ–ä¸€ç«™å¼åœ°å®Œæˆï¼Œå¤§å¤§æé«˜äº†æ•ˆç‡ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿè¿˜å¤§å¤§å‡å°‘äº†æˆæœ¬ã€‚å‘å±•ç‚¹é¤ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§å¿…ç„¶è¶‹åŠ¿ï¼Œå¯ä»¥è¯´ç‚¹é¤ç³»ç»Ÿçš„å‡ºç°ï¼Œåªæ˜¯ç”¨ç°åœ¨è¾ƒä¸ºæˆç†Ÿçš„è®¡ç®—æœºæŠ€æœ¯å»æ”¹é€ ä¼ ç»Ÿè¡Œä¸šçš„ä¸€ä¸ªå°å°ä¾‹å­ã€‚è¿™æ ·çš„ç³»ç»Ÿï¼Œå°†ä¼šä¸æ–­åœ°å‡ºç°ï¼Œè€Œä¸”ä¼šæœ‰åŠ›åœ°æ¨åŠ¨ä¼ ç»Ÿè¡Œä¸šçš„ä¸æ–­å‘å±•ã€‚ 3.3 é¡¹ç›®å¼€å‘åœ¨å¼€å§‹é¡¹ç›®çš„å¼€å‘ä¹‹åï¼Œç”±äºé˜Ÿå‘˜åŸºç¡€çš„å‚å·®ä¸é½ï¼Œæ‰€ä»¥åœ¨ä»»åŠ¡åˆ†é…æ—¶å¯¹é˜Ÿå‘˜çš„èƒ½åŠ›åˆ†é…äº†ä¸åŒçš„ä»»åŠ¡ï¼Œå¹¶é’ˆå¯¹é˜Ÿå‘˜èƒ½åŠ›è¿›è¡Œäº†ä¸åŒçŸ¥è¯†ç‚¹çš„é’ˆå¯¹ï¼Œç”±äºæ˜¯é¦–æ¬¡è¿›è¡Œå›¢é˜Ÿé¡¹ç›®å¼€å‘ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°GitHubè¿›è¡Œåä½œå¼€å‘ï¼Œæ‰€ä»¥åœ¨æœ€åæ•´åˆä»£ç æ—¶ï¼Œç¢°åˆ°äº†è¾ƒå¤§çš„é—®é¢˜ï¼Œjdkç‰ˆæœ¬ä¸ç»Ÿä¸€ï¼Œä»£ç ä¸èƒ½å…¼å®¹ç­‰ç­‰é—®é¢˜ï¼Œæœ€åæ•´åˆçš„ä»£ç ä¹Ÿè¿˜æœ‰ç€å¤§é‡çš„å†—ä½™ï¼Œå¼€å‘è¿‡ç¨‹æ€»ä½“æ¥è¯´æ¯”è¾ƒé¡ºåˆ©ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¾ˆå¤§çš„æ”¹è¿›ï¼Œåœ¨å¼€å‘å‰è¿›è¡Œæ•°æ®åº“è®¾è®¡æ—¶ï¼Œè™½ç„¶è¯´æ²¡æœ‰å¤ªå¤šçš„è¡¨ï¼Œä½†æ˜¯å¯¹äºé¡¹ç›®å°ç™½çš„æˆ‘ä»¬è¿˜æ˜¯èŠ±è´¹äº†ä¸€ç‚¹æ—¶é—´ã€‚ 3.4 é¡¹ç›®æºç 1https://github.com/chenyicai0819/2020_java_study/tree/main/OrderSystemToSix","categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"Swing","slug":"java/Swing","permalink":"http://cyc0819.top/categories/java/Swing/"}],"tags":[{"name":"Swing","slug":"Swing","permalink":"http://cyc0819.top/tags/Swing/"}]},{"title":"æˆ‘çš„ç¬¬ä¸€æ¡åšå®¢","slug":"2021-06-21-æˆ‘çš„ç¬¬ä¸€æ¡åšå®¢","date":"2021-06-21T00:09:22.000Z","updated":"2021-12-08T09:26:29.215Z","comments":false,"path":"2021/06/21/2021-06-21-æˆ‘çš„ç¬¬ä¸€æ¡åšå®¢/","link":"","permalink":"http://cyc0819.top/2021/06/21/2021-06-21-%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9D%A1%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¡åšå®¢1.åˆæ¬¡æ¥è§¦ ä»Šå¤©æ˜¯2021å¹´6æœˆ21æ—¥ã€‚æˆ‘æ­å»ºäº†æˆ‘çš„ç¬¬ä¸€ä¸ªä¸ªäººåšå®¢ç½‘ç«™ï¼Œå¹¶å‘å¸ƒäº†æˆ‘çš„ç¬¬ä¸€æ¡ä¸ªäººåšå®¢ï¼Œä»Šåæˆ‘ä¼šåœ¨ä¸Šé¢å‘å¸ƒä¸€äº›è‡ªå·±çš„å­¦ä¹ ç»å†ï¼Œä¸ªäººæ„Ÿæƒ³ç­‰å†…å®¹ã€‚","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/tags/%E9%9A%8F%E7%AC%94/"}]}],"categories":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/categories/java/"},{"name":"SpringBoot","slug":"java/SpringBoot","permalink":"http://cyc0819.top/categories/java/SpringBoot/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"å‰ç«¯/Vue","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/Vue/"},{"name":"maven","slug":"java/maven","permalink":"http://cyc0819.top/categories/java/maven/"},{"name":"spring","slug":"java/spring","permalink":"http://cyc0819.top/categories/java/spring/"},{"name":"eCharts","slug":"å‰ç«¯/eCharts","permalink":"http://cyc0819.top/categories/%E5%89%8D%E7%AB%AF/eCharts/"},{"name":"SpringSecurity","slug":"java/SpringSecurity","permalink":"http://cyc0819.top/categories/java/SpringSecurity/"},{"name":"JWT","slug":"java/JWT","permalink":"http://cyc0819.top/categories/java/JWT/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"java/æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://cyc0819.top/categories/java/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"},{"name":"Swagger","slug":"java/Swagger","permalink":"http://cyc0819.top/categories/java/Swagger/"},{"name":"SpringCloud","slug":"java/SpringCloud","permalink":"http://cyc0819.top/categories/java/SpringCloud/"},{"name":"redis","slug":"java/redis","permalink":"http://cyc0819.top/categories/java/redis/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://cyc0819.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å­¦ä¹ æ€»ç»“","slug":"éšç¬”/å­¦ä¹ æ€»ç»“","permalink":"http://cyc0819.top/categories/%E9%9A%8F%E7%AC%94/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"},{"name":"shiro","slug":"shiro","permalink":"http://cyc0819.top/categories/shiro/"},{"name":"MyBatis","slug":"java/SpringBoot/MyBatis","permalink":"http://cyc0819.top/categories/java/SpringBoot/MyBatis/"},{"name":"HashMap","slug":"ç®—æ³•/HashMap","permalink":"http://cyc0819.top/categories/%E7%AE%97%E6%B3%95/HashMap/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"Hexo","slug":"åšå®¢/Hexo","permalink":"http://cyc0819.top/categories/%E5%8D%9A%E5%AE%A2/Hexo/"},{"name":"Swing","slug":"java/Swing","permalink":"http://cyc0819.top/categories/java/Swing/"}],"tags":[{"name":"java","slug":"java","permalink":"http://cyc0819.top/tags/java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://cyc0819.top/tags/SpringBoot/"},{"name":"SpringBootï¼ŒVue","slug":"SpringBootï¼ŒVue","permalink":"http://cyc0819.top/tags/SpringBoot%EF%BC%8CVue/"},{"name":"maven","slug":"maven","permalink":"http://cyc0819.top/tags/maven/"},{"name":"spring","slug":"spring","permalink":"http://cyc0819.top/tags/spring/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://cyc0819.top/tags/%E5%89%8D%E7%AB%AF/"},{"name":"eCharts","slug":"eCharts","permalink":"http://cyc0819.top/tags/eCharts/"},{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"http://cyc0819.top/tags/SpringSecurity/"},{"name":"JWT","slug":"JWT","permalink":"http://cyc0819.top/tags/JWT/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://cyc0819.top/tags/%E9%9A%8F%E7%AC%94/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://cyc0819.top/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://cyc0819.top/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"},{"name":"Swagger","slug":"Swagger","permalink":"http://cyc0819.top/tags/Swagger/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://cyc0819.top/tags/SpringCloud/"},{"name":"redis","slug":"redis","permalink":"http://cyc0819.top/tags/redis/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://cyc0819.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å­¦ä¹ æ€»ç»“","slug":"å­¦ä¹ æ€»ç»“","permalink":"http://cyc0819.top/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"},{"name":"shiro","slug":"shiro","permalink":"http://cyc0819.top/tags/shiro/"},{"name":"MyBatis","slug":"MyBatis","permalink":"http://cyc0819.top/tags/MyBatis/"},{"name":"HashMap","slug":"HashMap","permalink":"http://cyc0819.top/tags/HashMap/"},{"name":"Hexo","slug":"Hexo","permalink":"http://cyc0819.top/tags/Hexo/"},{"name":"è®°å½•","slug":"è®°å½•","permalink":"http://cyc0819.top/tags/%E8%AE%B0%E5%BD%95/"},{"name":"Swing","slug":"Swing","permalink":"http://cyc0819.top/tags/Swing/"}]}